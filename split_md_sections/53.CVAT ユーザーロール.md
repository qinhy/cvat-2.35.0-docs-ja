
# 53.CVAT ユーザーロール

CVAT には、2つの異なる種類のロールがあります。

- **グローバルロール**: これはシステム全体に適用される共通のロールです。CVAT.ai プラットフォームにログインしたすべてのユーザーに自動的に割り当てられます。CVAT.ai 全体で、登録ユーザーすべてが持つ基本的な権限を設定します。個々のタスクや役割に関係なく適用されます。
- **組織ロール**: これは組織内でユーザーができることを決定し、ユーザーの職務や責任に基づいた、より細やかなアクセス制御を可能にします。

組織ロールはグローバルロールを補完し、タスクやジョブなど、さまざまなリソースの可視性を決定します。

**制限**: 制限は、[**フリープラン**](https://www.cvat.ai/pricing/cloud) を利用するCVAT.aiクラウドプラットフォームのすべてのユーザーに適用され、  
**サブスクリプションの選択** により解除できます。

すべてのロールはあらかじめ定義されており、ユーザーインターフェースから変更することはできません。  
ただし、_セルフホスト型ソリューション_ では、`cvat/apps/*/rules/` に保存された `.rego` ファイルを使ってロールを調整できます。  
Rego は OPA（Open Policy Agent）ポリシーを定義するために使われる宣言型言語で、その構文は [**OPAドキュメント**](https://www.openpolicyagent.org/docs/latest/policy-language/) で詳しく説明されています。

> 注意: `.rego` ファイルを変更した後は、Docker Compose を再構築・再起動して変更を適用する必要があります。  
> この場合、Docker Compose コマンドを実行する際に `docker-compose.dev.yml` 構成ファイルを含めることを忘れないでください。

参照：

- [CVAT.ai のグローバルロール](#global-roles-in-cvatai)
- [CVAT.ai の組織ロール](#organization-roles-in-cvatai)
- [ジョブステージ](#job-stage)

## CVAT.ai のグローバルロール

> **注意:** グローバルロールはセルフホスト型ソリューションでのみ調整可能です。

CVAT には、ユーザーグループとして分類される3つのグローバルロールがあります。各ロールは以下の通りです。

<!--lint disable maximum-line-length-->
| ロール | 説明 |
|--------|------|
| **管理者** | CVATインスタンスとその中のすべての活動に対する完全な管理権限を持ちます。すべてのタスクとプロジェクトの表示・管理・変更が可能です。このロールはセルフホスト型インスタンス専用で、包括的な監督と制御を提供します。 |
| **ユーザー** <br>（デフォルト） | CVATに登録したすべてのユーザーに自動的に割り当てられるデフォルトロールです。自身のアカウント内のタスクとプロジェクトを表示・管理できますが、一定の制限があります（フリープラン参照）。<br><br>* CVATアカウントを持たないユーザーが組織に招待された場合、自動的に組織ロールが付与され、組織内での操作にはそのロールの制限が適用されます。 |
| **ワーカー** | 機能が限定されており、タスクの作成やロールの割り当て、管理操作はできません。割り当てられた範囲内（ジョブのバリデーションやアノテーション）でのみコンテンツの閲覧や操作が可能です。 |

<!--lint enable maximum-line-length-->
## CVAT.ai の組織ロール

組織ロールは、
**CVAT組織** 内でのみ利用できます。

![組織ロール](./images/user-roles.png)

組織ロールは、ユーザーが組織に招待された際に割り当てられます。

![組織ロール](./images/org-roles.png)

CVATで利用可能なロールは以下の通りです。
| ロール | 説明 |
|--------|------|
| **オーナー** | - 組織の作成者に自動的に割り当てられるロール<br>- 最大限の権限を持ち、他のユーザーへの変更/再割り当て不可<br>- 組織プランの制限のみ適用<br>- ユーザーの招待とロール割り当てが可能 |
| **メンテナー** | - ユーザーの招待が可能<br>- タスク/ジョブの作成・更新が可能<br>- 組織内の全タスクの閲覧が可能<br>- クラウドストレージへの完全なアクセス権を保有<br>- メンバーとロールの変更が可能 |
| **スーパーバイザー** | - 管理職ロール<br>- ジョブ/タスク/プロジェクトの作成が可能<br>- 組織メンバーへの割り当てが可能<br>- メンバーの招待やロール変更は不可 |
| **ワーカー** | - アノテーション作業とレビューが主な役割<br>- 割り当てられたジョブのみアクセス可能<br>- 機能は限定的 |
## ジョブステージ

ジョブの**ステージ**は、どのチームメンバーにも割り当てることができます。

**ステージ**はロールではありません。

ジョブには、どのロールのユーザーでも**アサイン**でき、その**アサインされたユーザー**が、  
「アノテート」「バリデート」「承認」など、ステージ固有の作業を行います。

![ジョブステージ](./images/job-stage.png)

ジョブの**ステージ**には以下のものがあります。

<!--lint disable maximum-line-length-->
| ステージ | 説明 |
|---------|------|
| **アノテーション** | アノテーションツールを使用できます。担当ユーザーは割り当てられたジョブを閲覧・アノテーションできます。デフォルトでは、アノテーションステージのユーザーはエラーや問題を報告できません。 |
| **バリデーション** | 品質管理ツールを使用できます。担当ユーザーは割り当てられたジョブを閲覧し、検証や問題報告が可能です。デフォルトでは、バリデーションステージのユーザーはエラー修正やアノテーションはできません。 |
| **承認** | 追加の権限やインターフェースの変更はありません。ジョブを完了としてマークするだけです。 |

<!--lint enable maximum-line-length-->

**アサインされたユーザー**は、アノテーションインターフェースのツールバーから、割り当てられた**ステージ**固有の機能を切り替えることができます。

![ジョブステージの変更](./images/change-stage.png)

- **標準**: インターフェースを**アノテーション**モードに切り替えます。
- **レビュー**: インターフェースを**バリデーション**モードに切り替えます。