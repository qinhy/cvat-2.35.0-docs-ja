---
title: 'スケルトンによるアノテーション'
linkTitle: 'スケルトンによるアノテーション'
weight: 12
description: 'スケルトンを使用したタスクのアノテーションガイド'
---

このガイドでは、**スケルトン**アノテーションを活用し、複雑な構造を効率的にアノテーションするプロセスについて解説します。

**スケルトン**は、人体ポーズ推定や顔のランドマークなど、一貫した構造を持つ複雑なオブジェクトのアノテーションのためのテンプレートです。

**スケルトン**は多数のポイント（要素とも呼ばれます）で構成されており、エッジで繋がれている場合もあります。各ポイントは独立したオブジェクトとして機能し、色・遮蔽・可視性などの固有の属性やプロパティを持ちます。

**スケルトン**は、2つのフォーマットで{{< ilink "/docs/manual/advanced/formats" "**エクスポート**" >}}できます：{{< ilink "/docs/manual/advanced/formats/format-cvat#cvat-for-videos-export" "**CVAT for image**" >}}と{{< ilink "/docs/manual/advanced/formats/coco-keypoints" "**COCO Keypoints**" >}}です。

> **注意**：スケルトンのラベルは、ラベルなしプロジェクトにデータセットをインポートしてもインポートされません。
> インポート前に手動でラベルを定義する必要があります。

参照：

- [スケルトンを手動で追加](#adding-skeleton-manually)
  - [スケルトンコンフィギュレーター](#skeleton-configurator)
  - [スケルトンポイントの設定](#configuring-skeleton-points)
  - [スケルトンラベルの手動追加](#adding-skeleton-labels-manually)
- [モデルからスケルトンラベルを追加](#adding-skeleton-labels-from-the-model)
- [スケルトンによるアノテーション](#annotation-with-skeletons)
- [スケルトンの自動アノテーション](#automatic-annotation-with-skeletons)
- [キャンバス上でのスケルトン編集](#editing-skeletons-on-the-canvas)
- [サイドバーでのスケルトン編集](#editing-skeletons-on-the-sidebar)

## スケルトンを手動で追加

スケルトンを使ってアノテーションを開始するには、**コンフィギュレーター**で**スケルトン**タスクを設定する必要があります。

**コンフィギュレーター**を開くには、{{< ilink "/docs/manual/basics/create_an_annotation_task" "タスク作成時" >}}に、スケルトンを手動で設定したい場合は**スケルトンをセットアップ**ボタンをクリックしてください。または、モデルからスケルトンラベルを追加したい場合は{{< ilink "/docs/manual/advanced/skeletons#adding-skeleton-labels-from-the-model" "**モデルから**" >}}を選択します。

![](/images/image-setup-skeleton-1.jpg)

### スケルトンコンフィギュレーター

スケルトン**コンフィギュレーター**は、アノテーション用のスケルトンを作成するツールです。以下の項目があります。

![](/images/image-skeleton-configurator-overview.jpg)

| 番号 | 名前                      | 説明                                                                                                           |
| ---- | ------------------------- | -------------------------------------------------------------------------------------------------------------- |
| **1**  | **背景画像をアップロード** | （任意）スケルトンの上に背景画像をアップロードできます。                                                      |
| **2**  | **ポイントを追加**         | **描画エリア**（**8**）にスケルトンポイントを追加します。                                                    |
| **3**  | **クリック＆ドラッグ**     | **描画エリア**（**8**）内でポイントを移動できます。                                                          |
| **4**  | **エッジを追加**           | **描画エリア**（**8**）内のポイント（**2**）同士を繋ぐエッジを追加します。                                   |
| **5**  | **ポイントを削除**         | ポイントを削除します。**ポイントを削除**をクリックし、**描画エリア**（**8**）の任意のポイント（**2**）をクリックしてください。|
| **6**  | **スケルトンをダウンロード**| 作成したスケルトンを.SVG形式でダウンロードします。                                                            |
| **7**  | **スケルトンをアップロード**| .SVG形式のスケルトンをアップロードします。                                                                    |
| **8**  | **描画エリア**             | スケルトンを描画するキャンバスとして使用します。                                                              |

### スケルトンポイントの設定

ラベルの命名・属性の設定・各スケルトンポイントの色の変更が可能です。

これを行うには、スケルトンポイントを右クリックし、**設定**を選択します。

![](/images/image-skeleton-drawn-example.jpg)

開いたメニューでポイントの設定を変更できます。[通常のタスクのラベルや属性の追加](docs/manual/basics/create_an_annotation_task/#create-a-task)と同様の操作です。

![](/images/image-skeleton-point-setup.jpg)

**スケルトン**ポイントは、親の**スケルトン**内にのみ存在できます。

> **注意**：既存のタスク/プロジェクトのスケルトン設定は変更できません。

> ラベルコンフィギュレーターの**Raw**タブからスケルトン設定をコピー/挿入できます。

### スケルトンラベルの手動追加

**スケルトンタスク**を作成するには、以下の手順を実行してください。

1. **コンフィギュレーター**を開く。
2. （任意）背景画像をアップロード。
3. ラベル名フィールドにラベル名を入力。
4. （任意）{{< ilink "/docs/manual/basics/create_an_annotation_task#add-an-attribute" "**属性を追加**" >}}<br>**注意**：各ポイントごとに属性を追加できます。詳細は[**スケルトンポイントの設定**](#configuring-skeleton-points)を参照してください。
5. **ポイントを追加**で**描画エリア**にポイントを追加。
6. **エッジを追加**でポイント間にエッジを追加。
7. ファイルをアップロード。
8. 以下をクリック：
   - **送信＆開く**：タスクを作成して開きます。
   - **送信＆続行**：設定を送信し、新しいタスク作成を開始します。

## モデルからスケルトンラベルを追加

モデルからポイントを追加し、アノテーションを行うには以下の手順を実行してください。

1. **ベーシックコンフィギュレーター**を開く。
2. **コンストラクター**タブで**モデルから**をクリック。
3. **ラベルを選択するモデル**から`Human pose estimation`モデルなどを選択。
4. 使用したいモデルのラベルをクリック。<br>選択したラベルはグレー表示になります。

   ![](/images/auto-annot-sk.jpg)

5. （任意）ラベルを調整したい場合は、ラベル内の**属性を更新**アイコンをクリック。<br>{{< ilink "/docs/manual/advanced/skeletons#skeleton-configurator" "**スケルトンコンフィギュレーター**" >}}が開き、{{< ilink "/docs/manual/advanced/skeletons#configuring-skeleton-points" "**スケルトンの設定**" >}}ができます。<br>**注意**：タスク/プロジェクト作成後にラベルの調整はできません。
6. **完了**をクリック。選択したラベルがラベルウィンドウに表示されます。
7. データをアップロード。
8. 以下をクリック：
   - **送信＆開く**：タスクを作成して開きます。
   - **送信＆続行**：設定を送信し、新しいタスク作成を開始します。

## スケルトンによるアノテーション

**スケルトン**でアノテーションするには、以下の手順を実行してください。

1. ジョブを開く。
2. ツールパネルで**新しいスケルトンを描画**を選択。
3. **トラック**または**シェイプ**を選択してアノテーション（トラッキングなしでも可能）。

   ![](/images/image-draw-new-skeleton.jpg)

4. 画像上にスケルトンを描画。

![](/images/image-draw-new-skeleton.gif)

## スケルトンの自動アノテーション

**スケルトン**で自動アノテーションを行うには、以下の手順を実行してください。

1. ジョブを開き、ツールパネルで**AIツール** > **検出器**を選択。
2. ドロップダウンリストからモデルを選択。対応するポイント一覧とスケルトン名がリスト上部に表示されます。

   ![](/images/auto-annot-sk-detectors.jpg)

3. （任意）**ゴミ箱**アイコンをクリックすると、マッピング済みのアイテムを削除できます。
   - スケルトンごと、または全ポイントの削除。
   - 2つのマッピング済みスケルトンから特定のポイントのみ削除。
4. **アノテート**をクリック。

## キャンバス上でのスケルトン編集

描画済みスケルトンはバウンディングボックスで囲まれており、通常のバウンディングボックスと同じように、ドラッグ・リサイズ・回転などの操作ができます。

![](/images/skeleton_editing_canvas.gif)

ポイントを移動すると、バウンディングボックスは自動的に調整され、他のポイントには影響しません。

![](/images/skeleton_editing_canvas-2.gif)

また、**ショートカット**はスケルトン全体や各要素にも適用されます。

- スケルトン全体にショートカットを使うには、バウンディングボックスにマウスを重ねてショートカットキーを押します。ロック・遮蔽・ピン留め・キーフレーム・アウトサイド（スケルトントラック用）などのショートカットが使用できます。
- 特定のスケルトンポイントにショートカットを使うには、ポイントにマウスを重ねてショートカットキーを押します。同じショートカットに加え、アウトサイド（個別スケルトンシェイプ要素にも適用可）も利用できます。

## サイドバーでのスケルトン編集

CVATでは、サイドバーからスケルトンのプロパティや属性を設定することもできます。

この方法は他のオブジェクトタイプと似ていますが、いくつかの特有の違いがあります。

ユーザーがスケルトンのパーツ一覧を確認できる追加の折りたたみセクションがあります。

<div style="display: flex; align-items: flex-start;">
    <img src="/images/image-skeleton-track-sidebar.jpg" width="300px" />
    <img src="/images/image-skeleton-shape-sidebar.jpg" width="300px" />
</div>

スケルトンポイントには**アウトサイド**、**遮蔽**、**非表示**などのプロパティを設定できます。

![](/images/point-properties.jpg)

**アウトサイド**と**非表示**は、スケルトンポイントを不可視にします。

- **アウトサイド**プロパティはアノテーションの一部です。オブジェクトの一部がフレーム外の場合に使用します。
- **非表示**はアノテーターの利便性のためのみポイントを非表示にします。このプロパティは異なるセッション間で保存されません。
- **遮蔽**はポイントをフレーム上で可視のままにしますが、他のオブジェクトの背後に隠れていることを意味します。