---
title: 'セグメンテーションマスク'
linkTitle: 'セグメンテーションマスク'
weight: 6
description: 'セグメンテーションマスク形式でのデータのエクスポートとインポート方法'
---

セグメンテーションマスク形式は、セマンティックセグメンテーション、インスタンスセグメンテーション、パノプティックセグメンテーションなどのタスクのモデル学習でよく使用されます。

CVATのセグメンテーションマスクは、
[Pascal VOC](/docs/manual/advanced/formats/format-voc/) 内で
CVATエンジニアによって作成された形式です。

## セグメンテーションマスクのエクスポート

画像のエクスポートについて：

- サポートされているアノテーション：バウンディングボックス、ポリゴン
- 属性：サポートされていません
- トラック：サポートされていません

ダウンロードされるファイルは、以下のような構造の.zipアーカイブです：

```bash
taskname.zip/
├── labelmap.txt # オプション、非VOCラベルの場合は必須
├── ImageSets/
│   └── Segmentation/
│       └── default.txt # 拡張子なしの画像名リスト
├── SegmentationClass/ # クラスごとに統合されたマスク
│   ├── image1.png
│   └── image2.png
└── SegmentationObject/ # インスタンスごとに統合されたマスク
    ├── image1.png
    └── image2.png

# labelmap.txt
# ラベル : 色 (RGB) : 'body'パーツ : アクション
background:0,128,0::
aeroplane:10,10,128::
bicycle:10,128,0::
bird:0,108,128::
boat:108,0,100::
bottle:18,0,8::
bus:12,28,0::
```

マスクは1チャンネルまたは3チャンネルの`png`画像です。
画像内の各ピクセルは特定のラベルに対応する色を持ちます。
色はPascal VOCの[アルゴリズム](http://host.robots.ox.ac.uk/pascal/VOC/voc2012/htmldoc/devkit_doc.html#sec:voclabelcolormap)に従って生成されます。
デフォルトでは、色 `(0, 0, 0)` は背景を表します。

## セグメンテーションマスクのインポート

アップロードするファイル：以下の構造のzipアーカイブ

```bash
  taskname.zip/
  ├── labelmap.txt # オプション、非VOCラベルの場合は必須
  ├── ImageSets/
  │   └── Segmentation/
  │       └── <任意のサブセット名>.txt
  ├── SegmentationClass/
  │   ├── image1.png
  │   └── image2.png
  └── SegmentationObject/
      ├── image1.png
      └── image2.png
```

グレースケール（1チャンネル）のPNGマスクもインポート可能です。
グレースケールマスクの場合、画像上の最大カラーインデックスと同じ行数のラベルリストを用意してください。行の順序はインデックス順でなければなりません。各行の色は任意ですが、重複しない色を設定してください。アノテーション内で使われていないカラーインデックスがある場合は、ダミーラベルで埋めてください。
例：

```
q:0,128,0:: # カラーインデックス0
aeroplane:10,10,128:: # カラーインデックス1
_dummy2:2,2,2:: # カラーインデックス2のダミー
_dummy3:3,3,3:: # カラーインデックス3のダミー
boat:108,0,100:: # カラーインデックス3
...
_dummy198:198,198,198:: # カラーインデックス198のダミー
_dummy199:199,199,199:: # カラーインデックス199のダミー
...
the last label:12,28,0:: # カラーインデックス200
```

- サポートされているシェイプ：ポリゴン