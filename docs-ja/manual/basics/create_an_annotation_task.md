---
title: 'アノテーションタスクの作成'
linkTitle: 'アノテーションタスクの作成'
weight: 2
description: 'アノテーションタスクの作成と設定方法について説明します。'
---

CVATでアノテーションを開始するには、アノテーションタスクを作成し、そのパラメータを指定する必要があります。

タスクを作成するには、**Tasks**ページで**+**をクリックし、**Create new task**を選択します。

![Create new task](/images/image004.jpg)

参照：

- [タスクの作成](#タスクの作成)
  - [ラベル形状](#ラベル形状)
  - [属性の追加](#属性の追加)
  - [ファイルの選択](#ファイルの選択)
  - [RAW形式でのラベル編集](#raw形式でのラベル編集)
  - [3Dタスク用のデータ形式](#3dタスク用のデータ形式)
- [高度な設定](#高度な設定)

## タスクの作成

新しいタスクを作成するには、タスクコンフィギュレーターを開きます。

![Basic configurator](/images/basic_confugurator.jpg)

次のパラメータを指定します：

1. **Name**フィールドに新しいタスクの名前を入力します。

   ![Name of task](/images/image005.jpg)

2. （オプション）**Projects**ドロップダウンから新しいタスクのプロジェクトを選択します。<br>タスクをプロジェクトに割り当てない場合は、このフィールドを空のままにしてください。

   <!-- TODO: replace the image with '/images/select_project.png' after updating screenshots -->
   ![Select project](/images/image193.jpg)

   > **注:** 以下の手順はタスクがプロジェクトに属していない場合に有効です。<br>タスクがプロジェクトに割り当てられている場合は、プロジェクトのラベルがタスクに適用されます。

3. **Constructor**タブで**Add label**をクリックします。<br>ラベルコンストラクターメニューが開きます：

   ![Label constructor](/images/image124.jpg)

4. **Label name**フィールドにラベルの名前を入力します。
5. （オプション）ラベルの使用を特定の{{< ilink "/docs/manual/basics/CVAT-annotation-Interface/controls-sidebar#shapes" "形状ツール" >}}に制限したい場合は、[**Label shape**](#ラベル形状)ドロップダウンから形状を選択します。
6. （オプション）ラベルの色を選択します。

   ![label shape and color](/images/label_shape.jpg)

7. （オプション）[**属性の追加**](#属性の追加)をクリックして属性を設定します。
8. [**ファイルの選択**](#ファイルの選択)をクリックしてアノテーション用のファイルをアップロードします。
9. **Continue**をクリックするとラベルを登録して新しいラベルの追加を開始できます。<br>**Cancel**をクリックすると現在のラベルを破棄してラベルリストに戻ります。
10. **Submit and open**をクリックすると設定を保存して作成したタスクを開きます。<br>**Submit and continue**をクリックすると設定を保存して新しいタスクの作成を続けます。

### ラベル形状

ラベル（またはクラス）はアノテーション可能なオブジェクトのカテゴリです。

**Label shape**を設定すると、そのラベルの使用を特定の{{< ilink "/docs/manual/basics/CVAT-annotation-Interface/controls-sidebar#shapes" "形状ツール" >}}に制限できます。

`Any`はデフォルト設定で、ラベルの使用を特定の形状ツールに制限しません。

例えば、以下のように設定した場合：

- ラベル`sun`を**Label shape**タイプ`ellipse`で追加
- ラベル`car`を**Label shape**タイプ`any`で追加

結果：

- `sun`ラベルは楕円形状のみで利用可能
- `car`ラベルは全ての形状で利用可能

  ![Label shape](/images/label_shape.gif)

{{< ilink "/docs/manual/basics/CVAT-annotation-Interface/controls-sidebar" "コントロールサイドバー" >}}上のツールは、選択した形状タイプのみに制限されます。

例えば、`Any`を選択すると全てのツールが利用可能ですが、全ラベルで`Rectangle`を選択した場合は**Rectangle**ツールだけがサイドバーに表示されます。

> **注:** **Label shape**は**AI**および**OpenCV**ツールには適用できません。これらのツールは常に利用可能です。

![Type control sidebar](/images/type_tools.png)

必要に応じてラベルの形状を変更できます。この変更は既存のアノテーションには影響しません。

例えば、ポリゴンでオブジェクトを作成した後、ラベル形状をポリラインに変更しても、既存のオブジェクトはポリゴンのまま残ります。ただし、同じラベルで新しいポリゴンオブジェクトは追加できなくなります。

> **注:** `skeleton`ラベルの形状は変更できません。<br>`skeleton`ラベルの**Label shape**フィールドは無効です。

### 属性の追加

**属性**は、色やモデルなど、アノテートされたオブジェクトの特性を表します。

例えば、`face`ラベルがあり、顔のタイプを指定したい場合、`male`や`female`の追加ラベルを作成する代わりに、属性で情報を追加できます。

属性には2種類あります：

- **Immutable（不変）属性**：フレームごとに変化しない一意の属性。例：`age`、`gender`、`color`
- **Mutable（可変）属性**：フレームごとに変化する一時的な属性。例：`pose`、`quality`、`truncated`

追加した属性は**Objects menu**から利用できます：

![Attributes](/images/attributes.jpg)

属性を追加するには以下の手順で行います：

1. **Constructor**タブに移動し、**Add attribute**をクリックします。

   ![Attributes](/images/attributes_01.png)

2. **Name**フィールドに属性名を入力します。
3. ドロップダウンから**Objects menu**での属性の表示方法を選択します：

   - `Select`：ドロップダウンリストから属性を選択。<br>**Attribute value**フィールドに`__undefined__`を追加すると、空白値がリストに表示されます。<br>オブジェクトの属性が特定できない場合に便利です。
   - ![Undefined value](/images/undefined_value.jpg)
   - `Radio`：複数選択肢から1つを選択
   - `Checkbox`：複数の選択肢を選択可能
   - `Text`：テキスト入力欄
   - `Number`：`min;max;step`形式の数値入力欄

4. **Attribute values**フィールドに属性値を追加します。<br>値の区切りには**Enter**を使用。<br>値を削除する場合は**Backspace**または値の横の**x**をクリックします。
5. （オプション）可変属性の場合は**Mutable**を選択します。
6. （オプション）デフォルト属性を設定するには、マウスカーソルを重ねてクリックしてください。デフォルト属性は青色に変わります。

![Default attribute](/images/default_attribute.jpg)

属性を削除するには**Delete attribute**をクリックします。

### ファイルの選択

ファイルのアップロード方法はいくつかあります：

<!--lint disable maximum-line-length-->

| データソース             | 説明                                                                                                                                                                                                                                                                                                                                           |
| -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| My computer          | ご自身のPCやノートPCからファイルを選択します。<br>選択方法：<br>1. **Select files**フィールドをクリック<br>![Select files](/images/select_files.jpg)<br>2. アップロードするファイルを選択します。                                                                                                              |
| Connected file share | **上級者向けオプション**。<br>ローカルまたはクラウド共有フォルダからファイルをアップロードします。<br>**注**：まずファイル共有をマウントする必要があります。<br>詳細は{{< ilink "/docs/administration/basics/installation#share-path" "Share path" >}}をご覧ください。                                 |
| Remote source        | フィールドにURLリスト（1行につき1つ）を入力します。                                                                                                                                                                                                                                                          |
| Cloud Storage        | **上級者向けオプション**。<br>クラウドストレージからファイルをアップロードするには、クラウドストレージ名を入力し（オプションでマニフェストファイルを選択）、必要なファイルを選択します。<br>詳細は{{< ilink "/docs/manual/basics/attach-cloud-storage" "Attach cloud storage" >}}をご覧ください。検索機能でファイル名からクラウドストレージのファイルを探せます。 |

<!--lint enable maximum-line-length-->

### RAW形式でのラベル編集

**Raw**は上級ユーザー向けのラベル編集方法です。

独立したタスク間でラベルをコピーしたい場合などに便利です。

> **注:** 既存のタスクやプロジェクトのRAW仕様を変更する際は注意してください。<br>「id」プロパティを削除すると既存のアノテーションが失われます。<br>**このプロパティはこのフィールドにテキストを挿入すると自動で削除されます。**

![](/images/image126.jpg)

Rawではラベルデータが_.json_形式で表示され、テキストとして編集やコピーが可能です。**Done**ボタンで変更を適用し、**Reset**ボタンで変更をキャンセルできます。

### 3Dタスク用のデータ形式

3Dタスクを作成するには、以下のいずれかのディレクトリ構造のアーカイブを用意する必要があります。

> **注:** 2Dデータと3Dデータは同じタスクで混在できません。

{{< tabpane >}}
{{< tab header="Velodyne" >}}
  VELODYNEフォーマット
    構成例:
      velodyne_points/
        data/
          image_01.bin
          IMAGE_00 # 不明なディレクトリ名
                   # image_01.pngはIMAGE_00, IMAGE_01, IMAGE_02, IMAGE_03などの下に配置される場合あり
      data/
        image_01.png
{{< /tab >}}
{{< tab header="3D pointcloud" >}}
   3D点群データフォーマット
    構成例:
      pointcloud/
        00001.pcd
      related_images/
        00001_pcd/
          image_01.png # または他の画像名

{{< /tab >}}
{{< tab header="3D Option 1" >}}
    3D, デフォルトデータフォーマット オプション1
    構成例:
      data/
        image.pcd
        image.png

{{< /tab >}}
{{< tab header="3D Option 2" >}}
    3D, デフォルトデータフォーマット オプション2
    構成例:
      data/
        image_1/
            image_1.pcd
            context_1.png # または他の名前
            context_2.jpg


{{< /tab >}}
{{< /tabpane >}}

## 高度な設定

高度な設定を利用すると、タスクの追加パラメータを設定したり、特定のニーズや要件に合わせてカスタマイズできます。

![](/images/image128.jpg)

利用可能なパラメータは次の通りです：

<!--lint disable maximum-line-length-->

| 要素                  | 説明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| -------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ソート方法            | **注:** 動画データには対応していません。<br><br>データのソート方法が複数あります。<br>例：`2.jpeg`, `10.jpeg`, `1.jpeg` の並びは、<br><br><li> **Lexicographica**: `1.jpeg`, `10.jpeg`, `2.jpeg` <li> **Natural**: `1.jpeg`, `2.jpeg`, `10.jpeg` <li> **Predefined**: `2.jpeg`, `10.jpeg`, `1.jpeg` <li> **Random**: ランダム順でアップロードされます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| zip/ビデオチャンクの利用 | このパラメータを利用すると、ビデオや画像データセットをアノテーション用に短いビデオクリップやフレームのzipファイルに分割できます。<br>zipファイルは大きくなりますが、クライアント側でデコードが不要です。動画クリップは小さくなりますが、デコードが必要です。<br>動画タスクでは、このパラメータをオフにすることを推奨します。クライアントとサーバ間の通信量を減らせます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| キャッシュの利用       | チェックボックスを選択すると、_オンザフライ_データ処理が有効になり、タスク作成時間の短縮や人気の低いアイテムを除外するキャッシュにデータを保存します。<br><br>詳細は{{< ilink "/docs/manual/advanced/data_on_fly" "Data preparation on the fly" >}}をご覧ください。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 画像品質              | CVATには元の品質と圧縮品質の2種類のデータがあります。元の品質の画像はデータセットエクスポートや自動アノテーションで使用されます。圧縮画像はアノテーション専用で、サーバとクライアント間の通信量を減らします。<br>画像内の小さなオブジェクトが元画像では見えない場合のみ、圧縮レベルの調整を推奨します。<br>値は`5`（高圧縮）から`100`（非圧縮）です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| オーバーラップサイズ   | このパラメータでオーバーラップするセグメントを作成でき、1つのセグメントから次のセグメントへ連続的に追跡できます。<br><br>**注:** この機能はバウンディングボックスのみ対応です。<br><br>このパラメータには以下のオプションがあります：<br><br>**補間タスク**（動画シーケンス）。隣接する2つのセグメントでバウンディングボックスでアノテーションすると、それらは1つのバウンディングボックスに統合されます。オーバーラップがゼロ、または隣接セグメントでバウンディングボックスが正確でない場合（対象物を適切に囲んでいない、ずれている、歪んでいる）、オブジェクト移動の補間が難しくなり、同じオブジェクトに対して複数のトラックが作成されます。<br><br>**アノテーションタスク**（独立画像）。オーバーラップがゼロより大きく、セグメントのアノテーションが正確な場合は、自動的に1つのオブジェクトに統合されます。オーバーラップがゼロ、またはアノテーションが不正確な場合は、同一オブジェクトに複数のバウンディングボックスが作成されます。<br><br>異なるセグメント（オーバーラップフレーム）でアノテーションが大きく異なる場合、同じオブジェクトに対して2つの形状ができます。<br><br>これを避けるには、1つ目のセグメントと2つ目のセグメントで同じオブジェクトを正確にアノテートし、2つのアノテーション間でトラックを作成してください。 |
| セグメントサイズ       | このパラメータでデータセットをより小さなパートに分割できます。例えば、複数のアノテーターでデータセットを分担したい場合、パートごとにジョブとして割り当てて同時並行で作業できます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 開始フレーム           | 動画の最初のフレームを定義します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 終了フレーム           | 動画の最後のフレームを定義します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| フレームステップ       | このパラメータで動画フレームや画像をフィルタリングできます。フレームステップ値を指定すると、指定した間隔のフレームや画像のみデータセットに含まれます。<br>例：フレームステップ`25`の場合、100フレームの動画では`1`、`26`、`51`、`76`、`100`フレームのみ含まれます。データセットサイズの削減や特定フレームの抽出に便利です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| チャンクサイズ         | クライアントからサーバーに送信する際に、チャンクにまとめるフレーム数を定義します。<br>サーバーは自動的に空のチャンクかどうかを判断します。<br>推奨値：<li> 1080p以下：36 <li> 2k以下：8 <li>16 - 4k以下：4 <li>8 - それ以上：1~4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| イシュートラッカー     | イシュートラッカーのURLを指定します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ソースストレージ       | アノテーションやバックアップ等のリソースをインポートする際のソースストレージを指定します。<br>タスクがプロジェクトに割り当てられている場合、**Use project source storage**トグルでプロジェクトの値を利用するか新規に指定するか選択できます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ターゲットストレージ    | アノテーションやバックアップ等のリソースをエクスポートする際のターゲットストレージ（ローカルまたはクラウド）を指定します。<br>タスクがプロジェクトで作成された場合、**Use project target storage**トグルでプロジェクトの値を利用するか新規に指定するか選択できます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |

<!--lint enable maximum-line-length-->

**Submit & Open**をクリックすると設定を保存してタスクを開きます。

連続して複数のタスクを作成する場合は**Submit & Continue**をクリックします。

作成したタスクは{{< ilink "/docs/manual/basics/tasks-page" "タスクページ" >}}に表示されます。