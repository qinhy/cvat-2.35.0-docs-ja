# 3Dオブジェクトアノテーション

3Dアノテーションツールを使用して、車両、建物、風景などの3Dオブジェクトやシーンにラベル付けができます。

目次：

- [ナビゲーション](#navigation)
- [キュボイドによるアノテーション](#annotation-with-cuboids)
  - [シェイプによるアノテーション](#annotation-with-shapes) 
  - [キュボイドによるトラッキング](#tracking-with-cuboids)

## ナビゲーション

3Dアノテーションキャンバスは以下のように表示されます：

![3Dキャンバス](/images/3d-canvas.jpg)

> 注意: データセットにコンテキスト画像を追加した場合、キャンバスにも表示されます。詳細は[コンテキスト画像](docs/manual/advanced/context-images/)を参照してください。

利用可能なツールについては[コントロールサイドバー](http://localhost:1313/docs/manual/CVAT-annotation-Interface/basics/controls-sidebar/)を参照してください。

マウスまたはキーボードで移動できます：

![](/images/image216_carla_town3.jpg)

キーボードショートカット一覧：

| 操作 | キー |
|------|------|
| カメラ回転 | **Shift** + **矢印キー** |
| 左右移動 | **Alt** + **J**/**L** |
| 上下移動 | **Alt** + **U**/**O** |
| ズーム | **Alt** + **K**/**I** |

## キュボイドによるアノテーション

3Dアノテーションには2つのモードがあります：

- **シェイプ**：物体検出などの単一フレームのアノテーション用
- **トラック**：オブジェクトの動きを追跡。補間機能で連続フレーム間の位置を予測し、一意のIDを付与

### シェイプによるアノテーション

3Dシェイプの追加手順：

1. オブジェクトペインで**新規キュボイド描画** > ラベル選択 > **シェイプ**を選択

![](/images/image217.jpg)

2. カーソルに追従するキュボイドを3Dシーン上に配置

![](/images/gif026_carla_town3.gif)

3. 投影ビューでキュボイドを調整（左クリックドラッグで編集）

![](/images/gif027_carla_town3.gif)

4. 4つの頂点を移動してサイズを変更可能

![](/images/gif028_carla_town3.gif)

5. 中心点をドラッグして回転可能

![](/images/gif029_carla_town3.gif)

### キュボイドによるトラッキング 

トラッキング手順：

1. オブジェクトペインで**新規キュボイド描画** > ラベル選択 > **トラック**を選択

2. キュボイドを3Dシーン上に配置

3. 投影ビューで調整

![](/images/gif027_carla_town3.gif)

4. サイズを調整

![](/images/gif028_carla_town3.gif)

5. 回転を調整

![](/images/gif029_carla_town3.gif)

6. フレームを進め、必要に応じて1フレーム目のキュボイドを調整

7. 対象オブジェクトが存在する最終フレームまで繰り返し

詳細はトラックモードのドキュメントを参照してください。

# マルチタスクの作成

**マルチタスク作成**機能で、同じ設定の複数ビデオアノテーションタスクを一括作成できます。

タスクページの**+**から**マルチタスク作成**を選択してください。

> **注意:** この機能はビデオ専用です。

![](/images/create_multi_tasks_1.png)

参照：

- [マルチタスクの作成](#マルチタスクの作成)
- [例](#例)
- [エラー](#エラー) 
- [高度な設定](#高度な設定)

## マルチタスクの作成

複数タスクを追加するには：

![マルチタスク設定](/images/create_multi_tasks_2.png)

以下のパラメータを設定：

1. **名前**：
   - タスク名を入力
   - オプション：`{{index}}`でインデックス(0から)を付加
   - オプション：`{{file_name}}`でファイル名を付加

2. オプション：**プロジェクト**を選択
   未選択の場合はプロジェクトに紐付けられません

   ![プロジェクト選択](/images/select_project.png)

   > **注意:** 以下はプロジェクト未選択時のみ有効
   > プロジェクト選択時はそのプロジェクトのラベルが適用されます

3. **コンストラクタ**タブで**ラベル追加**
4. **ラベル名**を入力
5. オプション：ラベルの色を選択
6. オプション：**属性追加**で属性を設定
7. **ファイル選択**でファイルをアップロード
   > **注意:** クラウドストレージからの一括アップロードは非対応
8. **タスク送信**をクリック

## 例

マルチタスク作成例：

1. 名前に`Create_multitask-{{index}}-{{file_name}}`を入力
2. ラベルを追加
3. ファイル選択（4つ以上の場合は合計数のみ表示）
   ![](/images/create_multi_tasks_3.png)
4. **タスク送信**をクリック

   ![](/images/create_multi_tasks_4.png)

5. 進捗バーが表示

   ![](/images/create_multi_tasks_5.png)

6. **OK**をクリック

   ![](/images/create_multi_tasks_6.png)

結果：

![](/images/create_multi_tasks_7.png)

## エラー

マルチタスク作成中に発生する可能性のあるエラーは以下の通りです：

<!--lint disable maximum-line-length-->

| エラー | 説明 |
|--------|------|
| ![](/images/create_multi_tasks_8.png) | 無効なファイル形式です。ビデオファイルのみがサポートされています。 |
| ![](/images/create_multi_tasks_9.png) | CVATがビデオファイルの処理に失敗しました。<br>失敗したファイル名がプログレスバーに表示されます。<br><br>対処方法：<li>**失敗したタスクを再試行**をクリックして再度実行<li>**OK**をクリックしてファイルをスキップ |

<!--lint enable maximum-line-length-->

## 高度な設定

高度な設定では、タスクの追加パラメータを設定したり、特定の要件に合わせてカスタマイズしたりできます。

詳細については[高度な設定]セクションを参照してください。

# 設定

設定を開くには、ヘッダーのユーザーメニューから設定を選択するか、`F2`キーを押します。

![](/images/image067.jpg)

設定には以下の2つのタブがあります：

### プレイヤー設定

- `C`/`V`キーのステップ間隔調整
- `Space`/再生ボタンの再生速度調整  
- キャンバス背景色の選択(RGB/HEX形式)
- ズームリセット動作の選択
- フレーム回転の適用範囲設定
- ズーム時の画像表示品質設定

|        _スムーズ表示_         |        _ピクセル表示_         |
|---------------------------|----------------------------|
| ![](/images/smoothed.jpg) | ![](/images/pixelized.jpg) |

### ワークスペース設定

![](/images/image155.jpg)

- 自動保存の有効化と保存間隔設定
- 補間トラックの表示設定
- オブジェクト詳細の表示設定：

  ![](/images/image152_detrac.jpg)

- オブジェクト詳細の表示内容設定：
  - ID
  - 属性
  - ラベル  
  - ソース(MANUAL/AUTO/SEMI-AUTO)
  - 説明
  - サイズ情報

- テキスト配置モード：
  - 自動配置
  - 中央配置

- テキストフォントサイズ設定
- 自動境界線の有効化
- インテリジェントポリゴンクロッピングの有効化
- フレームタグの表示設定
- AAMズームマージン設定
- コントロールポイントサイズ設定
- ポリゴン近似のデフォルト頂点数設定

設定は`保存`ボタンで保存され、サーバーに永続化されます。
`キャンセル`または`F2`でアノテーション画面に戻ります。
# 3Dタスクワークスペース


![](/images/image214_carla_town3.jpg)

`related_images`フォルダに画像が含まれている場合、パースペクティブウィンドウに`コンテキスト画像`が表示されます。
コンテキスト画像は3Dデータと比較でき、マーキングされたオブジェクトのラベルを特定するのに役立ちます。

`パースペクティブ` – 3Dタスクでオブジェクトを操作するためのメインウィンドウ。

プロジェクション - プロジェクションはオブジェクトに紐づいており、キューボイドが中央にあり、長方形のように見えます。
プロジェクションは選択されたオブジェクトのみを表示します。

- `トップ` – 上から見た投影図。
- `サイド` – オブジェクトの左側からの投影図。
- `フロント` - オブジェクトの正面からの投影図。

# 用語集

## ラベル
ラベルはアノテーション対象のオブジェクトの種類です（例：人、自動車、車両など）。

![](/images/image032_detrac.jpg)

---

## 属性
属性はアノテーション対象オブジェクトの特性です（例：色、モデル、品質など）。属性には2種類あります。

### 固有
固有属性は不変であり、フレームごとに変更できません（例：年齢、性別、色など）。

  ![](/images/image073.jpg)

### 一時的
一時的属性は可変であり、任意のフレームで変更できます（例：品質、ポーズ、切り取られた状態など）。

  ![](/images/image072.jpg)

---

## トラック
トラックは、1つのオブジェクトに対応する異なるフレーム上のシェイプの集合です。
トラックは「トラックモード」で作成されます。

![](/images/gif003_detrac.gif)

---

## アノテーション
アノテーションはシェイプとトラックの集合です。アノテーションにはいくつかの種類があります。

- _手動_：人によって作成されるもの
- _半自動_：主に自動で作成されるが、ユーザーが一部データ（例：補間）を提供するもの
- _自動_：人の介在なしに自動で作成されるもの

---

## 近似
近似はポリゴンの頂点数を減らすことができます。
アノテーションファイルの軽量化や、ポリゴン編集の容易化に利用できます。

![](/images/approximation_accuracy.gif)

---

## トラッカブル
トラッカブルオブジェクトは、前のフレームがそのオブジェクトの最新キー フレームであれば自動で追跡されます。詳細は
トラッカーのセクションを参照してください。

![](/images/tracker_indication_detrac.jpg)

---

## モード

### 補間
動画アノテーション用のモードで、[`トラック`](#track)オブジェクトを利用します。
キー フレーム上のオブジェクトのみ手動でアノテーションし、中間フレームは線形補間されます。

関連セクション：
- トラックモード

### アノテーション
画像アノテーション用のモードで、`シェイプ`オブジェクトを利用します。

関連セクション：
- シェイプモード

---

## 次元

タスクデータの種類によって異なります。これは
タスク作成時に定義されます。

### 2D

2Dタスクのデータ形式は画像と動画です。
関連セクション：
- アノテーションタスクの作成

### 3D

3Dタスクのデータ形式はポイントクラウドです。
3Dタスクのデータ形式

関連セクション：
- 3Dタスクワークスペース
- 標準3Dモード
- 3Dオブジェクトアノテーション

---

## ステート
ジョブの状態。状態は割り当てられたユーザーが
ジョブ内のメニューで変更できます。
状態は `新規`, `作業中`, `却下`, `完了` のいずれかです。

---

## ステージ
ジョブの段階。タスクページの
ドロップダウンリストで指定します。
段階は `アノテーション`, `検証`, `受け入れ` の3つがあり、この値がタスクの進捗バーに反映されます。

---

## サブセット
プロジェクトにはサブセットを設定できます。サブセットはタスクをグループ化して、データセットの扱いを容易にします。
`テスト`, `トレイン`, `バリデーション` またはカスタムサブセットが指定可能です。

---

## 資格情報
`資格情報`とは `キー＆シークレットキー`, `アカウント名とトークン`, `匿名アクセス`, `キーファイル` を指します。
クラウドストレージの接続に利用されます。

---

## リソース

`リソース`とは `バケット名` または `コンテナ名` を指します。
クラウドストレージの接続に利用されます。

# タスクページ


![](/images/image006_detrac.jpg)

タスクページには要素が含まれており、それぞれが個別のタスクに対応しています。作成順にソートされています。
各要素には、タスク名、プレビュー、進行状況バー、`開く`ボタン、`アクション`メニューが含まれています。
各ボタンは、`アクション`メニュー内の特定の機能を担当します。

- `タスクデータセットのエクスポート` — アノテーション、またはアノテーションと画像を特定のフォーマットでダウンロードします。
  詳細はデータセットのエクスポート／インポートセクションをご覧ください。
- `アノテーションのアップロード` — 特定のフォーマットでアノテーションをアップロードします。
  詳細はデータセットのエクスポート／インポートセクションをご覧ください。
- `自動アノテーション` — OpenVINOツールキットによる自動アノテーション。
  利用可能かどうかはCVATインスタンスの構築方法によります。
- `タスクのバックアップ` — このタスクをzipアーカイブとしてバックアップします。
  詳しくはバックアップセクションをご覧ください。
- `プロジェクトへ移動` — タスクをプロジェクトに移動します（プロジェクトに属していないタスクのみ移動可能です）。
  ラベルの不一致がある場合は、プロジェクトやタスクで必要なラベルを作成または削除できます。
  一部のタスクラベルは、対象プロジェクトのラベルと一致させることができます。
- `削除` — タスクを削除します。

左上には検索バーがあり、担当者名やタスク名などでタスクを検索できます。
右上には[ソート][sorting]、[クイックフィルタ][quick-filters]、およびフィルタがあります。

## フィルタ

> フィルタを適用すると、[クイックフィルタ][quick-filters]が無効になります。

フィルタはアノテーション用フィルタと同様に機能し、
[プロパティ](#supported-properties-for-tasks-list)、[演算子][operators]、値からルールを作成し、[グループ][groups]へまとめることができます。
詳細は[フィルタセクション][create-filter]をご覧ください。
[日付と時刻の選択][data-and-time]についてもご参照ください。

すべてのフィルタをクリアするには`フィルタをクリア`ボタンを押してください。

### タスクリストでサポートされているプロパティ

| プロパティ      | サポートされている値                              | 説明                                      |
| -------------- | -------------------------------------------- | ----------------------------------------- |
| `次元`         | `2D`または`3D`                                 | データフォーマットによる <br>（詳細はアノテーションタスクの作成参照） |
| `ステータス`   | `annotation`、`validation`、または`completed`    |                                           |
| `データ`       | `video`、`images`                              | データフォーマットによる <br>（詳細はアノテーションタスクの作成参照） |
| `サブセット`   | `test`、`train`、`validation`またはカスタムサブセット | [詳細はこちら][subset]                     |
| `担当者`       | ユーザー名                                     | 担当者はプロジェクト、タスク、ジョブを担当するユーザーです。<br>（タスクページで指定） |
| `所有者`       | ユーザー名                                     | プロジェクト、タスク、ジョブの所有ユーザー |
| `最終更新`     | 最終編集日時（または値の範囲）                  | 日付は`dd.MM.yyyy HH:mm`形式で入力するか、<br>入力欄をクリックして表示されるウィンドウで日付を選択可能 |
| `ID`           | ジョブIDの番号または範囲                        |                                           |
| `プロジェクトID`| プロジェクトIDの番号または範囲                  |                                           |
| `名前`         | 名前                                           | タスクページではタスク名、<br>プロジェクトページではプロジェクト名 |
| `プロジェクト名`| プロジェクト名                                 | プロジェクト作成時に指定、<br>（プロジェクトセクションで変更可能） |

---

`開く`ボタンを押すとタスク詳細へ移動します。

[create-filter]: /docs/manual/advanced/filter/#create-a-filter
[operators]: /docs/manual/advanced/filter/#supported-operators-for-properties
[groups]: /docs/manual/advanced/filter/#groups
[data-and-time]: /docs/manual/advanced/filter#date-and-time-selection
[sorting]: /docs/manual/advanced/filter/#sort-by
[quick-filters]: /docs/manual/advanced/filter/#quick-filters

# タスク詳細


タスク詳細は、プレビュー、進捗バー、タスクの詳細（タスク作成時に指定）、およびジョブセクションを含むタスクページです。

![](/images/task-details-1.png)

- このページで利用できるアクションは以下の通りです：
  1. タスクのタイトルを変更する。
  1. `アクション`メニューを開く。
  1. 課題トラッカーを変更するか、指定されていれば課題トラッカーを開く。
  1. ラベルを変更する（タスクがプロジェクトに関連付けられていない場合のみ可能）。
     新しいラベルを追加したり、既存のラベルに属性を追加したりできます（RawモードまたはConstructorモードで）。
     `コピー`をクリックすると、ラベルをクリップボードにコピーします。
  1. 担当者 — タスクを特定の人物に割り当てるために使用します。担当者名を入力し始めるか、
     ドロップダウンリストから適切な人物を選択してください。
     ユーザーリストには、タスクが作成された
     組織
     のユーザーのみが表示されます。

- **ジョブ** — 特定のタスクに関連するすべてのジョブの一覧です。以下の情報が表示されます：
  - ジョブ名（ハイパーリンク付き）。
  - フレーム範囲 — フレームの区間。
  - ジョブのステージ。ステージはドロップダウンリストで指定します。
    ステージは3種類あります：`annotation`、`validation`、`acceptance`。この値はタスクの進捗バーに影響します。
  - ジョブの状態。状態はジョブ内のメニューで担当ユーザーが変更できます。
    状態には、`new`、`in progress`、`rejected`、`completed` などがあります。
  - 所要時間 — ジョブに取り組んでいる時間。
  - 担当者 — ジョブに取り組んでいるユーザー（アノテーターや
    レビュアーまたは修正者）。
    担当者名を入力し始めるか、ドロップダウンリストから適切な人物を選択できます。

  フィルターパネルを使用して、ステータス、担当者、更新日でジョブをフィルタまたはソートできます。

`ジョブ`セクション内のリンクをたどってアノテーション作業を開始してください。
場合によっては複数のリンクが表示されることもあります。これはタスクのサイズや
`オーバーラップサイズ`、`セグメントサイズ`のパラメータによって異なります。
UX向上のため、最初の複数フレームのチャンクのみが読み込まれ、最初の画像からアノテーションを行えます。
他のフレームはバックグラウンドで読み込まれます。

![](/images/task-details-2.png)

# シェイプモード（基本）

使用例：

- 一連の画像に新しいアノテーションを作成する。
- 既存のアノテーションに対してオブジェクトを追加・修正・削除する。

1. コントロールサイドバーで「矩形（Rectangle）」を選択してください。

   ![](/images/image082.jpg)

   作業を始める前に、正しい「ラベル」（タスク作成時に指定したもの）と
   「描画方法」（2点または4点で指定）を選択してください。

   ![](/images/image080.jpg)

1. 「シェイプモード」で新しいアノテーションを作成する場合：

   - 「シェイプ」をクリックして個別の「矩形」を作成します。

     ![](/images/image081.jpg)

   - 対角の2点を選択します。最初の矩形が完成です！

     ![](/images/image011_detrac.jpg)

   - 矩形の作成方法について詳しくは
     こちらをご覧ください。

   - マウスを使って矩形の境界や位置を調整できます。
     矩形のサイズは右上隅に表示され、シェイプのいずれかのポイントをクリックすると確認できます。
     操作を元に戻すには「Ctrl+Z」、やり直すには「Shift+Ctrl+Z」または「Ctrl+Y」を使用できます。

1. 「オブジェクトカード」はオブジェクトサイドバーで表示されるか、オブジェクトを右クリックして開けます。
   詳細セクションで属性を変更できます。
   アクションメニューボタンをクリックすると、基本操作やオブジェクトの削除が可能です。

   ![](/images/image012.jpg)

1. 次の図は、個別のシェイプで完全にアノテーションされたフレームの例です。

   ![](/images/image013_detrac.jpg)

   詳細は シェイプモード（応用） のセクションをご覧ください。
   

# ジョブページ


ジョブページでは、ユーザー（たとえば、ワーカーロールを持つユーザー）が、タスクページへのアクセス権がなくても、自分に割り当てられたジョブを確認したり、進捗を追跡したり、ジョブリストを並べ替えたりフィルターを適用したりできます。

![](/images/image243_detrac.jpg)

ジョブページにはジョブのリストがタイル形式で表示され、各タイルが1つのジョブを表します。
各要素には以下が含まれます：
- ジョブID
- 次元　`2D` または `3D`
- プレビュー
- [ステージ][stage] と [状態][state]
- 要素にカーソルを合わせると表示される情報：
  - サイズ
  - 担当者
- タスク、プロジェクト、バグトラッカーへのナビゲーションメニュー

> ジョブを新しいタブで開くには、`Ctrl` を押しながらジョブをクリックしてください。

左上には検索バーがあり、担当者、ステージ、状態などでジョブを検索できます。
右上には[並べ替え][sorting]、[クイックフィルター][quick-filters]、およびフィルターがあります。

## フィルター

> フィルターを適用すると、[クイックフィルター][quick-filters]は無効になります。

フィルターはアノテーション用フィルターと同様に機能し、
[プロパティ](#supported-properties-for-jobs-list)、[演算子][operators]、値からルールを作成し、
ルールを[グループ][groups]にまとめることができます。詳細は[フィルターのセクション][create-filter]をご覧ください。
[日付と時刻の選択][data-and-time]についても参照してください。

すべてのフィルターをクリアするには「Clear filters」を押してください。
### ジョブリストでサポートされているプロパティ

| プロパティ | サポートされる値 | 説明 |
|-----------|----------------|------|
| `状態` | すべての状態名 | ジョブの状態（ジョブ内のメニューで変更可能） |
| `ステージ` | すべてのステージ名 | ジョブのステージ（タスクページのドロップダウンリストで指定） |
| `次元` | `2D` または `3D` | データ形式による（[アノテーションタスクの作成][create-task]を参照） |
| `担当者` | ユーザー名 | ジョブを担当しているユーザー（タスクページで指定） |
| `最終更新日` | 最終編集日時（または値の範囲） | 日付は `dd.MM.yyyy HH:mm` 形式で入力、または入力フィールドから選択可能 |
| `ID` | ジョブIDまたはその範囲 | |
| `タスクID` | タスクIDまたはその範囲 | |
| `プロジェクトID` | プロジェクトIDまたはその範囲 | |
| `タスク名` | タスク名 | タスク作成時に設定（タスクページで変更可能） |
| `プロジェクト名` | プロジェクト名 | プロジェクト作成時に設定（プロジェクトセクションで変更可能） |
[state]: /docs/manual/basics/vocabulary/#state
[stage]: /docs/manual/basics/vocabulary/#stage
[create-task]: /docs/manual/basics/create_an_annotation_task
[create-filter]: /docs/manual/advanced/filter/#create-a-filter
[operators]: /docs/manual/advanced/filter/#supported-operators-for-properties
[groups]: /docs/manual/advanced/filter/#groups
[data-and-time]: /docs/manual/advanced/filter#date-and-time-selection
[sorting]: /docs/manual/advanced/filter/#sort-by
[quick-filters]: /docs/manual/advanced/filter/#quick-filters

# 属性アノテーションモード（基本）

- このモードでは、キーボードを使ってオブジェクトやフレーム間を素早く移動しながら属性を編集できます。
  上部パネルのドロップダウンリストを開き、「属性アノテーションモード」を選択してください。

  ![](/images/image023_affectnet.jpg)

- このモードでは、オブジェクトパネルが専用パネルに変わります：

  ![](/images/image026.jpg)

- アクティブな属性は赤色で表示されます。この例では`gender`（性別）です。画面下部のサイドパネルに、属性を変更するためのすべてのショートカットが表示されます。
  キーボードで `2` キーを押すと、その属性に値（女性）が割り当てられます。または、ドロップダウンリストから選択することもできます。

  ![](/images/image024_affectnet.jpg)

- キーボードの `↑` / `↓` キーを押すか、UI のボタンをクリックして、次/前の属性に移動します。この場合、`↓` キーを押すと `Age`（年齢）属性の編集が可能になります。

  ![](/images/image025_affectnet.jpg)

- `→` / `←` キーを使うと、アノテーション付きの前/次の画像に移動できます。

属性アノテーションモードで利用可能なすべてのホットキーを見るには、`F2` キーを押してください。
詳細は
属性アノテーションモード（応用）
のセクションをご覧ください。

# 標準3Dモード（基本）


`標準3Dモード` - 3Dデータで動作するように設計されています。
タスク作成時にPCDまたはKitty BIN形式のデータを追加すると、このモードが自動的に利用可能になります。
詳しく読む

投影図のサイズを調整することができます。調整するには、投影図間の境界をドラッグしてください。

![](/images/image215_carla_town3.jpg)

# クラウドストレージページ


![](/images/image227.jpg)

クラウドストレージページには、各クラウドストレージに対応する要素が含まれています。
各要素には、プレビュー、クラウドストレージ名、プロバイダー、作成・更新情報、ステータス、
説明を表示するための `?` ボタン、アクションメニューが含まれています。

アクションメニュー内の各ボタンは、特定の機能を担当しています：
- `アップデート` — このクラウドストレージを更新します
- `削除` — クラウドストレージを削除します

![](/images/cloud_storage_icon.jpg)

ストレージが空である場合や無効な認証情報が使用された場合など、
実際のプレビューを取得できない場合はこのプレビューが表示されます。

左上には検索バーがあり、
表示名やプロバイダーなどでクラウドストレージを検索できます。
右上には[並べ替え][sorting]、[クイックフィルター][quick-filters]、およびフィルターがあります。

## フィルター

> フィルターを適用すると[クイックフィルター][quick-filters]は無効になります。

フィルターはアノテーション用のフィルターと同様に機能し、
[プロパティ](#supported-properties-for-jobs-list)、[演算子][operators]、値からルールを作成し、ルールを[グループ][groups]化できます。
詳細については[フィルターセクション][create-filter]を参照してください。
[日付と時刻の選択][data-and-time]について詳しくはこちらをご覧ください。

すべてのフィルターをクリアするには `フィルターをクリア` を押してください。

### クラウドストレージ一覧でサポートされているプロパティ

| プロパティ         | サポートされる値                                  | 説明                                         |
| ------------------ | -------------------------------------------- | ------------------------------------------- |
| `ID`               | タスクIDの数値または範囲                      |                                             |
| `プロバイダータイプ` | `AWS S3`、`Azure`、`Google cloud`                |                                             |
| `認証情報タイプ`    | `キー＆シークレットキー`、`アカウント名とトークン`、<br> `匿名アクセス`、`キーファイル` |   |
| `リソース名`        |                                               | `バケット名`または`コンテナ名`               |
| `表示名`           |                                               | クラウドストレージ作成時に設定               |
| `説明`             |                                               | クラウドストレージの説明                     |
| `所有者`           | ユーザー名                                    | プロジェクト、タスク、またはジョブの所有ユーザー|
| `最終更新`         | 最終更新日時（または値の範囲）                 | 日付は `dd.MM.yyyy HH:mm` 形式で入力するか、<br>入力フィールドをクリックして表示されるウィンドウで日付を選択できます |

`+` ボタンをクリックして新しいクラウドストレージを追加します。

[create-filter]: /docs/manual/advanced/filter/#create-a-filter
[operators]: /docs/manual/advanced/filter/#supported-operators-for-properties
[groups]: /docs/manual/advanced/filter/#groups
[data-and-time]: /docs/manual/advanced/filter#date-and-time-selection
[sorting]: /docs/manual/advanced/filter/#sort-by
[quick-filters]: /docs/manual/advanced/filter/#quick-filters

# トラックモード（基本）

使用例：

- フレームの連続に対して新しいアノテーションを作成する。
- 既存のアノテーションに対してオブジェクトの追加・修正・削除を行う。
- トラックを編集し、複数の矩形を1つのトラックに統合する。

1. `シェイプモード`と同様に、サイドバーで`矩形（Rectangle）`を選択し、
   表示されるフォームで希望する`ラベル`と`描画方法`を選択します。

   ![](/images/image083.jpg)

1. オブジェクトのトラック作成（例として選択された車を参照）：

   - `トラックモード`で`トラック`をクリックして`矩形（Rectangle）`を作成します。

     ![](/images/image014.jpg)

   - `トラックモード`では、矩形が次のフレームにも自動的に補間されます。
   - サイクリストがフレーム#2270で動き始めます。このフレームをキーフレームとしてマークしましょう。
     そのためには`K`キーを押すか、`星`ボタンをクリックします（下記スクリーンショット参照）。

     ![](/images/image016.jpg)

   - オブジェクトの位置が変わり始めたら、そのタイミングで矩形を修正する必要があります。
     毎フレームで矩形を変更する必要はなく、いくつかのキーフレームのみ更新すれば
     その間のフレームは自動的に補間されます。
   - ここでは30フレーム進んでオブジェクトの境界を調整してみましょう。例は以下の通りです：

     ![](/images/image017_detrac.jpg)

   - その後、フレーム2270から2300の間でオブジェクトの矩形が自動的に変化します：

     ![](/images/gif019_detrac.gif)

1. アノテーションしたオブジェクトが消えたり、非常に小さくなった場合は
   トラックを終了させる必要があります。`Outside Property`を選択し、ショートカットは`O`です。

   ![](/images/image019.jpg)

1. オブジェクトが数フレームで見えなくなり、その後再び現れる場合は、
   `マージ（Merge）`機能を使って複数の個別トラックを
   1つに統合できます。

   ![](/images/image020.jpg)

   - サイクリストが見えているタイミングごとにトラックを作成します：

     ![](/images/gif001_detrac.gif)

   - `マージ`ボタンをクリックするか`M`キーを押して、最初のトラックの任意の矩形と
     次のトラックの任意の矩形をクリックし、以降も同様に選択します：

     ![](/images/image162_detrac.jpg)

   - `マージ`ボタンをクリックするか`M`キーを押して変更を適用します。

     ![](/images/image020.jpg)

   - `補間（Interpolation）`モードでの最終的なアノテーション済みフレームシーケンスは
     下記クリップのようになります：

     ![](/images/gif003_detrac.gif)

     詳細はトラックモード（応用）のセクションをご覧ください。
     

# 品質管理


CVATには、アノテーションの自動品質管理のための以下の機能があります：
- [タスクのバリデーションセットの設定](#how-to-enable-quality-control)
- ジョブ終了時のジョブ検証（「即時フィードバック」）
- [発見された問題のレビュー モード](#how-to-review-problems-found)
- [品質分析](#how-to-check-task-quality-metrics)

このセクションでは、品質評価における主要なステップのみを紹介します。
CVATでの品質評価の詳細ガイドについては、
上級セクション をご覧ください。

## 品質管理を有効にする方法

新しいタスクの場合

1. タスク作成画面に移動する
2. ソースメディアを選択し、他のタスクパラメータを設定する
3. 下にスクロールして**品質管理**セクションを表示する
4. 利用可能な
バリデーションモード
のいずれかを選択する

  ![バリデーションモード付きタスク作成](/images/honeypot09.jpg)

5. タスクを作成する
6. タスク内のGround TruthジョブにGround Truthアノテーションをアップロードまたは作成する
7. Ground Truthジョブを`acceptance`ステージおよび`completed`状態に切り替える

  ![ジョブステータス設定](/images/honeypot10.jpg)

既存のタスクの場合

> 既存のタスクではGround Truthバリデーションモードのみ利用可能です。  
> Honeypotを使用したい場合は、タスクを再作成する必要があります。

1. タスクページを開く
2. ジョブリスト横の`+`ボタンをクリックする

  ![ジョブ作成](/images/honeypot01.jpg)

3. ジョブタイプで**Ground truth**を選択し、ジョブパラメータを設定する

  ![ジョブパラメータ設定](/images/honeypot02.jpg)

4. タスク内のGround TruthジョブにGround Truthアノテーションをアップロードまたは作成する
5. Ground Truthジョブを`acceptance`ステージおよび`completed`状態に切り替える

  ![ジョブステータス設定](/images/honeypot10.jpg)


## 即時ジョブフィードバックを有効にする方法

> **注記**: この機能には、タスク内でバリデーションセットの設定が必要です。  
> 詳細は[品質管理を有効にする方法](#how-to-enable-quality-control)および
> 完全ガイドを参照してください。

1. タスクの**アクション**メニュー > **品質管理** > **設定**を開く
2. **ジョブごとの最大バリデーション回数**を0より大きい値に設定する（3が推奨値）

  ![ジョブバリデーション設定](/images/immediate-feedback-quality-settings.png)

3. 設定を保存する
4. アノテーションジョブにアノテーターを割り当てる
5. ジョブをアノテーションする
6. メニューの該当ボタンでジョブを完了にする
7. ジョブ完了後、ジョブバリデーションダイアログが表示される

  <img src="/images/immediate-feedback-accept.png" style="max-width: 500px;">

各担当者は、指定された回数を超えてバリデーションを受けることはありません。

この機能の詳細については
即時フィードバック セクションをご覧ください。

## タスクの品質指標を確認する方法

1. タスクの**アクション**メニュー > **品質管理**を開く
2. （任意）品質指標の計算をリクエストし、完了を待つ
3. サマリーまたは詳細レポートを確認する

  ![品質分析ページ](/images/honeypot05.png)

この機能の詳細については
こちらをご覧ください。

## 発見された問題をレビューする方法

1. タスクの**アクション**メニュー > **品質管理**を開く
2. レビュー対象のアノテーションジョブを探し、そのジョブに最低1つのバリデーションフレームがあることを確認する
3. ジョブリンクをクリックする
4. **レビュー**モードに切り替える
5. Ground Truthアノテーションとコンフリクトの表示を有効にする

  ![GTコンフリクト](/images/honeypot06.gif)

この機能の詳細については
こちらをご覧ください。

# 登録とアカウントアクセス


CVAT.ai でアノテーションを開始するには、
アカウントを作成するか、既存のアカウントにログインする必要があります。

参照:

- [ユーザー登録](#user-registration)
- [ソーシャルアカウントによるユーザー登録](#user-registration-with-social-accounts)
- [アカウントアクセス](#account-access)
- [パスワードリセット](#password-reset)
- [パスワードの変更](#change-password)

アカウント作成またはログインを行うには、[CVAT.ai Cloud](https://app.cvat.ai/) のログインページにアクセスしてください。

![](/images/image001.jpg)

> **注:** デフォルトでは、GoogleとGitHubによる認証および登録は
> [CVAT.ai Cloud](https://app.cvat.ai/) のみで利用可能です。
> <br>ローカルインストールでGoogleやGitHub認証を利用したい場合は、
> ソーシャル認証の設定 を参照してください。

## ユーザー登録

登録するには、以下の手順を行ってください。

1. **アカウントの作成** をクリックします。

   ![アカウント作成](/images/image002.jpg)

2. すべての空欄を記入し、利用規約に同意して
   **アカウントの作成** をクリックします。

![アカウントフォーム](/images/image003.jpg)

<br>ユーザー名はメールアドレスから自動的に生成されます。必要に応じて編集可能です。

![ユーザー名生成](/images/filling_email.gif)

## ソーシャルアカウントによるユーザー登録

Google または GitHub で登録するには、
サービス名のボタンをクリックし、
画面の指示に従ってください。

## アカウントアクセス

アカウントにアクセスするには、以下の手順を行ってください。

1. ログインページにアクセスします。
2. ユーザー名またはメールアドレスを入力します。パスワード欄が表示されます。
3. パスワードを入力し、**次へ** をクリックします。

Google または GitHub でログインする場合は、サービス名のボタンをクリックしてください。

## パスワードリセット

パスワードをリセットするには、以下の手順を行ってください。

1. [CVAT.ai Cloud](https://app.cvat.ai/) ページで
   **パスワードをお忘れですか？** をクリックします。

   ![パスワードリセット](/images/reset-password.jpg)

2. 登録時に使用したメールアドレスを入力し、**送信** をクリックします。
3. メールを開き、CVATからのリンクをクリックします。
4. 両方の欄に新しいパスワードを入力し、**パスワードの変更** をクリックします。

   ![パスワードリセット](/images/reset-password-01.jpg)

## パスワードの変更

パスワードを変更するには、以下の手順を行ってください。

1. CVATアカウントにログインします。
2. 右上のニックネーム横の矢印をクリックします。
3. 「パスワードの変更」を選択します。
4. 画面の指示に従ってください。

   ![パスワード変更](/images/change_password.jpg)

# 基本

# リクエストページ


リクエストページでは、アノテーションのエクスポートやデータセットのインポートなど、データ処理ジョブのステータスを追跡できます。ユーザーは進捗状況の確認、結果のダウンロード、エラーの確認が可能です。

![リクエストページ](/images/requests_page.png)

## リクエスト一覧

リクエストページでは、リクエストがカード形式で表示されます。各カードには以下の詳細（該当する場合）が含まれます：
- **操作名**
- **リソースリンク**
- **リクエストのステータス**
- **タイムスタンプ**:
  - **キュー日時**
  - **開始日時**
  - **終了日時**
  - **結果の有効期限**
- **アノテーション形式**
- **メニュー**（`キュー待ち`状態のジョブの結果ダウンロードまたはキャンセル）

> 現在サポートされている操作には、タスクの作成、アノテーションやデータセットのインポート/エクスポート、バックアップが含まれます。

## リクエスト一覧のステータス

各リクエストの状態を示すために、以下のステータスが使用されます：

| ステータス        | 説明                                                                 |
| --------------| ------------------------------------------------------------------- |
| `進行中`        | リクエストされたジョブが実行中です。進捗率が表示されます。          |
| `キュー待ち`      | リクエストされたジョブがワーカーによる処理待ちです。                |
| `完了`          | リクエストされたジョブが完了しました。結果のダウンロードが可能です。  |
| `失敗`          | 予期しないエラーによりジョブの実行ができません。エラー内容が表示されます。 |

# 形状の種類

画像にアノテーションを付ける際に使用できる形状はいくつかあります。

- `矩形` または `バウンディングボックス`
- `ポリゴン`
- `ポリライン`
- `ポイント`
- `楕円`
- `キューボイド`
- `3Dタスクでのキューボイド`
- `スケルトン`
- `タグ`

それぞれの見た目は以下の通りです。

![](/images/image038_detrac.jpg '矩形') ![](/images/image033_detrac.jpg 'ポリゴン')

![](/images/image009_mapillary_vistas.jpg 'ポリライン') ![](/images/image010_affectnet.jpg 'ポイント')

![](/images/image240_mapillary_vistas.jpg '楕円') ![](/images/image015_detrac.jpg 'キューボイド')

![](/images/image218_carla_town3.jpg '3Dタスクでのキューボイド') ![](/images/image_skeleton_sample.jpg 'スケルトン')

![](/images/image135.jpg 'タグ')

`タグ` はワークスペース上に形状は表示されませんが、オブジェクトサイドバーに表示されます。

# CVATワークスペース


CVATにおけるワークスペースは、
アノテーターが画像や動画、そして
高品質なアノテーションを作成するための
さまざまなツールとやり取りする作業エリアです。

![画像品質パネル](/images/workspace.png)

参照：

- [CVATでの画像設定](#image-settings-in-cvat)
  - [CVATで画像にグリッドを重ねる](#adding-grid-overlay-to-image-in-cvat)
  - [CVATで画像の色設定を変更する](#changing-color-settings-of-image-in-cvat)
- [レイヤーとZ軸スライダーの追加](#adding-layers-and-z-axis-slider)
- [オブジェクトとのインタラクション](#interacting-with-objects)

## CVATでの画像設定

**画像設定**パネルは、
画像の視覚的な側面を細かく調整するための
多用途なツールです。
画像を明るくしたい場合や、
コントラストを上げたい場合など、
このパネルが役立ちます。

さらに、このパネルを使えば
より正確なアノテーションのために
画像上にグリッドを重ねることもできます。

> **注意**: 画像設定を調整しても
> 画像の表示方法のみが変わります。
> 画像データ自体が変更・加工されることはありません。

デフォルトでは**画像設定**パネルは表示されていません。
表示するには、ワークスペース下部にある
**上矢印** (![Image Grid Icon](/images/image-grid-icon.jpg))
アイコンをクリックしてください。

![画像品質パネル](/images/image-quality-panel.jpg)

### CVATで画像にグリッドを重ねる

画像にグリッドを追加するには、以下の手順を行います。

1. **画像設定**パネルを開きます。
2. 画像にグリッドを重ねるための
   チェックボックスを見つけてオンにします。
3. **サイズ**欄に希望する数値を入力し、
   グリッドセルの大きさ（平方ミリメートル単位）を指定します。
4. **色**のドロップダウンリストから、
   グリッドの色を選択します。
5. 不透明度スライダーを使って、
   グリッドオーバーレイの透明度を変更します。

### CVATで画像の色設定を変更する

CVATで画像の色設定を変更するには、次の手順を行います。

1. **画像設定**パネルを開きます。
2. スライダーを使って色の品質を調整します。

CVATでは4つの色の品質設定があります。

**明るさ**は、
画像全体の明るさを増減します。

![画像の明るさ](/images/image-settings-brightness.png)

**コントラスト**は、
画像の最も明るい部分から最も暗い部分までの
明暗の幅を指します。

![画像のコントラスト](/images/image-settings-contrast.png)

**彩度**は色の鮮やかさを表します。

![画像の彩度](/images/image-settings-saturation.png)

**ガンマ**補正を使うと
画像全体の明るさを調整できます。

![ガンマ補正](/images/image-settings-gamma.jpg)

設定をデフォルト値にリセットするには、
**色設定をリセット**をクリックしてください。

## レイヤーとZ軸スライダーの追加

**Z軸スライダー**を使うと、
アノテーションレイヤーを追加し、
さらに奥にあるレイヤーを非表示にできます。

スライダーを動かすことで
必要なレイヤー間を移動できます。

フレーム内に複数のZレイヤーがある場合、
このスライダーが有効になります。
スライダー上の**+**をクリックすると新しいレイヤーが追加され、
押した時点で自動的に新しいレイヤーが作成・アクティブ化されます。

**+** や **-** キーで
オブジェクトをレイヤー間で移動させることもできます。

![Zオーダースライダー](/images/image140.jpg)

## オブジェクトとのインタラクション

ワークスペースには以下の機能も備わっています。

- オブジェクトを右クリックするとオブジェクトカードが開きます。
  ここではオブジェクトのラベルや属性の変更など
  主要な操作やアクションメニューへアクセスできます。

  ![オブジェクトカード](/images/image138_mapillary_vistas.jpg)

- ポリゴンの頂点を右クリックするとメニューが開き、
  **頂点の削除**や**開始点の設定**が行えます。

  ![ポリゴンメニュー](/images/image139_mapillary_vistas.jpg)

# オブジェクトサイドバー
  

オブジェクトサイドバーでは、現在のフレームで利用可能なオブジェクトの一覧を確認できます。以下の図は、一覧の一例です。

| シェイプモード               | トラックモード               |
| ------------------------- | ------------------------- |
| ![](/images/image044.jpg) | ![](/images/image045.jpg) |

## オブジェクトのプロパティ

**フィルター**入力ボックス

![](/images/image059.jpg)

フィルターの使い方については、上級ガイドこちらで説明しています。

**オブジェクト一覧**

![](/images/image147.jpg)

- すべてのロックプロパティを切り替え - フレーム内のすべてのオブジェクトのロックプロパティを切り替えます。
- すべての非表示プロパティを切り替え - フレーム内のすべてのオブジェクトの非表示プロパティを切り替えます。
- すべて展開/折りたたみ - フレーム内のすべてのオブジェクトの詳細フィールドを展開または折りたたみます。
- ソート - オブジェクト一覧の並び替え：更新日時、ID昇順、ID降順

---

サイドバーの**オブジェクト**

シェイプの種類は**ラベル**プロパティを選択することで変更できます。
例えば、以下の図のようになります。

![](/images/image050.jpg)

**オブジェクトアクションメニュー**

アクションメニューはボタンを呼び出します。

![](/images/image047.jpg)

アクションメニューには以下が含まれます：

- **オブジェクトURLを作成** - オブジェクトへのリンクをクリップボードにコピーします。
  このリンクを開くと、そのオブジェクトがフィルタリングされます。
- **コピーを作成** - オブジェクトをコピーします。キーボードショートカットは**Ctrl** + **C** > **Ctrl** + **V**です。
- **伝播**機能は、フォームを複数のフレームにコピーし、
  コピー数やコピー先フレームを指定するダイアログを表示します。
  キーボードショートカットは**Ctrl** + **B**です。フィルタされたシェイプのみを伝播する方法については[シェイプコンバーター](/docs/enterprise/shapes-converter/)を参照してください。<br>以下の２つのオプションがあります：

  - **前方に伝播** (![Fw propagate](/images/propagate_fw.png)) は、`N`個の_後続_フレームに同じ位置でオブジェクトのコピーを作成します。
  - **後方に伝播** (![Back propagate](/images/propagate_back.png)) は、`N`個の_前の_フレームに同じ位置でオブジェクトのコピーを作成します。

  ![](/images/image053.jpg)

- **背景へ移動** - オブジェクトを背景に移動します。ショートカットは**-**または**_**
- **前景へ移動** - オブジェクトを前景に移動します。ショートカットは**+**または**=**
- **インスタンスカラーの変更**- カラーピッカーで色を選択します（インスタンスモードのみ利用可能）。

  ![](/images/image153.jpg)

- **削除** - オブジェクトを削除します。ショートカットは**Del**、**Shift+Del**。

シェイプをロックして、誤って変更や移動されないようにすることができます。ロックのショートカットは**L**です。

![](/images/image046.jpg)

シェイプは**オクルード**状態にできます。ショートカット：**Q**。この場合、境界線が点線になります。

![](/images/image048.jpg)

![](/images/image049_detrac.jpg)

オブジェクトの表示・非表示をフレーム上で切り替えることができます。

![](/images/image055.jpg)

**ピン留めプロパティの切り替え** - 有効にすると、シェイプはドラッグ＆ドロップで移動できなくなります。

![](/images/image052.jpg)

**トラッカースイッチャー** - オブジェクトのトラッキングを有効/無効にします。

![](/images/tracker_switcher.jpg)

**詳細**ボタンをクリックすると、オブジェクトのすべての属性が表示されているフィールドを展開または折りたたみできます。

![](/images/image154.jpg)

---

## ラベル

このタブでは、特定のラベルのオブジェクトをロックまたは非表示にできます。
特定のラベルの色を変更するには、タスクページに移動して編集ボタンをクリックし、
色を選択してください。これにより、タスク内のすべてのジョブでラベルの色が変更されます。

![](/images/image062.jpg)

**高速ラベル変更**

ホットキーを使ってオブジェクトのラベルを変更できます。
そのためには、0から9までの数字をラベルに割り当てる必要があります。
デフォルトでは、1,2...0が最初の10個のラベルに割り当てられています。
数字を割り当てるには、サイドバーのラベル名の右側にあるボタンをクリックします。

![](/images/image210.jpg)

その後、マウスカーソルをオブジェクトに合わせて**Ctrl** + **Num(0..9)**を押すことで、
該当するラベルをオブジェクトに割り当てることができます。

オブジェクトにカーソルを合わせずに**Ctrl** + **Num(0..9)**を押すと、選択したラベルがデフォルトとして設定され、
次に作成するオブジェクト（`N`キー使用）は自動的にそのラベルが割り当てられます。

![](/images/image211.jpg)

---

## 表示

**Color By** オプション

アノテーションの配色を変更します：

- `インスタンス` — 各シェイプにランダムな色が割り当てられます

  ![](/images/image095_detrac.jpg)

- `グループ` — 各グループごとにランダムな色、グループ未設定のシェイプは白

  ![](/images/image094_detrac.jpg)

- `ラベル` — 各ラベル（例：車、人）ごとにランダムな色

  ![](/images/image093_detrac.jpg)

  必要なボックスやオブジェクトサイドバー上で任意のランダム色を変更できます。

**塗りの不透明度**スライダー

アノテーション内の各シェイプの不透明度を変更します。

![](/images/image086_detrac.jpg)

**選択中塗りの不透明度**スライダー

選択中オブジェクトの塗りの不透明度を変更します。
矩形、ポリゴン、キューボイドの場合、描画中にも変更可能です。

![](/images/image089_detrac.jpg)

**アウトライン境界線**チェックボックス

**スポイト**アイコンをクリックして、特別なシェイプの境界線色を変更できます。

![](/images/image088_detrac.jpg)

**ビットマップ表示**チェックボックス

有効にすると、すべてのシェイプが白で表示され、背景が黒になります。

![](/images/image087_detrac.jpg)

**投影表示**チェックボックス

補助的なパースラインの表示を有効/無効にします。キューボイドのみ対応。

![](/images/image090_detrac.jpg)

## オブジェクトサイドバーの非表示

**非表示** - このボタンでオブジェクトサイドバーを隠します。

![](/images/image146.jpg)

# コントロールサイドバー


## ナビゲーション

**ナビゲーションブロック** - 画像の移動や回転のためのツールが含まれています。
|アイコン |説明 |
|-- |-- |
|![](/images/image148.jpg)|`カーソル`（`Esc`）- 基本的なアノテーション編集ツール。|
|![](/images/image149.jpg)|`画像の移動` - 編集せずに画像内を移動するためのツール。|
|![](/images/image102.jpg)|`回転` - 現在のフレームを時計回り（`Ctrl+R`）と反時計回り（`Ctrl+Shift+R`）で回転する2つのボタン。<br/>設定で`すべての画像を回転`を有効にすると、ジョブ内のすべての画像を回転できます。|

---

## ズーム

**ズームブロック** - 画像のズームツールが含まれています。
|アイコン |説明 |
|-- |-- |
|![](/images/image151.jpg)|`画像をフィット` - ワークスペースのサイズに画像を合わせます。<br/>ショートカット：画像をダブルクリック|
|![](/images/image166.jpg)|`関心領域の選択` - 選択した領域にズームインします。<br/>このツールを使用して、フレームの特定部分に素早くズームインできます。|

---

## シェイプ

**シェイプブロック** - シェイプ作成用のすべてのツールが含まれています。
|アイコン |説明 |セクションへのリンク |
|-- |-- |-- |
|![](/images/image189.jpg)|`AIツール`|AIツール|
|![](/images/image201.jpg)|`OpenCV`|OpenCV|
|![](/images/image167.jpg)|`矩形`|シェイプモード; トラックモード;<br/> 4点による描画|
|![](/images/image168.jpg)|`ポリゴン`|ポリゴンによるアノテーション; ポリゴントラックモード|
|![](/images/image169.jpg)|`ポリライン`|ポリラインによるアノテーション|
|![](/images/image170.jpg)|`ポイント`|ポイントによるアノテーション|
|![](/images/image241.jpg)|`楕円`|楕円によるアノテーション|
|![](/images/image176.jpg)|`キューボイド`|キューボイドによるアノテーション|
|![](/images/brushing_tools_icon.png)|`ブラッシングツール`|ブラッシングによるアノテーション|
|![](/images/image171.jpg)|`タグ`|タグによるアノテーション|
|![](/images/image195.jpg)|`課題を作成`|レビュー（レビュー モードでのみ利用可能）|

---

## 編集

**編集ブロック** - トラックやシェイプの編集ツールが含まれています。
|アイコン |説明 |セクションへのリンク |
|-- |-- |-- |
|![](/images/image172.jpg)|`シェイプの統合`（`M`）- シェイプ統合モードの開始/終了。|トラックモード（基本）|
|![](/images/image173.jpg)|`シェイプのグループ化`（`G`）- シェイプグループ化モードの開始/終了。|シェイプのグループ化|
|![](/images/image174.jpg)|`分割` - トラックを分割します。 |トラックモード（詳細）|
|![](/images/image174.jpg)|`分割` - トラックを分割します。 |トラックモード（詳細）|
|![](/images/join-masks-icon.jpg)|複数のラベルを1つに結合します |**マスク結合ツール**|
|![](/images/slicing-tool-icon.jpg)|1つのラベルを複数に分割します。|**マスク/ポリゴン分割**|

---

## 画像の移動

ユーザーインターフェースモードの切り替え。

![](/images/image145.jpg)

1. 下の矢印を使って次/前のフレームに移動します。
   スクロールバーのスライダーを使ってフレームをスクロールします。
   ほとんどのボタンにショートカットキーがあります。
   ショートカットのヒントが欲しい場合は、UI要素の上にマウスポインタを置いてください。

1. 画像をナビゲートするには、コントロールサイドバーのボタンを使用してください。
   もう一つの方法として、アノテートされていない領域内で左クリックを押しながら画像を移動/シフトできます。
   `マウスホイール`が押されている場合は、すべてのアノテートオブジェクトが無視されます。それ以外の場合は、
   ハイライトされたバウンディングボックスが画像の代わりに移動されます。

   ![](/images/image136.jpg)

1. サイドバーコントロールのボタンを使用して、関心領域にズームできます。
   `画像をフィット`ボタンを使用して、画像をワークスペースに合わせてください。
   また、マウスホイールでも画像を拡大縮小できます
   （画像は現在のカーソル位置を基準にズームされます）。

   ![](/images/image137.jpg)

# ナビゲーションバーとメニュー


ナビゲーションパネルとドロップダウンの**メニュー**を使って、
フレームの切り替え、アノテーションモードの変更、作業内容の保存などが行えます。

![CVAT Navbar](/images/image035.png)

参照：

- [メニュー](#menu)
- [ナビゲーションバー](#navigation-bar)
  - [保存、元に戻す、完了](#save-undo-done)
  - [ナビゲーションコントロール](#navigation-controls)
- [ジョブ情報とアノテーションモード切替](#job-information-and-annotation-mode-switcher)

## メニュー

**メニュー**オプションを使って、アノテーションのアップロードやダウンロード、ジョブの状態変更、
その他の機能にアクセスできます。下表をご覧ください。

<!--lint disable maximum-line-length-->

| パネル項目                              | 説明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| -------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **アノテーションをアップロード**        | タスクにアノテーションをアップロードします。                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **データセットとしてエクスポート**        | データセットを対応フォーマットのいずれかでダウンロードします。                                                                                                                                                                                                                                                                                                                                                                                            |
| **アノテーションを削除**                | 現在のジョブの全アノテーションを削除します。<br>**範囲選択**を使用して特定のフレーム範囲のアノテーションを削除できます。<br>**トラックのキーフレームのみ削除**チェックボックスを有効にすると、選択範囲内のトラックからキーフレームのみを削除します。<br><br><center>![](/images/image229.png)</center>                                                                                                                                                                                  |
| **アクションを実行**                     | アノテーション済みデータセットでアノテーションアクションを実行します。[アノテーションアクション](/docs/enterprise/shapes-converter/)は、多数のフレームに対しアノテーションを一括変更できる機能です。`shape`オブジェクトのみ対応しています。                                                                                                                                                                                                                                                                       |
| **タスクを開く**                        | タスクの詳細ページを開きます。                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **ジョブの状態を変更**                   | ジョブの状態を変更します：<br><ul><li>**新規**：ジョブが新規作成され、作業が開始されていません。アノテーション作業開始待ち。</li><li>**作業中**：現在作業中。アノテーションが追加または編集されています。</li><li>**差し戻し**：レビューで不十分・不正確と判断され、修正が必要です。</li><li>**完了**：作業が終了し、レビュー・承認済み。追加作業は不要です。</li></ul>  |
| **ジョブを完了** | アノテーションを保存し、**ジョブの状態**を**完了**に設定します。 |

<!--lint enable maximum-line-length-->

## ナビゲーションバー

ナビゲーションバーを使ってアノテーション結果の保存、フレーム切り替え、
その他の機能にアクセスできます。詳細は下表をご覧ください。

<!--lint disable maximum-line-length-->

### 保存、元に戻す、完了

次のボタンで作業の保存、変更の取り消し、タスクの完了を実行できます。

| 機能                                            | 説明                                                                                                                                                                                                                                                                                                 |
| --------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **作業を保存**<br><br>![](/images/image141.jpg)      | 現在のジョブのアノテーションを保存します。ボタンは保存処理中を示します。                                                                                                                                                                                                                             |
| **元に戻す／やり直す**<br><br>![](/images/image061.jpg)  | ボタンで操作を取り消したりやり直したりできます。                                                                                                                                                                                                                                                                   |
| **完了**<br><br>![](/images/image223.jpg)           | オブジェクト作成を完了する際に使用します。このボタンはオブジェクト作成時のみ表示されます。                                                                                                                                                                                                     |
| **ブロック**<br><br>![](/images/image226.jpg)          | OpenCVインテリジェントシザーズでポリゴン描画中に自動線生成を一時停止します。また、AIツールでオブジェクト作成時のサーバーリクエストを遅延させる際にも使用します。  |

### ナビゲーションコントロール

インターフェース内でフレームを移動する方法の概要です。詳細は下表をご覧ください。

![Navigation Controls](/images/navigation_controls.png)

| 機能 | 説明 |
| ------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **最初／最後のフレームへ**<br><br> ![First last frame controls](/images/image036.jpg) | シーケンスの最初または最後のフレームへ移動します。 |
| **ステップで戻る／進む**<br><br>![Go to a step controls](/images/image037.jpg) | あらかじめ設定されたステップ数だけ前後のフレームへ移動します。<br><br>ショートカット：<br><li>**C** — 前のフレーム <li>**V** — 次のフレーム <br><br>デフォルトのステップサイズは`10`フレームです。変更するには、**ニックネーム** > **設定** > **プレイヤーステップ**へ。 |
| **戻る／進む**<br><br>![Go back and go forth controls](/images/go_back_next.png) | 隣接するフレームへ移動します。<br><br>ショートカット：<br><li> **D** — 前のフレーム <li>**F** — 次のフレーム<br><br>**戻る／進む**ボタンはカスタマイズ可能：<br><br>![](/images/go_back_custom.png)<br><br>カスタマイズするには、ボタンを右クリックして3つのオプションから選択します（左から右へ）：<ol><li>デフォルト設定：1フレームずつ移動</li><li>オブジェクトが含まれるフレームのみ移動（例：フィルタ適用済み）。詳細は[フィルター](/docs/manual/advanced/filter)参照。</li><li>アノテーションがないフレームへ移動。未作業フレームをすばやく探せます。</li></ol>。 |
| **再生／一時停止**<br><br>![Play and pause](/images/image041.jpg) | フレームや画像セットの再生・一時停止を切り替えます。<br>ショートカット：**Space**<br>再生速度を調整するには、**ニックネーム** > **設定** > **プレイヤースピード**へ。 |
| **特定のフレームへ移動**<br><br>![Go to the specific frame](/images/image060.jpg) | 移動したいフレーム番号を入力し、**Enter**を押します。 |
| **フレーム名をコピー**<br><br>![Copy frame name](/images/navigation_icons_copy_filename.png) | クリックしてフレーム名をクリップボードにコピーします。 |
| **フレームリンクをコピー**<br><br>![Delete frame](/images/navigation_icons_copy_link.png) | クリックしてそのフレームへのリンクをコピーします。 |
| **フレームを削除**<br><br>![Delete frame](/images/navigation_icons_delete_frame.png) | クリックして現在のフレームを削除または復元します。 |

## ジョブ情報とアノテーションモード切替

このセクションでは、フルスクリーンプレイヤーモードへの切り替え、ジョブ情報へのアクセス、
ワークスペーススイッチャーを使った異なるアノテーション／QAモードの切り替えについて説明します。

| 機能                                                  | 説明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| --------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **フルスクリーン**<br><br>![Fullscreen](/images/image143.jpg) | フルスクリーンプレイヤーモード。キーボードショートカットは**F11**です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **情報**<br><br>![Info](/images/image143_2.png)           | ジョブ情報を開きます。<br><br>![](/images/image144_detrac.png)<br><br>概要：<ul><li>**担当者** - ジョブを割り当てられたユーザー</li> <li>**レビュー担当**– レビューを行うユーザー。詳細は[**マニュアルQA**](/docs/manual/advanced/analytics-and-monitoring/manual-qa")参照。</li><li>**開始フレーム** - このジョブの最初のフレーム番号</li><li>**終了フレーム** - このジョブの最後のフレーム番号</li><li>**フレーム数** - ジョブ内の総フレーム数</li></ul><br>**アノテーション統計**テーブルでは、ラベル（例：車両、人）やアノテーションの種類（shape、track）、手動/補間フレーム数ごとに作成されたシェイプ数が表示されます。     |
| **フィルター**<br><br>![](/images/image143_3.png)            | [**フィルター**](/docs/manual/advanced/filter/)を有効にします。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **ワークスペーススイッチャー**                                           | ドロップダウンリストから異なるアノテーションモードに切り替えます：<br><br>![](/images/ui-swithcer.png)<br><br>概要：<ul><li>**標準** -- デフォルトモード</li><li>**属性** -- [**属性**](docs/manual/advanced/attribute-annotation-mode-advanced/)によるアノテーション</li><li>**シングルシェイプ** -- [**シングルシェイプ**](/docs/manual/advanced/single-shape/)アノテーションモード</li><li>**タグアノテーション** -- [タグ](/docs/manual/advanced/annotation-with-tags/)によるアノテーション</li><li>**レビュー** -- [**マニュアルQA**](/manual/advanced/analytics-and-monitoring/manual-qa/)モード                                                                                                                                                                               |

<!--lint enable maximum-line-length-->

# CVATアノテーションインターフェース

テーションインターフェースとその機能について説明します"
---

このドキュメントのセクションでは、アノテーションインターフェースと、画像データを正確かつ迅速にアノテーションするために使用できるすべてのオプションについて説明します。

インターフェースには、以下のエリアが含まれます。

![CVATインターフェース](/images/image034_detrac.png)

# 結合・分割ツール


CVATでは、複数のシェイプを1つのラベルに結合したり、1つのラベルを複数のシェイプに分割したりして、シェイプを編集できます。

このドキュメントでは、これらの操作を効果的に実行するためのガイダンスを提供します。

参照：

- [マスクの結合](#joining-masks)
- [ポリゴンとマスクの分割](#slicing-polygons-and-masks)

## マスクの結合

**マスクの結合**ツール (![マスクの結合ツールアイコン](/images/join-masks-icon.jpg)) は、マスクアノテーション専用に設計されています。

このツールは、画像内の1つのオブジェクトが複数のシェイプでアノテーションされており、それらを1つにまとめる必要がある場合に便利です。

![マスクの結合](/images/joining-tool-01.jpg)

マスクを結合するには、以下の手順を実行します：

1. **編集** ブロックから、
   **マスクの結合** ![マスクの結合ツールアイコン](/images/join-masks-icon.jpg) を選択します。
2. キャンバス上で、結合したいマスクをクリックして選択します。
3. （オプション）選択を解除したい場合は、もう一度そのマスクをクリックします。
4. 再度 **マスクの結合** ![マスクの結合ツールアイコン](/images/join-masks-icon.jpg)（**J**）をクリックして結合操作を実行します。

完了すると、選択したマスクは1つのマスクに結合されます。

![マスクの結合 gif](/images/joining-tool-02.gif)

## ポリゴンとマスクの分割

**マスク/ポリゴンの分割** (![分割ツールアイコン](/images/slicing-tool-icon.jpg)) は、マスク・ポリゴンの両方のアノテーションに対応しています。

このツールは、画像内の複数のオブジェクトが1つのシェイプでアノテーションされていて、それを複数のパーツに分割する必要がある場合に便利です。

> **注:** 1回の分割でシェイプは2つにしか分割できません。
> 必要な数だけシェイプを分割するには、分割ツールを複数回使用してください。

![分割ツール](/images/slicing-tool-01.jpg)

マスクまたはポリゴンを分割するには、以下の手順を実行します：

1. **編集** ブロックから、
   **マスク/ポリゴンの分割** ![分割ツールアイコン](/images/slicing-tool-icon.jpg) を選択します。
2. 分割したいシェイプをクリックします。
   選択したシェイプの周囲に黒い輪郭線が表示されます。
3. 輪郭線上をクリックして、分割開始点を設定します。
4. シェイプを横切るように線を描いて、分割パスを定義します。
   <br> Shiftを押しながらカーソルを動かすと自動でポイントが追加されます。
   <br> **注意**: 線が自身と交差することはできません。
   <br> **注意**: 線が輪郭線を2回以上横切ることはできません。
5. （オプション）> 直前のポイントをキャンセルするには右クリックします。
6. 輪郭線（**Alt**+**J**）（輪郭線の外側）をクリックして分割を確定します。

![分割ツール](/images/slicing-tool-02.gif)

# アノテーター向け仕様書


**Guide** 機能は、アノテーター向けの仕様書を作成できる
組み込みのマークダウンエディタを提供します。

仕様書を作成して送信すると、
以下のようにアノテーションインターフェースからアクセスできるようになります。

仕様書は **プロジェクト** または **タスク** に添付できます。

添付手順は、個人ユーザーも組織も同じです。

参照:

- [プロジェクトへの仕様書追加](#adding-specification-to-project)
  - [編集権限](#editing-rights)
- [タスクへの仕様書追加](#adding-specification-to-task)
  - [編集権限](#editing-rights-1)
- [アノテーター向け仕様書へのアクセス](#access-to-specification-for-annotators)
- [マークダウンエディタガイド](#markdown-editor-guide)
- [アノテーター向け仕様書のビデオチュートリアル](#specification-for-annotators-video-tutorial)

## プロジェクトへの仕様書追加

**プロジェクト** に仕様書を追加するには、以下の手順を実施します。

1. **プロジェクト** ページに移動し、仕様書を追加したいプロジェクトをクリックします。
2. **プロジェクト説明**の下にある **編集** をクリックします。

![プロジェクト仕様書](/images/project_spec.jpg)

3. [マークダウンエディタ](#markdown-editor-guide)に指示を書き、**送信** をクリックします。

### 編集権限

- **個人ユーザーの場合**: プロジェクトのオーナーと担当者のみが仕様書を編集できます。
- **組織の場合**: さらに組織のオーナーとメンテナーも編集できます。

![エディタ権限](/images/editor_access_rights_1.jpg)

## タスクへの仕様書追加

**タスク** に仕様書を追加するには、以下の手順を実施します。

1. **タスク** ページに移動し、仕様書を追加したいタスクをクリックします。
2. **タスク説明**の下にある **編集** をクリックします。

   ![タスク仕様書](/images/task_spec.jpg)

3. [マークダウンエディタ](#markdown-editor-guide)に指示を書き、**送信** をクリックします。

### 編集権限

- **個人ユーザーの場合**: タスクのオーナーと担当者のみが仕様書を編集できます。
- **組織の場合**: タスクのオーナー、メンテナー、担当者のみが仕様書を編集できます。

![エディタ権限](/images/editor_access_rights_2.jpg)

## アノテーター向け仕様書へのアクセス

仕様書は、ジョブが `new annotation` 状態のとき自動的に開かれます。
つまり、割り当てられたユーザーが **プロジェクト** または **タスク** 内の最初のジョブで作業を開始するときに自動で表示されます。

同じ **プロジェクト** または **タスク** 内で別のジョブに移動しても、
仕様書は自動で再表示されません。

**プロジェクト** または **タスク** が他のアノテーターに再割り当てされた場合、
アノテーターが最初のジョブを開いたときに仕様書が自動的に表示されますが、
その後のジョブでは再び表示されません。

常に仕様書を自動表示させたい場合は、
共有するジョブのURL末尾に `?openGuide` パラメータを付与してください。

```
/tasks/<task_id>/jobs/<job_id>?openGuide
```
例:

```
https://app.cvat.ai/tasks/taskID/jobs/jobID?openGuide
```

手動で仕様書を開くには、以下の手順を実施します。

1. ジョブを開き、アノテーションインターフェースを表示します。
2. 右上の **Guideボタン** (![Guide Icon](/images/guide_icon.jpg)) をクリックします。

## マークダウンエディタガイド

**Guide** のマークダウンエディタは2つのペインがあります。
左ペインに指示を書き込むと、エディタが右ペインにすぐに書式付きで表示します。

![マークダウンエディタ](/images/markdown_editor.jpg)

生のマークダウン記法で書くことも、上部のツールバーを使うこともできます。

![マークダウンエディタ](/images/editor_toolbar.jpg)

<!--lint disable maximum-line-length-->

| 要素 | 説明                                                                                                                                                                                                                                                        |
| ---- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1    | 文字の書式設定: 太字、斜体、取り消し線                                                                                                                                                                                                                      |
| 2    | 水平線（区切り線）を挿入                                                                                                                                                                                                                                    |
| 3    | タイトル、見出し、サブ見出しの追加。ドロップダウンリストからレベル（1～6）を選択可能                                                                                                                                                                       |
| 4    | リンクの追加。<br>**注:** 左クリックすると同じウィンドウで開きます                                                                                                                                                                                         |
| 5    | 引用文の追加                                                                                                                                                                                                                                               |
| 6    | コードの1行挿入                                                                                                                                                                                                                                            |
| 7    | コードブロックを挿入                                                                                                                                                                                                                                       |
| 8    | コメントの追加。コメントはGuideの編集者のみ閲覧可能で、アノテーターには表示されません                                                                                                                                                                       |
| 9    | 画像の追加。この機能を使うには、まず外部リソースに画像をアップロードし、エディタにリンクを追加してください。あるいは画像をエディタにドラッグ＆ドロップすると、CVATサーバーにアップロードされ仕様書に追加されます。                                             |
| 10   | リストの追加: 箇条書き、番号付きリスト、チェックリスト                                                                                                                                                                                                     |
| 11   | エディタペインの表示切替: 右ペインを隠す、両ペインを表示、左ペインを隠すなど選択可能                                                                                                                                                                       |
| 12   | フルスクリーンモードの有効化                                                                                                                                                                                                                                |

<!--lint enable maximum-line-length-->

## アノテーター向け仕様書のビデオチュートリアル

**Guide** 機能の使い方を解説したビデオチュートリアルです。

<!--lint disable maximum-line-length-->

<iframe width="560" height="315" src="https://www.youtube.com/embed/hAN9UGRvwOk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<!--lint enable maximum-line-length-->

# フィルター


この機能を使用する理由はいくつかあります：

1. フィルターを使用すると、フィルター条件に一致しないオブジェクトが非表示になります。
1. 興味のあるオブジェクトが存在するフレーム間を素早く移動できます。
   この目的には `左矢印` / `右矢印` キーを使用するか、
   UIボタンを右クリックして `フィルターで切り替え` を選択してカスタマイズできます。
   フィルターに対応するオブジェクトがない場合は、
   アノテーション済みオブジェクトが含まれる前/次のフレームへ移動します。

フィルターを適用するには、上部パネルのボタンをクリックします。

![](/images/image059.jpg)

## フィルターの作成

フィルター入力用のウィンドウが開きます。ここには `ルール追加` と `グループ追加` の2つのボタンがあります。

![](/images/image202.jpg)

### ルール

`ルール追加` ボタンはオブジェクト表示のためのルールを追加します。ルールでは以下のプロパティが使用できます：

![](/images/image204.jpg)

### アノテーションのサポートプロパティ

| プロパティ   | サポート値                                       | 説明                                 |
| ------------ | ------------------------------------------------ | ------------------------------------ |
| `Label`      | タスク内のすべてのラベル名                       | ラベル名                             |
| `Type`       | shape, track, tag                                | オブジェクトの種類                   |
| `Shape`      | すべてのシェイプタイプ                           | シェイプの種類                       |
| `Occluded`   | true または false                                | オクルード（詳細はこちら）|
| `Width`      | px数またはフィールド                             | シェイプの幅                         |
| `Height`     | px数またはフィールド                             | シェイプの高さ                       |
| `ServerID`   | 数値またはフィールド                             | サーバー上のオブジェクトID <br>（アクションメニューからオブジェクトへのリンクを形成して確認可能）|
| `ObjectID`   | 数値またはフィールド                             | クライアント内のオブジェクトID <br>（オブジェクトサイドバーに表示）|
| `Attributes` | 類似タイプまたは特定属性値を持つ<br>他のフィールドを含む | ラベルで指定された任意のフィールド   |

- プロジェクトリストのサポートプロパティ

- タスクリストのサポートプロパティ

- ジョブリストのサポートプロパティ

- クラウドストレージリストのサポートプロパティ

### プロパティで使用可能な演算子

`==` - 等しい; `!=` - 等しくない; `>` - より大きい; `>=` - 以上; `<` - より小さい; `<=` - 以下;

`Any in`; `Not in` - この演算子は1つのルールで複数の値を設定できます。

![](/images/image203.jpg)

`Is empty`; `is not empty` – これらの演算子は値の入力が不要です。

`Between`; `Not between` – 2つの値の範囲を選択できます。

`Like` - この演算子は、プロパティが値を含む必要があることを示します。

`Starts with`; `Ends with` - 始まりまたは終わりでフィルタリングします。

一部のプロパティは、選択可能な2種類の値をサポートしています：

![](/images/image205.jpg)

複数のルールを追加できます。ルール追加ボタンをクリックし、別のルールを設定してください。
新しいルールを設定した後、それらをどの演算子（`And` または `Or`）で接続するか選択できます。

![](/images/image206.jpg)

以降に追加されるルールは選択した演算子で結合されます。
`送信` をクリックしてフィルターを適用するか、複数の演算子でルールを結合したい場合はグループを使用してください。

### グループ

グループを追加するには、`グループ追加` ボタンをクリックします。グループ内ではルールやグループを作成できます。

![](/images/image207.jpg)

グループ内に複数のルールがある場合、それらは `And` または `Or` 演算子で結合できます。
ルールグループはグループ外の個別ルールと同様に動作し、
グループ外の演算子で結合されます。
グループ内でさらにグループを作成するには、グループ内のグループ追加ボタンをクリックします。

ルールやグループは移動できます。ルールまたはグループを移動するには、該当ボタンでドラッグしてください。
ルールやグループを削除するには、`削除` ボタンをクリックします。

![](/images/image208.jpg)

`Not` ボタンを有効にすると、グループに一致しないオブジェクトが除外されます。
`送信` をクリックしてフィルターを適用します。
`キャンセル` ボタンはフィルターを取り消します。`フィルタークリア` ボタンはフィルターを削除します。

適用されたフィルターは自動的に `最近使用` リストに表示されます。リストの最大数は10です。

---

## リストの並べ替えとフィルター

プロジェクトページのタスクリストや、
タスク, ジョブ,
クラウドストレージ ページで並べ替えやフィルターが利用できます。

> 適用されたフィルターや並べ替え条件はブラウザのURLに表示されるため、
> フィルターや並べ替えを適用したページを共有できます。

### 並べ替え基準

次のパラメーターで並べ替えが可能です：
- ジョブリスト：ID、担当者、更新日、[stage][stage]、[state][state]、タスクID、プロジェクトID、タスク名、プロジェクト名
- タスクリストおよびプロジェクトページ内タスクリスト：ID、オーナー、ステータス、担当者、更新日、[subset][subset]、[mode][mode]、[dimension][dimension]、プロジェクトID、名前、プロジェクト名
- プロジェクトリスト：ID、担当者、オーナー、ステータス、名前、更新日
- クラウドストレージリスト：ID、プロバイダータイプ、更新日、表示名、[resource][resource]、[credentials][credentials]、オーナー、説明

並べ替えを適用するには、パラメーターを横線上部のエリアへドラッグします。
横線下のパラメーターは適用されません。
パラメーターを移動することで優先順位を変更でき、
上部のパラメーターから順に並べ替えが行われます。

`並べ替えボタン` を押すと `昇順`/`降順` を切り替えられます。

### クイックフィルター

クイックフィルターにはよく使われるものが含まれます：
- `Assigned to me` - あなたに割り当てられたプロジェクト、タスク、ジョブのみ表示
- `Owned by me` - あなたが所有するプロジェクトまたはタスクのみ表示
- `Not completed` - 完了以外のステータスのプロジェクト、タスク、ジョブのみ表示
- `AWS storages` - AWSクラウドストレージのみ表示
- `Azure storages` - Azureクラウドストレージのみ表示
- `Google cloud storages` - Googleクラウドストレージのみ表示

#### 日付と時刻の選択

`最終更新` ルール作成時、選択ウィンドウで日付と時刻を選択できます。

![](/images/image244_detrac.jpg)

矢印や年・月をクリックして年や月を選択できます。
カレンダーで日付をクリックして日を選択し、
スクロールリストで時間（時・分）を選択できます。
`現在` ボタンで現在の日時を選択することも可能です。
適用するには `OK` をクリックしてください。

[state]: /docs/manual/basics/vocabulary/#state
[stage]: /docs/manual/basics/vocabulary/#stage
[subset]: /docs/manual/basics/vocabulary/#subset
[resource]: /docs/manual/basics/vocabulary/#resource
[credentials]: /docs/manual/basics/vocabulary/#credentials
[mode]: /docs/manual/basics/vocabulary/#mode
[dimension]: /docs/manual/basics/vocabulary/#dimension

# 検索


検索を利用する方法はいくつかあります。

- すべてのフィールド（オーナー、担当者、タスク名、タスクステータス、タスクモード）で検索できます。
  検索フィールドに検索文字列を入力して実行します。
- 特定のフィールドで検索する方法：
  - `owner: admin` - 名前に「admin」という文字列が含まれているユーザーが作成したすべてのタスク
  - `assignee: employee` - 名前に「employee」という文字列が含まれているユーザーに割り当てられているすべてのタスク
  - `name: training` - 名前に「training」という文字列が含まれているすべてのタスク
  - `mode: annotation` または `mode: interpolation` - 画像または動画があるすべてのタスク
  - `status: annotation` または `status: validation` または `status: completed` - ステータスで検索
  - `id: 5` - IDが5のタスク
- 複数のフィルター。フィルターは（識別子以外）キーワード `AND` で組み合わせることができます：
  - `mode: interpolation AND owner: admin`
  - `mode: annotation and status: annotation`

検索は大文字と小文字を区別しません。

![](/images/image100_detrac.jpg)

# ポリラインによるアノテーション


これは道路のマーキングアノテーションなどに使用されます。

開始する前に、`ポリライン`を選択する必要があります。`ポイント数`の欄で固定のポイント数を設定すると、自動的に描画が停止します。

![](/images/image085.jpg)

`シェイプ`をクリックすると描画モードに入ります。ポリラインを描画する方法は2つあります。クリックしてポイントを作成するか、`Shift`を押しながら画面上でマウスをドラッグします。
`Shift`を押していないときは、マウスホイールをスクロールしてズームイン／ズームアウトしたり、マウスホイールを押しながらマウスを動かして移動できます。右クリックで前のポイントを削除することも可能です。
もう一度`N`を押すか、上部パネルの`完了`ボタンをクリックするとシェイプが完成します。
`Ctrl`を押しながらポイントをクリックするか、ポイントを右クリックして`ポイントを削除`を選択すると、ポイントを削除できます。
`Shift`を押しながらクリックするとポリラインエディタが開きます。
そこで新しいポイントを作成（クリックまたはドラッグ）したり、赤い線を別のポイントに閉じることでポリゴンの一部を削除することができます。編集をキャンセルするには`Esc`を押してください。

![](/images/image039_mapillary_vistas.jpg)

# スケルトンによるアノテーション


このガイドでは、**スケルトン**アノテーションを活用し、複雑な構造を効率的にアノテーションするプロセスについて解説します。

**スケルトン**は、人体ポーズ推定や顔のランドマークなど、一貫した構造を持つ複雑なオブジェクトのアノテーションのためのテンプレートです。

**スケルトン**は多数のポイント（要素とも呼ばれます）で構成されており、エッジで繋がれている場合もあります。各ポイントは独立したオブジェクトとして機能し、色・遮蔽・可視性などの固有の属性やプロパティを持ちます。

**スケルトン**は、2つのフォーマットで**エクスポート**できます：**CVAT for image**と**COCO Keypoints**です。

> **注意**：スケルトンのラベルは、ラベルなしプロジェクトにデータセットをインポートしてもインポートされません。
> インポート前に手動でラベルを定義する必要があります。

参照：

- [スケルトンを手動で追加](#adding-skeleton-manually)
  - [スケルトンコンフィギュレーター](#skeleton-configurator)
  - [スケルトンポイントの設定](#configuring-skeleton-points)
  - [スケルトンラベルの手動追加](#adding-skeleton-labels-manually)
- [モデルからスケルトンラベルを追加](#adding-skeleton-labels-from-the-model)
- [スケルトンによるアノテーション](#annotation-with-skeletons)
- [スケルトンの自動アノテーション](#automatic-annotation-with-skeletons)
- [キャンバス上でのスケルトン編集](#editing-skeletons-on-the-canvas)
- [サイドバーでのスケルトン編集](#editing-skeletons-on-the-sidebar)

## スケルトンを手動で追加

スケルトンを使ってアノテーションを開始するには、**コンフィギュレーター**で**スケルトン**タスクを設定する必要があります。

**コンフィギュレーター**を開くには、タスク作成時に、スケルトンを手動で設定したい場合は**スケルトンをセットアップ**ボタンをクリックしてください。または、モデルからスケルトンラベルを追加したい場合は**モデルから**を選択します。

![](/images/image-setup-skeleton-1.jpg)

### スケルトンコンフィギュレーター

スケルトン**コンフィギュレーター**は、アノテーション用のスケルトンを作成するツールです。以下の項目があります。

![](/images/image-skeleton-configurator-overview.jpg)

| 番号 | 名前                      | 説明                                                                                                           |
| ---- | ------------------------- | -------------------------------------------------------------------------------------------------------------- |
| **1**  | **背景画像をアップロード** | （任意）スケルトンの上に背景画像をアップロードできます。                                                      |
| **2**  | **ポイントを追加**         | **描画エリア**（**8**）にスケルトンポイントを追加します。                                                    |
| **3**  | **クリック＆ドラッグ**     | **描画エリア**（**8**）内でポイントを移動できます。                                                          |
| **4**  | **エッジを追加**           | **描画エリア**（**8**）内のポイント（**2**）同士を繋ぐエッジを追加します。                                   |
| **5**  | **ポイントを削除**         | ポイントを削除します。**ポイントを削除**をクリックし、**描画エリア**（**8**）の任意のポイント（**2**）をクリックしてください。|
| **6**  | **スケルトンをダウンロード**| 作成したスケルトンを.SVG形式でダウンロードします。                                                            |
| **7**  | **スケルトンをアップロード**| .SVG形式のスケルトンをアップロードします。                                                                    |
| **8**  | **描画エリア**             | スケルトンを描画するキャンバスとして使用します。                                                              |

### スケルトンポイントの設定

ラベルの命名・属性の設定・各スケルトンポイントの色の変更が可能です。

これを行うには、スケルトンポイントを右クリックし、**設定**を選択します。

![](/images/image-skeleton-drawn-example.jpg)

開いたメニューでポイントの設定を変更できます。[通常のタスクのラベルや属性の追加](docs/manual/basics/create_an_annotation_task/#create-a-task)と同様の操作です。

![](/images/image-skeleton-point-setup.jpg)

**スケルトン**ポイントは、親の**スケルトン**内にのみ存在できます。

> **注意**：既存のタスク/プロジェクトのスケルトン設定は変更できません。

> ラベルコンフィギュレーターの**Raw**タブからスケルトン設定をコピー/挿入できます。

### スケルトンラベルの手動追加

**スケルトンタスク**を作成するには、以下の手順を実行してください。

1. **コンフィギュレーター**を開く。
2. （任意）背景画像をアップロード。
3. ラベル名フィールドにラベル名を入力。
4. （任意）**属性を追加**<br>**注意**：各ポイントごとに属性を追加できます。詳細は[**スケルトンポイントの設定**](#configuring-skeleton-points)を参照してください。
5. **ポイントを追加**で**描画エリア**にポイントを追加。
6. **エッジを追加**でポイント間にエッジを追加。
7. ファイルをアップロード。
8. 以下をクリック：
   - **送信＆開く**：タスクを作成して開きます。
   - **送信＆続行**：設定を送信し、新しいタスク作成を開始します。

## モデルからスケルトンラベルを追加

モデルからポイントを追加し、アノテーションを行うには以下の手順を実行してください。

1. **ベーシックコンフィギュレーター**を開く。
2. **コンストラクター**タブで**モデルから**をクリック。
3. **ラベルを選択するモデル**から`Human pose estimation`モデルなどを選択。
4. 使用したいモデルのラベルをクリック。<br>選択したラベルはグレー表示になります。

   ![](/images/auto-annot-sk.jpg)

5. （任意）ラベルを調整したい場合は、ラベル内の**属性を更新**アイコンをクリック。<br>**スケルトンコンフィギュレーター**が開き、**スケルトンの設定**ができます。<br>**注意**：タスク/プロジェクト作成後にラベルの調整はできません。
6. **完了**をクリック。選択したラベルがラベルウィンドウに表示されます。
7. データをアップロード。
8. 以下をクリック：
   - **送信＆開く**：タスクを作成して開きます。
   - **送信＆続行**：設定を送信し、新しいタスク作成を開始します。

## スケルトンによるアノテーション

**スケルトン**でアノテーションするには、以下の手順を実行してください。

1. ジョブを開く。
2. ツールパネルで**新しいスケルトンを描画**を選択。
3. **トラック**または**シェイプ**を選択してアノテーション（トラッキングなしでも可能）。

   ![](/images/image-draw-new-skeleton.jpg)

4. 画像上にスケルトンを描画。

![](/images/image-draw-new-skeleton.gif)

## スケルトンの自動アノテーション

**スケルトン**で自動アノテーションを行うには、以下の手順を実行してください。

1. ジョブを開き、ツールパネルで**AIツール** > **検出器**を選択。
2. ドロップダウンリストからモデルを選択。対応するポイント一覧とスケルトン名がリスト上部に表示されます。

   ![](/images/auto-annot-sk-detectors.jpg)

3. （任意）**ゴミ箱**アイコンをクリックすると、マッピング済みのアイテムを削除できます。
   - スケルトンごと、または全ポイントの削除。
   - 2つのマッピング済みスケルトンから特定のポイントのみ削除。
4. **アノテート**をクリック。

## キャンバス上でのスケルトン編集

描画済みスケルトンはバウンディングボックスで囲まれており、通常のバウンディングボックスと同じように、ドラッグ・リサイズ・回転などの操作ができます。

![](/images/skeleton_editing_canvas.gif)

ポイントを移動すると、バウンディングボックスは自動的に調整され、他のポイントには影響しません。

![](/images/skeleton_editing_canvas-2.gif)

また、**ショートカット**はスケルトン全体や各要素にも適用されます。

- スケルトン全体にショートカットを使うには、バウンディングボックスにマウスを重ねてショートカットキーを押します。ロック・遮蔽・ピン留め・キーフレーム・アウトサイド（スケルトントラック用）などのショートカットが使用できます。
- 特定のスケルトンポイントにショートカットを使うには、ポイントにマウスを重ねてショートカットキーを押します。同じショートカットに加え、アウトサイド（個別スケルトンシェイプ要素にも適用可）も利用できます。

## サイドバーでのスケルトン編集

CVATでは、サイドバーからスケルトンのプロパティや属性を設定することもできます。

この方法は他のオブジェクトタイプと似ていますが、いくつかの特有の違いがあります。

ユーザーがスケルトンのパーツ一覧を確認できる追加の折りたたみセクションがあります。

<div style="display: flex; align-items: flex-start;">
    <img src="/images/image-skeleton-track-sidebar.jpg" width="300px" />
    <img src="/images/image-skeleton-shape-sidebar.jpg" width="300px" />
</div>

スケルトンポイントには**アウトサイド**、**遮蔽**、**非表示**などのプロパティを設定できます。

![](/images/point-properties.jpg)

**アウトサイド**と**非表示**は、スケルトンポイントを不可視にします。

- **アウトサイド**プロパティはアノテーションの一部です。オブジェクトの一部がフレーム外の場合に使用します。
- **非表示**はアノテーターの利便性のためのみポイントを非表示にします。このプロパティは異なるセッション間で保存されません。
- **遮蔽**はポイントをフレーム上で可視のままにしますが、他のオブジェクトの背後に隠れていることを意味します。

# 長方形によるアノテーション


長方形を使ったアノテーションについて詳しく知りたい場合は、以下のセクションを参照してください。
- シェイプモード（基本）
- トラックモード（基本）
- シェイプモード（応用）
- トラックモード（応用）

## 回転する長方形

長方形を回転させるには、`回転ポイント`をドラッグします。回転は長方形の中心を軸に行われます。
固定角度（15度の倍数）で回転させたい場合は、`shift`を押しながら操作してください。回転中は回転角度が表示されます。

![](/images/image230.jpg)

## 4点での長方形アノテーション

これは効率的なバウンディングボックスアノテーション手法であり、
[こちら](https://arxiv.org/pdf/1708.02750.pdf)で提案されています。
開始する前に、4点による描画方法が選択されていることを確認してください。

![](/images/image134.jpg)

描画モードに入るには`Shape`または`Track`を押します。対象物の上端、下端、最も左、最も右の物理的な4点をクリックします。
4点目をクリックした直後に描画が自動的に完了します。
編集をキャンセルする場合は`Esc`を押してください。

![](/images/gif016_mapillary_vistas.gif)

# オンザフライでのデータ準備


<!--lint disable heading-style-->

## 説明

オンザフライ処理によるデータ操作とは、次のような考え方に基づいています。タスク作成時に、最小限の必要なメタ情報のみを収集します。このメタ情報により、クライアントからリクエストがあった際に必要なチャンク（データのまとまり）を生成できます。

生成されたチャンクは、利用頻度の低いものから削除されるキャッシュ（容量制限あり）に保存されます。

クライアントからリクエストがあると、必要なチャンクがキャッシュ内にあるか検索されます。まだチャンクが存在しない場合は、準備しておいたメタ情報をもとにチャンクを生成し、キャッシュに保存します。

このデータ処理方法により、以下が可能になります。

- タスク作成時間の短縮
- 利用頻度の低いものから削除されるポリシーのキャッシュ（容量制限あり）でデータを保存

ただし、この方法にはいくつかの欠点があります。
- データへの初回アクセス時は、より時間がかかります。
- 一部の動画では、マニフェストファイルが有効でも動作しません。
  スムーズな動画デコードに十分なキーフレームが動画に含まれていない場合、
  タスクデータチャンクは従来通り、タスク作成時に作成されます。
- データがまだキャッシュされておらず、アクセス時に取得できない場合は、データの取得ができません。

#### 使い方

新しいタスクでこの機能を有効・無効にするには、タスク設定の
`Use Cache`
トグルを使用してください。

#### マニフェストとデータのアップロード

タスク作成時に、動画や画像データセットと一緒に `manifest.jsonl` ファイルをアップロードできます。
その準備方法についてはこちらをご覧ください。

# 3Dオブジェクトアノテーション（上級）


2Dタスクオブジェクトと同様に、3Dタスクオブジェクトも外観、属性、プロパティの変更やアクションメニューの利用が可能です。詳細は
オブジェクトサイドバー
セクションをご覧ください。

## オブジェクトの移動

カーソルをキュボイドの上に置いて `Shift+N` を押すと、キュボイドが切り取られ、
他の場所に貼り付けることができます（貼り付けるにはダブルクリックしてください）。

## コピー

2Dタスクと同様に、`Ctrl+C` と `Ctrl+V` でオブジェクトをコピー＆ペーストできますが、
2Dタスクと異なり、コピーしたオブジェクトを3D空間上に配置する必要があります（貼り付けるにはダブルクリック）。

  ![](/images/gif030_carla_town3.gif)

## 投影ウィンドウ画像

投影ウィンドウの画像を左クリックして、「画像を名前を付けて保存」または「画像をコピー」を選択することで、ウィンドウ画像のコピーや保存が可能です。

# フレームの削除



# フレームの削除

現在のフレームをタスクから削除することができます。
このフレームはUIやエクスポートされたアノテーションには表示されません。
そのため、アノテーション対象外の破損したフレームなどをマークすることが可能です。

1. ジョブのアノテーションビューに移動し、**フレームを削除**ボタン（**Alt**+**Del**）をクリックします。

   > **注:** ショートカットで削除した場合、
   > 追加の確認なしにフレームが即時削除されます。

   ![](/images/image245.jpg)

1. その後、フレーム削除の確認が求められます。
   > **注:** そのフレームのすべてのアノテーションが削除され、未保存のアノテーションも保存されます。
   > また、アノテーションビューでそのフレームは非表示となります（設定で表示するまで不可視）。
   > タスク内に重複部分があり、削除したフレームがその区間に含まれる場合、
   > 他のジョブでもそのフレームが利用できなくなります。
1. トラック付きジョブでフレームを削除した場合、トラックを手動で調整する必要がある場合があります。一般的な調整方法は以下の通りです:
   - 補間が正しく見えるように、削除区間の端にキーフレームを追加する
   - キーフレームの開始または終了を、削除区間の正しい側に移動する


# 削除フレームの表示とナビゲーションの設定

削除したフレームを表示したい場合は、設定で有効にできます。

1. 設定に移動し、**プレーヤー**設定を選択します。

   ![](/images/image246.jpg)

1. **削除されたフレームを表示**のチェックボックスをクリックし、設定ダイアログを閉じます。

   ![](/images/image247.jpg)

1. これで削除されたフレームをナビゲートできるようになります。
   ただし、アノテーションツールは使用できません。削除フレームは該当するオーバーレイで区別されます。

1. このオプションを有効にしなくても、削除フレームをナビゲートする方法があります：

   - 直接ナビゲーション手段（ナビゲーションスライダーやフレーム入力フィールド）でフレームに移動
   - 直接リンクでフレームに移動

1. ステップ移動では削除したフレームはカウントされません。


# 削除フレームの復元

削除したフレームはタスク内で復元することもできます。

1. 前述の通り削除フレームの表示を有効にし、復元したい削除フレームに移動します。

   ![](/images/image248.jpg)

2. **復元**アイコンをクリックします。フレームは即座に復元されます。

# 楕円によるアノテーション


これは道路標識のアノテーションなどに使用されます。

まず最初に、コントロールサイドバーで`楕円`を選択する必要があります。

![](/images/image239.jpg)

`ラベル`を選択し、`シェイプ`または`トラック`をクリックして描画を開始します。楕円は
矩形と同じ方法で作成できます。2つの対角の点を指定すると、
楕円が仮想の矩形内に内接して描かれます。`N`キーを押すか、上部パネルの`完了`ボタンをクリックして
図形を完成させます。

![](/images/image240_mapillary_vistas.jpg)

楕円も、矩形と同じように
回転ポイントを使って回転できます。

## 楕円によるアノテーションのビデオチュートリアル


<!--lint disable maximum-line-length-->

<iframe width="560" height="315" src="https://www.youtube.com/embed/jmwtePYCz94?si=wbfYEX4pzGziXf1Y" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<!--lint enable maximum-line-length-->

# タグによるアノテーション


これはフレームにタグを付けてアノテーションするために使用されます。タグはワークスペース内には表示されません。
始める前に、上部パネルのドロップダウンリストを開き、`タグアノテーション` を選択してください。

![](/images/image183.jpg)

オブジェクトのサイドバーは、タグ作業用の専用パネルに置き換わります。
ここでタグのラベルを選択し、`プラス` ボタンをクリックして追加できます。
また、各ラベルにホットキーをカスタマイズすることもできます。

![](/images/image181.jpg)

1つのフレームにつき1つのラベルだけを使用したい場合は、`自動的に次のフレームへ移動` チェックボックスを有効にしてください。タグ追加後、自動的に次のフレームに切り替わります。

タグはキャンバスの左上隅に表示されます。設定で表示/非表示を切り替えることができます。

![](/images/image249.jpg)

# 属性アノテーションモード（上級）


このモードの基本的な操作については、セクション
属性アノテーションモード（基本）で説明しました。

このモードでは、同じフレーム内で多数のオブジェクトを扱うことができます。

![](/images/image058_detrac.jpg)

同じ種類のオブジェクトをアノテーションする場合、より便利です。この場合、適切なフィルターを適用できます。例えば、次のフィルターを使用すると、person 以外のすべてのオブジェクトが非表示になります：`label=="Person"`。

オブジェクト（この場合は person）間を移動するには、専用パネルの
「フレーム内のオブジェクトを切り替え」ボタンを使用します：

![](/images/image026.jpg)

またはショートカットキーを使用します：

- `Tab` — 次のオブジェクトへ移動
- `Shift+Tab` — 前のオブジェクトへ移動

ズームレベルを変更するには、設定（`F3`キーを押す）を開き、ワークスペースタブの「Attribute annotation mode (AAM) zoom margin in px」に値を設定してください。

# プロジェクトページ


## プロジェクトページ

このページでは、新しいプロジェクトの作成、バックアップからのプロジェクト作成、作成済みプロジェクトの一覧表示ができます。

左上には検索バーがあり、プロジェクト名や担当者などでプロジェクトを検索できます。
右上には[並び替え][sorting]、[クイックフィルター][quick-filters]、およびフィルターがあります。

## フィルター

> フィルターを適用すると[クイックフィルター][quick-filters]は無効になります。

フィルターはアノテーション用のフィルターと同様に動作します。
[プロパティ](#supported-properties-for-projects-list)、[演算子][operators]、値からルールを作成し、[グループ][groups]としてルールをまとめることができます。
詳細は[フィルターセクション][create-filter]を参照してください。
[日付と時刻の選択][data-and-time]について詳しくはこちら。

すべてのフィルターをクリアするには「Clear filters」を押してください。

### プロジェクト一覧でサポートされているプロパティ

| プロパティ       | サポートされている値                  | 説明                                                                                       |
| -------------- | ------------------------------------ | ---------------------------------------------------------------------------------------- |
| `Assignee`     | ユーザー名                            | 担当者はプロジェクト・タスク・ジョブに取り組んでいるユーザーです。<br>(タスクページで指定)     |
| `Owner`        | ユーザー名                            | プロジェクト・タスク・ジョブの所有者                                                      |
| `Last updated` | 最終更新日時（または範囲）             | 日付は `dd.MM.yyyy HH:mm` 形式で入力するか、入力欄をクリックして表示されるウィンドウで選択可 |
| `ID`           | ジョブIDの番号または範囲               |                                                                                          |
| `Name`         | 名前                                  | タスクページではタスク名、<br>プロジェクトページではプロジェクト名                             |

## プロジェクトの作成

CVATでは、同じタイプのタスクを含むプロジェクトを作成できます。
プロジェクトに関連するすべてのタスクは、ラベルリストを継承します。

プロジェクトを作成するには、トップメニューの「Projects」をクリックしてプロジェクトセクションに移動します。
プロジェクトページでは、プロジェクト一覧の表示、検索の利用、
「+」ボタンをクリックして「Create New Project」を選択することで新しいプロジェクトを作成できます。

![](/images/image190.jpg)

> プロジェクトは作成時に選択した組織内で作成されます。
> 組織について詳しくはこちら。

プロジェクト名、ラベルリスト（このプロジェクトで作成されるタスクに使用）、
必要に応じてスケルトンを変更できます。
詳細設定では、課題へのリンクやソース・ターゲットストレージも指定できます。
ラベルリストの作成、
スケルトンの作成、
クラウドストレージの添付について詳しくはこちら。

プロジェクトを保存して開くには「Submit & Open」ボタンをクリックします。
また、連続して複数のプロジェクトを作成したい場合は「Submit & Continue」ボタンをクリックします。

![](/images/image191.jpg)

作成後、プロジェクトはプロジェクトページに表示されます。プロジェクトを開くには、そのプロジェクトをクリックしてください。

![](/images/image192_mapillary_vistas.jpg)

ここで以下の操作が可能です:

1. プロジェクトタイトルの変更
1. 「Actions」メニューを開く。「Actions」メニュー内の各ボタンは特定の機能を担当します。
   - `Export dataset`/`Import dataset`：特定のフォーマットでアノテーションやアノテーション＋画像のダウンロード／アップロード。
     詳細はデータセットのエクスポート／インポートセクション参照。
   - `Backup project`：プロジェクトのバックアップ作成。詳細はバックアップセクション参照。
   - `Delete`：プロジェクトと関連タスクをすべて削除。
1. イシュートラッカーの変更または、指定されていればイシュートラッカーを開く。
1. ラベルやスケルトンの変更。
   「Raw」モードまたは「Constructor」モードで新しいラベルや既存ラベルへの属性追加が可能です。
   ラベルごとに色の変更もできます。
   「Setup skeleton」をクリックすると、このプロジェクト用のスケルトンを作成できます。

1. 「Assigned to」―プロジェクトを担当者に割り当てる際に使用します。
   担当者名を入力し、ドロップダウンリストから該当者を選択してください。
1. 「Tasks」―特定プロジェクトのすべてのタスクの一覧で、タスクの検索・並び替え・フィルターが可能です。
   検索について詳しくはこちら。
   並び替え・フィルターについて詳しくはこちら
プロジェクト内のタスクでサブセットを選択することも可能です。利用可能な選択肢（`Train`、`Test`、`Validation`）や独自のサブセットを設定できます。

[create-filter]: /docs/manual/advanced/filter/#create-a-filter
[operators]: /docs/manual/advanced/filter/#supported-operators-for-properties
[groups]: /docs/manual/advanced/filter/#groups
[data-and-time]: /docs/manual/advanced/filter#date-and-time-selection
[sorting]: /docs/manual/advanced/filter/#sort-by
[quick-filters]: /docs/manual/advanced/filter/#quick-filters

# ショートカット


CVAT では幅広いカスタマイズ可能なショートカットが提供されており、多くの UI 要素でマウスオーバー時にショートカットのヒントが表示されます。

![](/images/image075.jpg)

これらのショートカットはスコープごとに整理されています。一部はグローバルであり、アプリケーション全体で機能しますが、他は特定のセクションやワークスペースに限定されています。
このアプローチにより、競合しない限り、異なるスコープで同じショートカットを再利用することができます。
たとえば、グローバルショートカットはすべてのページとワークスペースに適用されるため、一意でなければなりません。
ただし、標準ワークスペースと標準 3D ワークスペースなど、共存しないワークスペースで同じショートカットを使うことができます。

| **スコープ**                          | **ショートカットの競合**                                                                |
|--------------------------------------|---------------------------------------------------------------------------------------|
| **グローバル**                       | すべてのスコープで一意でなければならず、ユニバーサルに適用されます。                  |
| **アノテーションページ**              | ラベルエディタを除き、すべてのスコープで一意でなければなりません。                   |
| **標準ワークスペース**               | 自身、アノテーションページ、グローバルスコープで一意でなければなりません。           |
| **標準 3D ワークスペース**           | 自身、アノテーションページ、グローバルスコープで一意でなければなりません。           |
| **属性アノテーションワークスペース**   | 自身、アノテーションページ、グローバルスコープで一意でなければなりません。           |
| **レビューワークスペース**           | 自身、アノテーションページ、グローバルスコープで一意でなければなりません。           |
| **タグアノテーションワークスペース**   | 自身、アノテーションページ、グローバルスコープで一意でなければなりません。           |
| **コントロールサイドバー**            | 自身、すべてのワークスペース、アノテーションページ、グローバルスコープで一意でなければなりません。|
| **オブジェクトサイドバー**            | 自身、すべてのワークスペース、アノテーションページ、グローバルスコープで一意でなければなりません。|
| **ラベルエディタ**                    | 自身およびグローバルスコープで一意でなければなりません。                            |

## ショートカットのカスタマイズ

CVAT の設定でショートカットをカスタマイズできます。

- 設定を開く:\
![](/images/shortcuts01.png)

- ショートカットタブに移動:\
![](/images/shortcuts02.png)

- ショートカットカスタマイズメニューが表示されます:\
![](/images/shortcuts03.png)

- ご覧の通り、一部のショートカットはブラウザによって予約されており、CVAT では上書きできません。
  そのような組み合わせの具体的なリストはありませんが、たとえば ctrl + tab（タブの切り替え）や
  ctrl + w（タブの閉鎖）などはブラウザによって予約されており、
  alt + f4（ウィンドウの閉鎖）などは通常オペレーティングシステムによって予約されています。

- すべてのセクションは折りたたみ可能で、ショートカット一覧を簡単にナビゲートできます。
  ここではグローバルスコープを展開しています:\
![](/images/shortcuts04.png)

- カスタムショートカットを追加するには、入力フィールドをクリックし、割り当てたいシーケンスを押すだけです。
  例として `f3` が「ショートカット表示」に `f1` とともに割り当てられています:\
![](/images/shortcuts05.png)

- ショートカットは、修飾キー（ctrl、shift、alt）の任意の組み合わせと、最大1つの非修飾キー（例: `ctrl+shift+f1` など）を組み合わせて設定できます。\
![](/images/shortcuts06.png)

- すでに使用されているショートカットを追加しようとすると、警告メッセージが表示されます:\
![](/images/shortcuts07.png)

- キャンセルを押すと元のままですが、続行すると競合しているショートカットが解除されます。\
![](/images/shortcuts08.png)

- すべてのショートカットをデフォルトにリセットしたい場合は、ショートカット設定の上部にある
  「デフォルトに戻す」ボタンをクリックしてください。\
![](/images/shortcuts09.png)

# トラックモード（上級編）


このモードの基本操作については、
トラックモード（基本編）
のセクションで説明しました。

トラックモードで作成されたシェイプには、追加のナビゲーションボタンがあります。

- これらのボタンは、前のキーフレームや次のキーフレームにジャンプするのに役立ちます。

  ![](/images/image056.jpg)

- このボタンは、最初のフレームや最後のキーフレームにジャンプするのに役立ちます。

  ![](/images/image057.jpg)

`分割（Split）`機能を使うことで、1つのトラックを2つのトラックに分割することができます。

![](/images/gif010_detrac.gif)

# モデル


モデルをデプロイするには、必要なコンポーネントを
半自動および自動アノテーションガイド
を参考にインストールしてください。
モデルのデプロイ方法については、
サーバーレスチュートリアル
をお読みください。

「モデル」ページには、半自動および自動アノテーション用にデプロイされたディープラーニング（DL）モデルの一覧が表示されます。
「モデル」ページを開くには、ナビゲーションバーの「モデル」ボタンをクリックしてください。
モデルのリストはテーブル形式で表示されます。各モデルについて示されているパラメーターは以下の通りです：

- モデルが基づいている `フレームワーク`
- モデルの `名前`
- モデルの `タイプ`:
  - `detector` - 自動アノテーション用
    （detectors
    および 自動アノテーション で利用可能）
  - `interactor` - 半自動形状アノテーション用
    （interactors で利用可能）
  - `tracker` - 半自動トラックアノテーション用
    （trackers で利用可能）
  - `reid` - 個別オブジェクトをトラックにまとめるために使用
    （自動アノテーション で利用可能）
- `説明` - モデルの簡単な説明
- `ラベル` - 対応しているラベルのリスト（`detectors` タイプのモデルのみ）

![](/images/image099.jpg)

# シェイプのグループ化


この機能を使うと、複数のシェイプをグループ化できます。

`グループ化`ボタンまたはショートカットを使用できます。

- `G` — グループモードで選択開始／終了
- `Esc` — グループモードを終了
- `Shift+G` — 選択したシェイプのグループをリセット

シェイプはクリックまたは範囲選択で選択できます。

グループ化されたシェイプは、出力アノテーションに `group_id` フィールドが付きます。

また、インスタンス（デフォルト）からグループ単位での色分けに切り替えることも可能です。
そのためには `グループごとに色分け` チェックボックスを切り替えてください。

`group_id` を持たないシェイプは白色でハイライト表示されます。

![](/images/image078_detrac.jpg)

![](/images/image077_detrac.jpg)

## シェイプグループ化のビデオチュートリアル

<!--lint disable maximum-line-length-->

<iframe width="560" height="315" src="https://www.youtube.com/embed/m8bB9f23wLs?si=N5EzIRG-1Wn6R15G" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<!--lint enable maximum-line-length-->

# ブラシツールによるアノテーション


ブラシツールを使うことで、複数のパーツから成る非連続オブジェクトのマスクを作成できます。例えば、木の後ろに隠れている家、歩行者の後ろの車、交通標識の後ろの柱などです。  
ブラシツールには、ピクセルの消去、ブラシ形状の変更、ポリゴンからマスクへの変換など、いくつかのモードがあります。

ブラシツールはセマンティック（パノプティック）およびインスタンス画像セグメンテーションタスクに使用します。  
CVATでのセグメンテーションマスクの詳細は マスクの作成 を参照してください。

参照:

- [ブラシツールメニュー](#brush-tool-menu)
- [ブラシによるアノテーション](#annotation-with-brush)
- [ポリゴンからマスクへのアノテーション](#annotation-with-polygon-to-mask)
- [下地ピクセルの削除](#remove-underlying-pixels)
- [AIツール](#ai-tools)
- [インポートとエクスポート](#import-and-export)

## ブラシツールメニュー

**Shape**をクリックすると、画面上部にブラシツールメニューが表示されます。

![BT Menu](/images/brushing_tool_menu.png)

以下の要素があります。

<!--lint disable maximum-line-length-->

| 要素                                                           | 説明                                                                                                                                                                      |
| ------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --- |
| ![Tick icon](/images/tick_icon.png)                           | **マスクを保存** で作成したマスクを保存します。保存したマスクはオブジェクトサイドバーに表示されます。                                                                       |
| ![Save mask and continue](/images/brushing_tools_add_label.png) | **マスクを保存して続ける** で新しいマスクをオブジェクトサイドバーに追加し、すぐに新しいマスクの描画を続けられます。                                                        |
| ![Brush](/images/brushing_tools_icon.png)                     | **ブラシ** で新しいマスクや領域を既存のマスクに追加します。                                                                                                               |
| ![Eraser](/images/brushing_tools_erase.png)                   | **消しゴム** でマスクの一部を削除します。                                                                                                                                |
| ![Add poly](/images/brushing_tools_add_poly.png)              | **ポリゴン** 選択ツール。選択部分がマスクになります。                                                                                                                     |
| ![Remove poly](/images/brushing_tools_remove_poly.png)        | **ポリゴン選択の削除** でポリゴン選択部分の一部を減算します。                                                                                                             |
| ![Brush size](/images/brushing_tools_brush_size.png)          | **ブラシサイズ**（ピクセル単位）。<br>**備考:** **ブラシ** か **消しゴム** が選択されている場合のみ表示されます。                                                         |
| ![Brush shape](/images/brushing_tools_brush_shape.png)        | **ブラシ形状**（丸型と四角型の2種類）。<br>**備考:** **ブラシ** か **消しゴム** が選択されている場合のみ表示されます。                                                     |
| ![Pixel remove](/images/brushing_tools_pixels.png)            | **下地ピクセルの削除**。このツールでマスクを描画・編集中、同じ位置にある他マスクのピクセルが<br>現在のマスクのピクセルと重なっている場合、自動的に削除されます。           |
| ![Hide mask](/images/brushing_tools_hide.png)              | **マスクを非表示**。マスクの描画・編集中に一時的にマスクを非表示にでき、下のオブジェクトをより見やすくなります。|
| ![Label](/images/brushing_tools_label_drop.png)               | 作成される新しいマスクに割り当てられる**ラベル**                                                                                                                         |     |
| ![Move](/images/brushing_tools_brush_move.png)                | **移動**。クリック＆ホールドでメニューバーを画面上の別の場所に移動できます。                                                                                            |

<!--lint enable maximum-line-length-->

## ブラシによるアノテーション

ブラシでアノテーションする手順は以下の通りです。

1. コントロールサイドバーから、  
   **ブラシ** ![Brush icon](/images/brushing_tools_icon.png) を選択します。
2. **新しいマスクの描画** メニューでマスクのラベルを選択し、**Shape**をクリックします。<br>**ブラシ**![Brush](/images/brushing_tools_icon.png) ツールがデフォルトで選択されます。

   ![BT context menu](/images/brushing_tools_context_menu.png)

3. ブラシでラベル付けしたいオブジェクトにマスクを描画します。<br>選択範囲を消去するには**消しゴム** ![Eraser](/images/brushing_tools_erase.png) を使います。

   ![Brushing](/images/brushing_tools.gif)

4. マスクの適用後、上部メニューバーの**マスクを保存** ![Tick icon](/images/tick_icon.png)  
   をクリックして処理を完了します（またはキーボードの**N**）。
5. 追加されたオブジェクトは  
   オブジェクトサイドバーに表示されます。

次のオブジェクトを追加するには 1 〜 5 の手順を繰り返します。  
追加されたすべてのオブジェクトは画像上と  
オブジェクトサイドバーで確認できます。

すべての追加オブジェクトを保存するには、上部メニューの**保存** ![Save](/images/brushing_tools_save.png) をクリックします。

## ポリゴンからマスクへのアノテーション

ポリゴンからマスクへのアノテーション手順は以下の通りです。

1. コントロールサイドバーから、  
   **ブラシ** ![Brush icon](/images/brushing_tools_icon.png) を選択します。
2. **新しいマスクの描画** メニューでマスクのラベルを選択し、**Shape**をクリックします。

   ![BT context menu](/images/brushing_tools_context_menu.png)

3. ブラシツールメニューで**ポリゴン** ![Add poly](/images/brushing_tools_add_poly.png) を選択します。
4. **ポリゴン**![Add poly](/images/brushing_tools_add_poly.png) ツールでラベル付けしたいオブジェクトのマスクを描画します。<br>選択範囲を修正するには**ポリゴン選択の削除** ![Remove poly](/images/brushing_tools_remove_poly.png) を使います。
5. **マスクを保存** ![Tick icon](/images/tick_icon.png)（またはキーボードの**N**）でポリゴンツールの追加/削除を切り替えます。

   ![Brushing](/images/brushing_tools_polygon.gif)

6. ポリゴン選択を追加したら、上部メニューバーの**マスクを保存** ![Tick icon](/images/tick_icon.png)  
   をクリックして処理を完了します（またはキーボードの**N**）。
7. さらに**マスクを保存** ![Tick icon](/images/tick_icon.png) をクリック（または**N**）。<br>追加されたオブジェクトは オブジェクトサイドバーに表示されます。

次のオブジェクトを追加するには 1 〜 5 の手順を繰り返します。

追加されたすべてのオブジェクトは画像上と  
オブジェクトサイドバーで確認できます。

すべての追加オブジェクトを保存するには、上部メニューの**保存** ![Save](/images/brushing_tools_save.png) をクリックします。

## 下地ピクセルの削除

**下地ピクセルの削除**ツールは、新しいマスクを追加しつつ、  
同じ位置にある他のマスクのピクセルを同時に削除したい場合に使います。  
異なる2つのオブジェクト間でエッジを二度描きする手間を省ける便利な機能です。

![Remove pixel](/images/brushing_tools_pixel_underlying.gif)

## AIツール

AIツールのマスクをポリゴンに変換できます。  
そのためには、以下のAIツールメニューを使います。

![Save](/images/brushing_tool_ai.jpg)

1. **Detectors**タブへ移動します。
2. **Masks to polygons**トグルを右へ切り替えます。
3. ドロップダウンリストからソースと宛先ラベルを追加します。
4. **Annotate**をクリックします。

## インポートとエクスポート

エクスポートについてはデータセットのエクスポートを参照してください。

インポートは通常のデータセットのインポート手順に従い、  
追加オプションとしてマスクをポリゴンに変換できます。

> **備考:** このオプションはマスク形式に対応したフォーマットでのみ利用可能です。

使用するには、データセットをアップロードする際に**マスクをポリゴンに変換**トグルを右に切り替えます。

![Remove pixel](/images/brushing_tools_import.png)

# データセットのインポートおよびアノテーションのアップロード


## データセットのエクスポート

データセットはプロジェクト、タスク、またはジョブにエクスポートできます。

1. 最新のアノテーションをダウンロードするには、まずすべての変更を保存する必要があります。
   `保存`ボタンをクリックしてください。アノテーションを素早く保存するには`Ctrl+S`のショートカットも利用できます。

   ![](/images/image028.jpg)

1. その後、`メニュー`ボタンをクリックします。
   タスクおよびプロジェクトのデータセットのエクスポートとインポートは`アクション`メニューから行います。
1. `タスクデータセットをエクスポート`ボタンを押してください。

   ![](/images/image225.jpg)

1. データセットのエクスポート形式を選択します。エクスポートとインポートは以下の形式で利用できます:
   - 標準CVAT形式:
     - CVAT for video
       タスクが補間モードで作成された場合に選択してください。
     - CVAT for images
       タスクがアノテーションモードで作成された場合に選択してください。

       <br>
   - また、
     CVATでサポートされているアノテーション形式の一覧
     の形式も利用できます。

   - 3Dタスクの場合、以下の形式が利用可能です:
     - [Kitti Raw Format 1.0](http://www.cvlibs.net/datasets/kitti/raw_data.php)
     - Sly Point Cloud Format 1.0  - Supervisely Point Cloud データセット

   <br>
1. データセットと一緒に画像をダウンロードするには、`画像を保存`オプションを有効にしてください。
1. （オプション）作成されるアーカイブの名前を指定したい場合は、`カスタム名`フィールドを使用してください。
1. データセットのエクスポート先ストレージを`ローカル`または`クラウドストレージ`から選択できます。
   デフォルト設定はプロジェクト作成時に選択した設定です
   （例：プロジェクト作成時にローカルストレージを指定した場合、デフォルトでPCへのエクスポートが提案されます）。
   デフォルト値は`?`にマウスを重ねることで確認できます。
   クラウドストレージの接続について詳しくはこちらをご覧ください。

## データセットのインポート

データセットはプロジェクトにのみインポートできます。この場合、データはサブセットに分割されます。
データセットをインポートするには、`プロジェクト`ページで以下の操作を行ってください：

![](/images/image238.jpg)

- `アクション`メニューを開きます。
- `データセットをインポート`ボタンを押します。
- データセット形式を選択します（エクスポート時にカスタム名を指定していない場合、アーカイブ名に形式が含まれています）。
- ファイルをアップロードエリアにドラッグするか、アップロードエリアをクリックしてエクスプローラからファイルを選択します。

![](/images/image250.jpg)

- 添付されたクラウドストレージからデータセットをインポートすることもできます。
  この場合、アノテーション形式を選択し、リストからクラウドストレージを選択するか、すでにタスクまたはプロジェクト用のクラウドストレージを指定している場合はデフォルト設定を利用し、
  `ファイル名`テキストフィールドにzipアーカイブを指定してください。

インポート処理中は、進捗状況を確認できます。

## アノテーションのアップロード

![](/images/image251.jpg)

タスクまたはジョブでアノテーションをアップロードできます。その場合は、タスクの`アクション`メニューから`アノテーションをアップロード`を選択するか、ジョブの`トップパネル`の`メニュー`でアップロードする形式を選び、エクスプローラからアノテーションファイルまたはアーカイブを選択してください。

![](/images/image252.jpg)

また、添付済みのクラウドストレージを利用してアノテーションファイルをアップロードすることも可能です。

# タスクおよびプロジェクトのバックアップ


## 概要

CVATでは、タスクやプロジェクトのバックアップを行うことができます。
これにより、タスクやプロジェクトをPCにバックアップしたり、他のサーバーへ転送したりすることができます。

## バックアップの作成

タスクまたはプロジェクトをバックアップするには、アクションメニューを開いて `バックアップタスク` または `バックアッププロジェクト` を選択します。

![](/images/image219.jpg)

プロジェクトまたはタスクは、PC上にローカル保存することも、
接続済みクラウドストレージ
を利用して保存することもできます。

（任意）`カスタム名` テキストフィールドにバックアップ名を指定できます。指定しない場合は、
プロジェクトの場合は `project_<project_name>_backup_<date>_<time>.zip`、タスクの場合は
`task_<task_name>_backup_<date>_<time>.zip` という名前でバックアップファイルが作成されます。

![](/images/image253.jpg)

バックアップを特定の
接続済みクラウドストレージ
に保存したい場合は、`デフォルト設定を使用` のスイッチをオフにし、
`ターゲットストレージ` で `クラウドストレージ` を選択し、接続済みクラウドストレージ一覧から
希望するストレージを選択してください。

## バックアップ作成API

- エンドポイント:
  - `/tasks/{id}/backup`
  - `/projects/{id}/backup`
- メソッド: `GET`
- レスポンス: 202, 201（zipアーカイブペイロード）

### バックアップアップロードAPI

- エンドポイント:
  - `/api/tasks/backup`
  - `/api/projects/backup`
- メソッド: `POST`
- Content-Type: `multipart/form-data`
- レスポンス: 202, 201（jsonペイロード）

## バックアップからの作成

バックアップからタスクまたはプロジェクトを作成するには、タスクまたはプロジェクトのページに移動し、
`バックアップから作成` ボタンをクリックして必要なアーカイブを選択します。

![](/images/image220.jpg)

その結果、以前エクスポートしたタスクのデータ、パラメータ、アノテーションを含むタスクが作成されます。

## バックアップファイルの構造

バックアップの結果、データやタスク／プロジェクトおよびタスク仕様、アノテーションを下記の構造で含むzipアーカイブが生成されます。


  タスクバックアップ構造
    .
    ├── data
    │   └── {ユーザーがアップロードしたデータ}
    ├── task.json
    └── annotations.json
  
  プロジェクトバックアップ構造
    .
    ├── task_{id}
    │   ├── data
    │   │   └── {ユーザーがアップロードしたデータ}
    │   ├── task.json
    │   └── annotations.json
    └── project.json
  


# 自動アノテーション


CVATの自動アノテーションは、事前学習済みモデルを使ってデータに自動的に事前アノテーションを付与できるツールです。

CVATは以下のソースからモデルを利用できます：

- [プリインストール済みモデル](#models)。
- [Hugging Face および Roboflow](#adding-models-from-hugging-face-and-roboflow) から統合したモデル。
- Nuclioでデプロイしたセルフホストモデル。

以下の表は利用可能なオプションについて説明しています：

|                                             | セルフホスト            | クラウド                                            |
| ------------------------------------------- | ---------------------- | ------------------------------------------------ |
| **価格**                                   | 無料                   | [価格表](https://www.cvat.ai/pricing/cloud) を参照 |
| **モデル**                                 | モデルを追加する必要あり | プリインストール済みモデルを利用可能                 |
| **Hugging Face & Roboflow <br>統合**       | 非対応                 | 対応                                               |

参照：

- [自動アノテーションの実行](#running-automatic-annotation)
- [ラベルのマッチング](#labels-matching)
- [モデル一覧](#models)
- [Hugging Face および Roboflow からのモデル追加](#adding-models-from-hugging-face-and-roboflow)

## 自動アノテーションの実行

自動アノテーションを開始するには、以下の手順を実行してください：

1. 上部メニューから **Tasks** をクリックします。
1. アノテーションしたいタスクを探し、**Action** > **Automatic annotation** をクリックします。

   ![](/images/image119_detrac.jpg)

1. 自動アノテーションのダイアログで、ドロップダウンリストから[モデル](#models)を選択します。
1. モデルとタスクの[ラベルをマッチング](#labels-matching)します。
1. （任意）マスクをポリゴンとして返したい場合は、**Return masks as polygons** のトグルをオンにします。
1. （任意）過去のアノテーションをすべて削除したい場合は、**Clean old annotations** のトグルをオンにします。
1. （任意）モデルの**閾値**を指定できます。指定しない場合は、モデル設定のデフォルト値が使用されます。

   ![](/images/running_automatic_annotation.png)

1. **Annotate** をクリックします。

CVATはプログレスバーでアノテーションの進捗を表示します。

![プログレスバー](/images/image121_detrac.jpg)

自動アノテーションは、いつでもキャンセルをクリックすることで停止できます。

## ラベルのマッチング

各モデルは特定のデータセットで学習されており、そのデータセットのラベルのみ対応しています。

例：

- DLモデルには `car` というラベルがある。
- あなたのタスク（またはプロジェクト）には `vehicle` というラベルがある。

アノテーションするには、これら2つのラベルをマッチさせて、
この場合 `car` = `vehicle` であることをCVATに伝える必要があります。

もしDLラベル一覧に存在しないラベルがある場合、
それらをマッチさせることはできません。

このため、対応しているDLモデルは特定のラベルにのみ利用可能です。

各モデルのラベル一覧を確認するには、[モデル一覧](#models)の論文や公式ドキュメントを参照してください。

## モデル一覧

自動アノテーションはプリインストール済みモデルと追加したモデルを利用します。

> セルフホスト型の場合は、
> まず
> 自動アノテーションをインストール
> し、モデルを追加する必要があります。

プリインストール済みモデル一覧：

| モデル | 説明 |
|--------|------|
| 属性付き顔検出 | 3つのOpenVINOモデルを組み合わせて使用:<br><br>- [Face Detection 0205](https://docs.openvino.ai/2022.3/omz_models_model_face_detection_0205.html): MobileNetV2ベースのFCOSヘッドを使用した顔検出器。屋内外の正面向きカメラ映像に対応。<br>- [Emotions recognition retail 0003](https://docs.openvino.ai/2022.3/omz_models_model_emotions_recognition_retail_0003.html): 5つの感情(neutral、happy、sad、surprise、anger)を認識する畳み込みネットワーク。<br>- [Age gender recognition retail 0013](https://docs.openvino.ai/2022.3/omz_models_model_age_gender_recognition_retail_0013.html): 年齢(18-75歳)と性別を同時に認識する畳み込みネットワーク。 |
| RetinaNet R101 | クラス不均衡に対応するフォーカルロス関数を使用した1ステージ物体検出モデル。バックボーンネットワークと2つのタスク特化型サブネットワークで構成。<br><br>詳細: [RetinaNET](https://paperswithcode.com/lib/detectron2/retinanet) |
| テキスト検出 | MobileNetV2(depth_multiplier=1.4)をバックボーンとしたPixelLinkベースのテキスト検出器。屋内外シーンに対応。<br><br>詳細: [OpenVINO Text detection 004](https://docs.openvino.ai/2022.3/omz_models_model_text_detection_0004.html) |
| YOLO v3 | COCOデータセットで事前学習された物体検出モデル群。<br><br>詳細: [YOLO v3](https://docs.openvino.ai/2022.3/omz_models_model_yolo_v3_tf.html) |
| YOLO v7 | 高速・高精度な最新の物体検出モデル。5-160FPSのフレームレートに対応し、30FPS以上のリアルタイム検出器中で最高の56.8% APを達成。<br><br>詳細:<br>- [GitHub](https://github.com/WongKinYiu/yolov7)<br>- [論文](https://arxiv.org/pdf/2207.02696.pdf) |
## Hugging Face および Roboflow からのモデル追加

必要なモデルが見つからない場合は、[Hugging Face](https://huggingface.co/) または [Roboflow](https://roboflow.com/) からお好きなモデルを追加できます。

> **注意**：セルフホストCVATにはHugging FaceおよびRoboflowからモデルを追加できません。

<!--lint disable maximum-line-length-->

詳細は
[Hugging FaceおよびRoboflowモデル統合によるアノテーション効率化](https://www.cvat.ai/post/integrating-hugging-face-and-roboflow-models)
を参照してください。

以下のビデオでプロセスを説明しています：

<iframe width="560" height="315" src="https://www.youtube.com/embed/SbU3aB65W5s" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<!--lint enable maximum-line-length-->

# CVAT ユーザーロール


CVAT には、2つの異なる種類のロールがあります。

- **グローバルロール**: これはシステム全体に適用される共通のロールです。CVAT.ai プラットフォームにログインしたすべてのユーザーに自動的に割り当てられます。CVAT.ai 全体で、登録ユーザーすべてが持つ基本的な権限を設定します。個々のタスクや役割に関係なく適用されます。
- **組織ロール**: これは組織内でユーザーができることを決定し、ユーザーの職務や責任に基づいた、より細やかなアクセス制御を可能にします。

組織ロールはグローバルロールを補完し、タスクやジョブなど、さまざまなリソースの可視性を決定します。

**制限**: 制限は、[**フリープラン**](https://www.cvat.ai/pricing/cloud) を利用するCVAT.aiクラウドプラットフォームのすべてのユーザーに適用され、  
**サブスクリプションの選択** により解除できます。

すべてのロールはあらかじめ定義されており、ユーザーインターフェースから変更することはできません。  
ただし、_セルフホスト型ソリューション_ では、`cvat/apps/*/rules/` に保存された `.rego` ファイルを使ってロールを調整できます。  
Rego は OPA（Open Policy Agent）ポリシーを定義するために使われる宣言型言語で、その構文は [**OPAドキュメント**](https://www.openpolicyagent.org/docs/latest/policy-language/) で詳しく説明されています。

> 注意: `.rego` ファイルを変更した後は、Docker Compose を再構築・再起動して変更を適用する必要があります。  
> この場合、Docker Compose コマンドを実行する際に `docker-compose.dev.yml` 構成ファイルを含めることを忘れないでください。

参照：

- [CVAT.ai のグローバルロール](#global-roles-in-cvatai)
- [CVAT.ai の組織ロール](#organization-roles-in-cvatai)
- [ジョブステージ](#job-stage)

## CVAT.ai のグローバルロール

> **注意:** グローバルロールはセルフホスト型ソリューションでのみ調整可能です。

CVAT には、ユーザーグループとして分類される3つのグローバルロールがあります。各ロールは以下の通りです。

<!--lint disable maximum-line-length-->
| ロール | 説明 |
|--------|------|
| **管理者** | CVATインスタンスとその中のすべての活動に対する完全な管理権限を持ちます。すべてのタスクとプロジェクトの表示・管理・変更が可能です。このロールはセルフホスト型インスタンス専用で、包括的な監督と制御を提供します。 |
| **ユーザー** <br>（デフォルト） | CVATに登録したすべてのユーザーに自動的に割り当てられるデフォルトロールです。自身のアカウント内のタスクとプロジェクトを表示・管理できますが、一定の制限があります（フリープラン参照）。<br><br>* CVATアカウントを持たないユーザーが組織に招待された場合、自動的に組織ロールが付与され、組織内での操作にはそのロールの制限が適用されます。 |
| **ワーカー** | 機能が限定されており、タスクの作成やロールの割り当て、管理操作はできません。割り当てられた範囲内（ジョブのバリデーションやアノテーション）でのみコンテンツの閲覧や操作が可能です。 |

<!--lint enable maximum-line-length-->
## CVAT.ai の組織ロール

組織ロールは、
**CVAT組織** 内でのみ利用できます。

![組織ロール](/images/user-roles.png)

組織ロールは、ユーザーが組織に招待された際に割り当てられます。

![組織ロール](/images/org-roles.png)

CVATで利用可能なロールは以下の通りです。
| ロール | 説明 |
|--------|------|
| **オーナー** | - 組織の作成者に自動的に割り当てられるロール<br>- 最大限の権限を持ち、他のユーザーへの変更/再割り当て不可<br>- 組織プランの制限のみ適用<br>- ユーザーの招待とロール割り当てが可能 |
| **メンテナー** | - ユーザーの招待が可能<br>- タスク/ジョブの作成・更新が可能<br>- 組織内の全タスクの閲覧が可能<br>- クラウドストレージへの完全なアクセス権を保有<br>- メンバーとロールの変更が可能 |
| **スーパーバイザー** | - 管理職ロール<br>- ジョブ/タスク/プロジェクトの作成が可能<br>- 組織メンバーへの割り当てが可能<br>- メンバーの招待やロール変更は不可 |
| **ワーカー** | - アノテーション作業とレビューが主な役割<br>- 割り当てられたジョブのみアクセス可能<br>- 機能は限定的 |
## ジョブステージ

ジョブの**ステージ**は、どのチームメンバーにも割り当てることができます。

**ステージ**はロールではありません。

ジョブには、どのロールのユーザーでも**アサイン**でき、その**アサインされたユーザー**が、  
「アノテート」「バリデート」「承認」など、ステージ固有の作業を行います。

![ジョブステージ](/images/job-stage.png)

ジョブの**ステージ**には以下のものがあります。

<!--lint disable maximum-line-length-->
| ステージ | 説明 |
|---------|------|
| **アノテーション** | アノテーションツールを使用できます。担当ユーザーは割り当てられたジョブを閲覧・アノテーションできます。デフォルトでは、アノテーションステージのユーザーはエラーや問題を報告できません。 |
| **バリデーション** | 品質管理ツールを使用できます。担当ユーザーは割り当てられたジョブを閲覧し、検証や問題報告が可能です。デフォルトでは、バリデーションステージのユーザーはエラー修正やアノテーションはできません。 |
| **承認** | 追加の権限やインターフェースの変更はありません。ジョブを完了としてマークするだけです。 |

<!--lint enable maximum-line-length-->

**アサインされたユーザー**は、アノテーションインターフェースのツールバーから、割り当てられた**ステージ**固有の機能を切り替えることができます。

![ジョブステージの変更](/images/change-stage.png)

- **標準**: インターフェースを**アノテーション**モードに切り替えます。
- **レビュー**: インターフェースを**バリデーション**モードに切り替えます。

# コンテキスト画像


コンテキスト画像とは、主画像に関連するコンテキストや追加情報を提供するための補助的な画像です。

対象物についてのコンテキストを追加してアノテーションの精度を向上させるために使用します。

コンテキスト画像は2Dおよび3Dタスクで利用可能です。

参照：

- [フォルダ構成](#folder-structure)
- [データ形式](#data-format)
- [コンテキスト画像](#contextual-images)

## フォルダ構成

タスクにコンテキスト画像を追加するには、画像フォルダを整理する必要があります。

CVATにアーカイブをアップロードする前に、以下を行ってください：

1. アノテーション用画像が入ったフォルダ内に `related_images` フォルダを作成します。
2. `related_images` 内に、リンクしたい主画像と同じ名前のサブフォルダを作成します。
3. 手順2で作成したサブフォルダ内に、コンテキスト画像を配置します。
4. フォルダをアーカイブに追加します。
5. タスク作成。

## データ形式

2Dおよび3Dタスクのファイル構成例：

### 2Dタスク

```
root_directory/
├── image_1_to_be_annotated.jpg
├── image_2_to_be_annotated.jpg
├── related_images/
│   ├── image_1_to_be_annotated_jpg/
│   │   └── context_image_for_image_1.jpg
│   └── image_2_to_be_annotated_jpg/
│       └── context_image_for_image_2.jpg
└── subdirectory_example/
    ├── image_3_to_be_annotated.jpg
    └── related_images/
        └── image_3_to_be_annotated_jpg/
            └── context_image_for_image_3.jpg

```

### 3Dオプション1

```
root_directory/
├── pointcloud/
│   ├── image_1_to_be_annotated.pcd
│   └── image_2_to_be_annotated.pcd
└── related_images/
    ├── image_1_to_be_annotated_pcd/
    │   └── context_image_for_image_1.jpg
    └── image_2_to_be_annotated_pcd/
        └── context_image_for_image_2.jpg
```

### 3Dオプション2

```
any_directory/
├── pointcloud.pcd
└── pointcloud.jpg

any_other_directory/
└── any_subdirectory/
    ├── pointcloud.pcd
    └── pointcloud.png

```

### 3Dタスク KITTI形式

```
 image_00/
└── data/
    ├── 0000000000.png
    ├── 0000000001.png
    ├── 0000000002.png
    └── 0000000003.png
image_01/
└── data/
    ├── 0000000000.png
    ├── 0000000001.png
    ├── 0000000002.png
    └── 0000000003.png
image_02/
└── data/
    ├── 0000000000.png
    ├── 0000000001.png
    ├── 0000000002.png
    └── 0000000003.png
image_N/
└── data/
    ├── 0000000000.png
    ├── 0000000001.png
    ├── 0000000002.png
    └── 0000000003.png
velodyne_points/
└── data/
    ├── 0000000000.bin
    └── 0000000001.bin
```


- KITTIの場合：`image_00`、`image_01`、`image_02`、`image_N`
（ここで `N` は12以下の任意の数） はコンテキスト画像です。
- 3Dオプション3の場合：同名の.pcdファイルの近くに通常の画像ファイルが配置されていれば、それがコンテキスト画像と見なされます。

3Dデータ形式に関する一般的な情報については、
3Dデータ形式 を参照してください。

## コンテキスト画像

コンテキスト画像の最大数は12枚です。

デフォルトでは主画像の右側に配置されます。

> **注意:** デフォルトでは、3枚のコンテキスト画像のみが表示されます。

![contex_images_1](/images/context_img_01.jpg)

コンテキスト画像をセットに追加すると、
画面上部に小さなツールバーが表示され、以下の要素が含まれます：

<!--lint disable maximum-line-length-->

| 要素 | 説明 |
|------|------|
| ![contex_images_4](/images/context_img_04.jpg) | **ビューをフィット**<br>- レイアウトを元の状態に戻します<br>- 拡大された画像を元のサイズに戻します<br>- コンテキスト画像の表示数は変更されません |
| ![contex_images_5](/images/context_img_05.jpg) | **新しい画像を追加**<br>- クリックでコンテキスト画像をレイアウトに追加できます |
| ![contex_images_6](/images/context_img_06.jpg) | **レイアウトの再読み込み**<br>- レイアウトをデフォルト表示に戻します<br>- コンテキスト画像が3枚表示に戻ることがあります |

<!--lint enable maximum-line-length-->
各コンテキスト画像には以下の要素があります：

![contex_images_2](/images/context_img_02.jpg)

<!--lint disable maximum-line-length-->

| 要素 | 説明 |
|------|------|
| 1 | **全画面表示** - クリックでコンテキスト画像を全画面表示。再度クリックで通常表示に戻ります。 |
| 2 | **画像移動** - 長押しで画像を任意の場所にドラッグ可能。<p>![画像移動](/images/context_img_03.gif) |
| 3 | **画像名** - コンテキスト画像の一意の名前。 |
| 4 | **画像選択** - クリックで利用可能なコンテキスト画像の一覧を表示。クリックで選択できます。 |
| 5 | **削除** - クリックでコンテキスト画像をメニューから削除。 |
| 6 | **拡大** - 長押しで画像を拡大表示。 |

<!--lint enable maximum-line-length-->
---

title: 'データセットマニフェスト'
linkTitle: 'データセットマニフェスト'
weight: 30
description:

---

## 概要

CVATで新しいタスクを作成する際、入力データの取得元を指定する必要があります。
CVATは、ローカルファイルのアップロード、サーバー上のマウントされたファイル共有、クラウドストレージ、リモートURLなど、さまざまなデータソースに対応しています。場合によっては、CVATが入力データについて追加情報を必要とすることがあります。この情報はデータセットマニフェストファイルで提供することができます。これらは主にクラウドストレージ利用時のネットワークトラフィック削減やタスク作成の高速化のために使われます。
ただし、他の場合にも使用でき、その詳細は以下で説明します。

データセットマニフェストファイルはJSONL形式のテキストファイルです。これらのファイルは[専用のコマンドラインツール](https://github.com/cvat-ai/cvat/tree/develop/utils/dataset_manifest)で自動生成するか、[マニフェストファイルフォーマット仕様](#file-format)に従って手動で作成できます。

## マニフェストファイルの利用方法と利用タイミング

マニフェストファイルは以下の場合に利用できます：
- 動画ファイルまたは画像セットをデータソースとして使用し、キャッシュモードが有効になっている場合。詳細はこちら
- データがクラウドストレージに存在する場合。詳細はこちら
- `predefined` ファイルソート方式を指定している場合。
  詳細はこちら

### predefinedソート方式

使用するファイルソースにかかわらず、タスク設定で`predefined`ソート方式が選択されている場合、入力ファイルリスト内に`.jsonl`マニフェストファイルが見つかれば、その順序に従ってソースファイルが並びます。
マニフェストが見つからない場合は、入力ファイルリストで指定された順序が使用されます。

画像アーカイブ（例：`.zip`）で`predefined`ファイル順序を使う場合、マニフェストファイル（`*.jsonl`）が必須です。マニフェストファイルはアーカイブの隣に、入力ファイルリスト上で提供する必要があり、アーカイブ内には含めないでください。

入力ファイルリストに複数のマニフェストファイルが存在する場合はエラーとなります。

## マニフェストファイルの生成方法

CVATはマニフェストファイル生成専用のPythonツールを提供しています。
ソースコードは[こちら](https://github.com/cvat-ai/cvat/tree/develop/utils/dataset_manifest)にあります。

このツールを使ってマニフェストファイルを作成するのが推奨されます。データはツールからローカルでアクセス可能である必要があります。

### 使用方法

```bash
usage: create.py [-h] [--force] [--output-dir .] source

positional arguments:
  source                ソースパス

optional arguments:
  -h, --help            このヘルプメッセージを表示して終了
  --force               デフォルトで動画が要件を満たさず、マニフェストファイルが準備されない場合、このフラグで動画データのマニフェストファイルを強制生成
  --output-dir OUTPUT_DIR
                        マニフェストファイルの保存先ディレクトリ
```

### Dockerイメージからスクリプトを実行する

これが推奨される利用方法です。

スクリプトは`cvat/server`イメージから利用できます：

```bash
docker run -it --rm -u "$(id -u)":"$(id -g)" \
  -v "${PWD}":"/local" \
  --entrypoint python3 \
  cvat/server \
  utils/dataset_manifest/create.py --output-dir /local /local/<path/to/sources>
```

ファイルの場所に合わせてコマンドを適宜修正してください。

### スクリプトを直接利用する

#### Ubuntu 20.04

依存関係のインストール：

```bash

# 一般
sudo apt-get update && sudo apt-get --no-install-recommends install -y \
    python3-dev python3-pip python3-venv pkg-config
```

```bash

# ライブラリコンポーネント
sudo apt-get install --no-install-recommends -y \
    libavformat-dev libavcodec-dev libavdevice-dev \
    libavutil-dev libswscale-dev libswresample-dev libavfilter-dev
```

環境を作成し、必要なpythonモジュールをインストール：

```bash
python3 -m venv .env
. .env/bin/activate
pip install -U pip
pip install -r utils/dataset_manifest/requirements.in
```

> この方法で動画に使う場合、サーバーがデコードした結果と異なる場合があります。これはffmpegライブラリのバージョンによるものです。そのため、Dockerベースのツール利用が推奨されます。

### 使用例

十分なキーフレームを含む動画のデータセットマニフェストを現在のディレクトリに作成：

```bash
python utils/dataset_manifest/create.py ~/Documents/video.mp4
```

キーフレームが十分でない動画のデータセットマニフェストを作成：

```bash
python utils/dataset_manifest/create.py --force --output-dir ~/Documents ~/Documents/video.mp4
```

画像のデータセットマニフェストを作成：

```bash
python utils/dataset_manifest/create.py --output-dir ~/Documents ~/Documents/images/
```

パターンを使ってデータセットマニフェストを作成（`*`、`?`、`[]`が利用可）：

```bash
python utils/dataset_manifest/create.py --output-dir ~/Documents "/home/${USER}/Documents/**/image*.jpeg"
```

Dockerイメージを使ってデータセットマニフェストを作成：

```bash
docker run -it --rm -u "$(id -u)":"$(id -g)" \
  -v ~/Documents/data/:${HOME}/manifest/:rw \
  --entrypoint '/usr/bin/bash' \
  cvat/server \
  utils/dataset_manifest/create.py --output-dir ~/manifest/ ~/manifest/images/
```

### ファイルフォーマット

データセットマニフェストファイルはJSONL形式のテキストファイルです。これらのファイルには2つのサブフォーマットがあります：
_動画用_ と _画像および3dデータ用_ です。

> 波括弧で囲まれた各トップレベルエントリは1つの文字列でなければならず、空文字列は禁止です。
> 下記の説明におけるフォーマットは説明用です。

#### 動画用データセットマニフェスト

このファイルは1つの動画を記述します。

`pts` - フレームがユーザーに表示されるべき時刻  
`checksum` - 特定の画像/フレームをデコードしたMD5ハッシュ値

```json
{ "version": <string, バージョンID> }
{ "type": "video" }
{ "properties": {
  "name": <string, ファイル名>,
  "resolution": [<int, 幅>, <int, 高さ>],
  "length": <int, フレーム数>
}}
{
  "number": <int, フレーム番号>,
  "pts": <int, フレームpts>,
  "checksum": <string, MD5フレームハッシュ>
} （繰り返し可能）
```

#### 画像および他データ形式用データセットマニフェスト

このファイルは順序付きの画像や3D点群を記述します。

`name` - ファイルのベース名とデータセットルートからのディレクトリ  
`checksum` - 特定の画像/フレームをデコードしたMD5ハッシュ値

```json
{ "version": <string, バージョンID> }
{ "type": "images" }
{
  "name": <string, 画像ファイル名>,
  "extension": <string, .+ファイル拡張子>,
  "width": <int, 幅>,
  "height": <int, 高さ>,
  "meta": <dict, オプション>,
  "checksum": <string, MD5ハッシュ, オプション>
} （繰り返し可能）
```

### ファイル例

#### 動画のマニフェスト

```json
{"version":"1.0"}
{"type":"video"}
{"properties":{"name":"video.mp4","resolution":[1280,720],"length":778}}
{"number":0,"pts":0,"checksum":"17bb40d76887b56fe8213c6fded3d540"}
{"number":135,"pts":486000,"checksum":"9da9b4d42c1206d71bf17a7070a05847"}
{"number":270,"pts":972000,"checksum":"a1c3a61814f9b58b00a795fa18bb6d3e"}
{"number":405,"pts":1458000,"checksum":"18c0803b3cc1aa62ac75b112439d2b62"}
{"number":540,"pts":1944000,"checksum":"4551ecea0f80e95a6c32c32e70cac59e"}
{"number":675,"pts":2430000,"checksum":"0e72faf67e5218c70b506445ac91cdd7"}
```

#### 画像データセットのマニフェスト

```json
{"version":"1.0"}
{"type":"images"}
{"name":"image1","extension":".jpg","width":720,"height":405,"meta":{"related_images":[]},"checksum":"548918ec4b56132a5cff1d4acabe9947"}
{"name":"image2","extension":".jpg","width":183,"height":275,"meta":{"related_images":[]},"checksum":"4b4eefd03cc6a45c1c068b98477fb639"}
{"name":"image3","extension":".jpg","width":301,"height":167,"meta":{"related_images":[]},"checksum":"0e454a6f4a13d56c82890c98be063663"}
```

# 単一シェイプ


CVATの単一シェイプアノテーションモードは、特定のシナリオでアノテーション作業を加速し、ワークフロー効率を高めます。

このモードを使用することで、画像に1つだけオブジェクトが含まれている場合に、選択したアノテーションシェイプとラベルで素早くラベリングできます。サイドバーからツールを選択する必要がなくなり、ホットキーに頼らずに画像間を素早く移動できるため、アノテーション作業が大幅に高速化されます。

参照:

- [単一シェイプモードのアノテーションインターフェース](#single-shape-mode-annotation-interface)
- [単一シェイプモードでのアノテーション方法](#annotating-in-single-shape-mode)
- [クエリパラメータ](#query-parameters)
- [ビデオチュートリアル](#video-tutorial)

## 単一シェイプモードのアノテーションインターフェース

**単一シェイプ**アノテーションモードのインターフェースにあるコントロールのセットは、設定によって異なる場合があります。

下記の画像は、すべての利用可能な項目を備えた完全なインターフェースを表示しています。
前述の通り、シナリオによっては一部の項目が表示されない場合があります。

例えば、長方形でアノテーションする場合は**点数**のフィールドが表示されず、単一クラスでアノテーションする場合は**ラベルセレクター**が省略されます。

**単一シェイプ**モードにアクセスするには、ジョブを開き、右上隅のドロップダウンメニューから**単一シェイプ**を選択します。

![単一シェイプアノテーションモードインターフェース](/images/single-shape-interface.png)

ラベル**コンストラクター**でシェイプタイプを**Any**に設定した場合は、インターフェースが異なります。

![単一シェイプアノテーションモードインターフェース](/images/single-shape-label-any.jpg)

**単一シェイプ**アノテーションモードには、次の項目があります。

<!--lint disable maximum-line-length-->

| 機能                              | 説明                                                                                                                                                                                                                                                                                                                                                                                                                            |
| --------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **シェイプ・ラベルのプロンプト**   | 選択したシェイプとラベルを表示します。例：「画像の**猫**を**長方形**でアノテーションしてください」など。                                                                                                                                                                                                                                                                                                                     |
| **スキップボタン**                 | 現在のフレームをアノテーションせずに次のフレームへ移動します。アノテーション対象がない場合に特に便利です。                                                                                                                                                                                                                                                                                                                     |
| **ヒント一覧**                     | インターフェースの効果的な利用方法を案内します。<br>・必要なアノテーションがないフレームでは**スキップ**をクリック。<br>・**Alt**ボタンを押しながらで誤描画防止（画像のみを移動したい場合など）。<br>・**Ctrl+Z**で直前の操作を取り消し。<br>・**Esc**で現在の描画進捗を完全リセット。                                                                                                         |
| **ラベルセレクター**               | インターフェース上で異なるラベル（例：`猫`や`犬`）を選択できます。                                                                                                                                                                                                                                                                                                                                                           |
| **ラベルタイプセレクター**         | ラベルタイプ（長方形、楕円など）を選択するドロップダウンリスト。シェイプタイプが**Any**の場合のみ表示されます。                                                                                                                                                                                                                                                                                                              |
| **有効・無効にするオプション**     | アノテーション作業を効率化するオプションを設定できます。<br>・**自動で次のフレームへ移動**<br>・**完了時に自動保存**<br>・**空フレームのみを表示**<br>・**事前に点数を指定**…多角形アノテーション用。これを有効にすると、指定した点数に達した時点で自動的にシェイプが確定します。無効の場合は**N**キーでシェイプを確定します。                                      |
| **点数**                           | 多角形アノテーション用。画像アノテーション時に必要な点の数を設定します。                                                                                                                                                                                                                                                                                                                                                       |

<!--lint enable maximum-line-length-->

## 単一シェイプモードでのアノテーション方法

単一シェイプモードでアノテーションするには次の手順に従います。

1. ジョブを開いて**単一シェイプ**モードに切り替えます。
2. 選択したシェイプで画像をアノテーションします。
   シェイプについての詳細は[アノテーションツール](http://localhost:1313/docs/getting_started/overview/#annotation-tools)をご参照ください。
3. （任意）アノテーション対象がない場合は右パネル上部の**スキップ**をクリックします。
4. 作業を送信します。

## クエリパラメータ

また、アノテーション作業の初期化やワークフロー自動化のために、ジョブリンクに追加できるクエリパラメータを導入しています。

<!--lint disable maximum-line-length-->

| クエリパラメータ      | 値の例                                                               | 説明                                                                                   |
| -------------------- | -------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |
| `defaultWorkspace`   | ワークスペース識別子（例：`single_shape`, `tags`, `review`, `attributes`） | 初期状態で使用するワークスペースを指定し、様々なアノテーション作業のセットアップを効率化。 |
| `defaultLabel`       | ラベル名の文字列                                                     | アノテーションセッションのデフォルトラベルを設定し、同種タスク間の一貫性を確保します。   |
| `defaultPointsCount` | 多角形用の点数（整数値）                                             | 多角形アノテーションで使用する点数をあらかじめ設定し、作業効率を最適化します。           |

<!--lint enable maximum-line-length-->

これらのパラメータを組み合わせて、アノテーター向けのワークスペースをカスタマイズできます。例：

```
/tasks/<tid>/jobs/<jid>?defaultWorkspace=single_shape&defaultLabel=dog&defaultPointsCount=10
```

このようなジョブが開きます。

![クエリ例](/images/query-example.png)

## ビデオチュートリアル

単一シェイプモードの動作をさらに理解するために、次のチュートリアル動画の視聴をおすすめします。

<!--lint disable maximum-line-length-->

<iframe width="560" height="315" src="https://www.youtube.com/embed/u17OXSD7Y4U?si=4z-f52lbxe0CpZEg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<!--lint enable maximum-line-length-->

# シェイプモード（上級）


このモードの基本操作については
シェイプモード（基本）
のセクションで説明しています。

**オクルード（遮蔽）**
オクルージョンは、ある物体が他の物体によって遮られていたり、
フレーム上で完全に見えていない場合に使用する属性です。`Q` ショートカットを使うと
素早くこの属性を設定できます。

![](/images/image065.jpg)

例：下図の3台の車は**オクルード**としてラベル付けする必要があります。

![](/images/image054_mapillary_vistas.jpg)

フレーム内に非常に多くの物体があり、主に同じ場所に多くのシェイプが配置されていて
アノテーションが難しい場合、それらをロックするのが有効です。
ロックされたオブジェクトのシェイプは半透明になり、新しいオブジェクトの
アノテーションが簡単になります。また、既にアノテーション済みのオブジェクトを
誤って変更してしまうこともありません。ショートカット：`L`

![](/images/image066.jpg)

# 組織


**組織**は、複数のユーザーがチームとしてプロジェクトに取り組み、タスクを共有するための機能です。

**組織**を作成し、チームメンバーを招待して、役割を割り当てることで、チームの共同作業を効率化できます。

参照:

- [個人ワークスペース](#personal-workspace)
- [新しい組織の作成](#create-new-organization)
  - [組織間の切り替え](#switching-between-organizations)
- [組織ページ](#organization-page)
- [組織へのメンバー招待：メニューと役割](#invite-members-into-organization-menu-and-roles)
  - [組織へのメンバー招待](#inviting-members-to-organization)
  - [招待リスト](#invitations-list)
  - [招待の再送・削除](#resending-and-removing-invitations)
- [組織の削除](#delete-organization)

## 個人ワークスペース

**組織**が選択されていない場合、アカウントのデフォルト状態が有効になります。

**組織**を選択しない場合、新しいリソースはすべてあなたの個人アカウントに直接紐づけられ、他者とリソースを共有できなくなります。

**個人ワークスペース**が選択されている場合、メニューにチェックマークが表示されます。

![](/images/user_menu_organization.png)

## 新しい組織の作成

組織を作成するには、以下の手順に従ってください。

1. CVATにログインします。
2. 上部メニューで**ユーザー名** > **組織** > **+ 作成**をクリックします。

   ![](/images/user_menu_organization_create.png)

3. 次の項目を入力し、**送信**をクリックします。

   ![](/images/create_organization_form.png)

<!--lint disable maximum-line-length-->

| 項目                | 説明                                                                                  |
| ------------------- | ------------------------------------------------------------------------------------ |
| **短縮名**          | CVATメニューに表示される組織名。                                                     |
| **正式名称**        | 任意。組織の正式名称。                                                               |
| **説明**            | 任意。組織の説明。                                                                   |
| **メールアドレス**  | 任意。あなたのメールアドレス。                                                       |
| **電話番号**        | 任意。あなたの電話番号。                                                             |
| **所在地**          | 任意。組織の住所。                                                                   |

<!--lint enable maximum-line-length-->

作成後、自動的に組織ページが開きます。

今後、組織にアクセスするには、**ユーザー名** > **組織**を選択してください。

### 組織間の切り替え

複数の**組織**がある場合、いつでもそれらの**組織**間を切り替えることができます。

手順:

1. 上部メニューで**ユーザー名** > **組織**を選択します。
2. ドロップダウンメニューの**個人スペース**セクションから、
   希望する**組織**を選択します。

![](/images/user_menu_select_org.png)

> **注意**: 10個以上の組織を作成した場合は、
> ドロップダウンメニューに**組織を切り替える**項目が表示されます。

![](/images/switch_org.png)

クリックすると**組織選択**ダイアログが表示され、リストから組織を選択できます。

![](/images/select_org.png)

## 組織ページ

**組織ページ**は、**組織**情報の編集や**組織**メンバーの管理を行う場所です。

![](/images/org_page.png)

> **注意**: 組織ページにアクセスするには、まず組織を有効化する必要があります（[組織間の切り替え](#switching-between-organizations)を参照）。
> 有効化しない場合、組織ページにアクセスできません。
> <br>組織がドロップダウンメニューでチェックされ、ユーザー名の下の右上に組織名が表示されているとき、有効化されています。

**組織ページ**に移動するには、以下の手順を行ってください。

1. 上部メニューで**ユーザー名** > **組織**をクリックします。
2. ドロップダウンメニューから**組織**を選択します。
3. ドロップダウンメニューで**設定**をクリックします。

![](/images/org_page_steps.png)

## 組織へのメンバー招待：メニューと役割

メンバー招待フォームは、[組織ページ](#organization-page)から利用できます。

以下の項目があります。

![](/images/invite_org_members.png)

<!--lint disable maximum-line-length-->

| 項目                  | 説明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| --------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **メールアドレス**    | **組織**に追加するユーザーのメールアドレスを指定します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 役割ドロップダウンリスト | ユーザーの役割を定義します。これにより**組織**内でのアクセスレベルが決まります。 <br><li>**作業者**：割り当てられたタスク、プロジェクト、ジョブのみアクセス可能。<li>**監督者**：ジョブ、タスク、プロジェクトを作成・割り当て可能。<li>**管理者**：監督者と同じ権限に加え、他のメンバーが作成したすべてのタスク・プロジェクトへの可視性、**クラウドストレージ**の完全アクセス、メンバーや役割の変更が可能。<li>**オーナー**：組織の作成者に自動的に割り当てられる役割。最大の権限を持ち、他のユーザーに変更・割り当て不可。|
| **さらに招待**        | **組織**に他のユーザーを追加するボタン。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

<!--lint enable maximum-line-length-->

**組織**のメンバーは**組織ページ**に表示されます。

![](/images/org_members.png)

組織メンバーは**組織ページ** > **組織を退出**から組織を離れることができます。

組織オーナーは、**ゴミ箱**アイコンをクリックしてメンバーを削除できます。

### 組織へのメンバー招待

**組織**にメンバーを招待するには、以下の手順を行います。

1. [**組織ページ**](#organization-page)に移動し、**メンバーを招待**をクリックします。
2. フォームに入力します（下図参照）。

   ![](/images/org_invite_form.png)

3. **OK**をクリックします。
4. 招待された人にはリンク付きのメールが送られます。

   ![](/images/invitation_to_org.png)

5. 招待者はリンクをクリックし、以下を行います。
   1. CVATアカウントを持っていない場合は、**アカウントを作成**します。
   2. CVATアカウントをすでに持っている場合は、ログインします。

### 招待リスト

ユーザーは有効な招待リストを確認できます。

リストを見るには、**ユーザー名** > **組織** > **招待**を選択します。

![](/images/invitations_list.png)

招待一覧ページが表示されます。

また、招待リストページへのリンク付きのポップアップ通知も表示されます。

### 招待の再送・削除

組織のオーナーおよび管理者は、三点リーダーをクリックし、**招待を削除**を選択することで、メンバーを削除できます。

![](/images/resend_remove_invitation.png)

## 組織の削除

作成した組織は削除できます。

> **注意**: 組織を削除すると、関連するすべてのリソース（アノテーション、ジョブ、タスク、プロジェクト、クラウドストレージなど）が削除されます。

組織を削除するには、以下の手順を行ってください。

1. **組織ページ**に移動します。
2. 右上の**アクション** > **組織を削除**をクリックします。
3. ダイアログ欄に組織の短縮名を入力します。
4. **削除**をクリックします。

# 上級

# 手動描画


これはセマンティック／インスタンスセグメンテーションに使用されます。

開始する前に、コントロールサイドバーで `Polygon` を選択し、正しいラベルを選んでください。

![](/images/image084.jpg)

- `Shape` をクリックすると描画モードに入ります。
  ポリゴンを描く方法は2つあります：クリックしてポイントを作成するか、
  `Shift` を押しながら画面上でマウスをドラッグします。

| ポイントをクリックして描画      | Shift押しながらドラッグして描画      |
| ------------------------------ | ------------------------------ |
| ![](/images/gif005_detrac.gif) | ![](/images/gif006_detrac.gif) |

- `Shift` を押していない場合、マウスホイールをスクロールしてズームイン／アウトしたり、
  マウスホイールをクリックしてマウスを動かすことで移動できます。また、ポイントを右クリックすると前のポイントを削除できます。
- `Objects sidebar` の `Selected opacity` スライダーを使ってポリゴンの不透明度を変更できます。
  詳細は
  Objects sidebar
  セクションを参照してください。
- `N` をもう一度押すか、上部パネルの `Done` ボタンをクリックしてシェイプを完成させます。
- ポリゴン作成後、ポイントを移動したり、右クリックして `Delete point` を選択するか、コンテキストメニューで `Alt` キーを押しながらクリックしてポイントを削除できます。

# マスクの作成


### ポリゴンに穴を開ける

現在、CVATではポリゴンに透明な穴を開けることはサポートされていません。しかし、エクスポートされたインスタンスマスクやクラスマスクで穴を生成することは可能です。そのためには、タスクに背景クラスを定義し、穴を開けたい形状の上に追加の形状として背景クラスで穴を描画します。

エディターウィンドウ:

  ![エディター](/images/mask_export_example1_editor.png)

図形のz軸順序を設定するには、[\-] や [\+, =] キーを使用してください。

エクスポートされたマスク:

  ![クラスマスク](/images/mask_export_example1_cls_mask.png)  ![インスタンスマスク](/images/mask_export_example1_inst_mask.png)

現在、内部形状に対して単一のインスタンス番号を持つことはできません（それらは最大の一つに統合され、その後「穴」で覆われます）。

### マスクの作成

CVATでは、マスクをエクスポートするためにいくつかのフォーマットが使用できます。
- `Segmentation Mask`（PASCAL VOCマスク）
- `CamVid`
- `MOTS`
- `ICDAR`
- `COCO`（RLEエンコードされたインスタンスマスク、ガイド)
- `Datumaro`

エクスポートされたマスク（`Segmentation Mask`形式）の例:

  ![クラスマスク](/images/exported_cls_masks_example.png) ![インスタンスマスク](/images/exported_inst_masks_example.png)

重要な注意点:
- ボックスもポリゴンもマスクに変換されます
- グループ化されたオブジェクトは単一のインスタンスとみなされ、単一のマスクとしてエクスポートされます（ラベルと属性はグループ内で最大のオブジェクトから取得されます）

#### クラスカラー

すべてのラベルには関連付けられた色があり、生成されたマスクで使用されます。これらの色はタスクのラベルプロパティで変更できます。

  ![](/images/label_color_picker.jpg)

ラベルカラーは、右側のパネルにあるアノテーションウィンドウにも表示され、特定のラベルを表示または非表示にできます
（表示されているラベルのみが表示されます）:

  ![](/images/label_panel_anno_window.jpg)

背景クラスには以下が利用できます:
- 暗黙的に追加されるデフォルトクラス（黒色、RGB 0, 0, 0）
- 任意の色の `background` クラス（優先され、名前の大文字小文字は区別されません）
- 黒色（RGB 0, 0, 0）の任意のクラス

生成されるマスクの背景色を変更するには（デフォルトは黒）、`background` クラスの色を希望の色に変更してください。

# 自動境界を使用した描画

![](/images/gif025_mapillary_vistas.gif)

ポリゴンを描画する際に自動境界を使用できます。自動境界を使用すると、アノテーション内に存在するポリゴンの輪郭を自動的にトレースすることができます。

- これを行うには、設定 -> ワークスペースタブに移動し、`自動境界`を有効にするか、ポリゴンを描画中に`Ctrl`キーを押します。

  ![](/images/image161.jpg)

- ポリゴンの描画／編集を開始します。
- 他の図形のポイントがハイライトされ、ポリゴンをそれらに接続できることを示します。
- 繰り返したいポリゴン経路の部分を指定します。

  ![](/images/image157_mapillary_vistas.jpg)

- 輪郭部分の最初のポイントをクリックします。

  ![](/images/image158_mapillary_vistas.jpg)

- 次に、経路部分上の任意のポイントをクリックします。選択したポイントが紫色でハイライトされます。

  ![](/images/image159_mapillary_vistas.jpg)

- 最後のポイントをクリックすると、そのポイントまでの輪郭が自動的に作成されます。

  ![](/images/image160_mapillary_vistas.jpg)

また、`ポイント数`欄に固定のポイント数を設定することもでき、描画は自動的に終了します。ドラッグを有効にするには、ポリゴン内で右クリックし、`ピン留めプロパティを切り替え`を選択してください。

下記は不透明度と黒いストロークを設定した結果の例です：

![](/images/image064_mapillary_vistas.jpg)

小さなオブジェクトをアノテーションする必要がある場合は、利便性のため`タスク作成`ダイアログの`画像品質`を`95`に上げてください。

# ポリゴンの編集

ポリゴンを編集するには、`Shift`キーを押しながらポリゴンをクリックします。すると、ポリゴンエディタが開きます。

- エディタ内では、新しいポイントの作成や、他のポイントで線を閉じることでポリゴンの一部を削除できます。
- 設定で`インテリジェントポリゴンクロッピング`オプションが有効になっている場合、
  CVATは自動編集時にポリゴンのどの部分を切り取るかを決定するため、2つの基準を考慮します。
  - 1つ目の基準は、カットポイントの数です。
  - 2つ目の基準は、カットする曲線の長さです。

  両方の基準が同じ部分の切り取りを推奨した場合、アルゴリズムは自動で動作します。
  そうでない場合は、ユーザーが決定する必要があります。
  どの部分を手動で切り取るか選択したい場合は、設定で`インテリジェントポリゴンクロッピング`を無効にしてください。
  この場合、ポリゴンを閉じた後、残したい部分を選択できます。

  ![](/images/image209.jpg)

- 編集をキャンセルするには、`Esc`キーを押してください。

  ![](/images/gif007_mapillary_vistas.gif)

# ポリゴンによるトラックモード


トラックモードでポリゴンを使用すると、矩形を使う場合よりも動く物体をより正確にマーキングすることができます
（トラックモード（基本）
トラックモード（応用））。

1. トラックモードでポリゴンを作成するには、`Track`ボタンをクリックします。

   ![](/images/image184.jpg)

1. ポリゴンでのアノテーションと同じ方法でポリゴンを作成します。
   ポリゴンの作成を完了するには、`N`キーを押すか、上部パネルの`Done`ボタンをクリックします。

1. 作成したポリゴンには始点と方向があることに注意してください。
   これらの要素は、次のフレームのアノテーションにおいて重要です。

1. 数フレーム進めた後、`Shift+N`を押すと、以前のポリゴンが消え、新しいポリゴンを作成できます。
   新しい始点は、以前に作成したポリゴンの始点と一致させてください
   （この例では、左側ミラーの上部）。方向も一致させてください（この例では時計回り）。
   ポリゴンを作成後、`N`を押すと、中間フレームは自動的に補間されます。

   ![](/images/image185_detrac.jpg)

1. 始点を変更したい場合は、目的のポイントを右クリックし、「Set starting point（始点を設定）」を選択します。
   方向を変更するには、目的のポイントを右クリックし、「switch orientation（方向を切替）」を選択します。

   ![](/images/image186_detrac.jpg)

毎回`Shift+N`でポリゴンを描き直す必要はありません。
代わりに、ポイントを単純に移動したり、`Shift+Click`でポリゴンの一部を編集したりできます。

# ポリゴンによるアノテーション


# LFW


Labeled Faces in the Wild（LFW）フォーマットは、
主に顔認証・顔認識タスクで使用されます。
LFWフォーマットはシンプルに設計されており、
さまざまな機械学習やディープラーニングのフレームワークと互換性があります。

詳細については、以下を参照してください：

- [LFWサイト](http://vis-www.cs.umass.edu/lfw/)
- [フォーマット仕様](http://vis-www.cs.umass.edu/lfw/README.txt)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/lfw_dataset)


# LFWアノテーションのエクスポート

画像のエクスポートについて：

- サポートされているアノテーション：タグ、スケルトン
- 属性：

  - `negative_pairs`（ラベルに`text`として定義する必要があります）：
    異なる人物の画像名のリスト
  - `positive_pairs`（ラベルに`text`として定義する必要があります）：
    同一人物の画像名のリスト

- トラック：未対応

ダウンロードされるファイルは、以下の構造を持つ.zipアーカイブです：

```bash
<archive_name>.zip/
    └── images/ # 画像を保存するオプションを選択した場合
    │    ├── name1/
    │    │   ├── name1_0001.jpg
    │    │   ├── name1_0002.jpg
    │    │   ├── ...
    │    ├── name2/
    │    │   ├── name2_0001.jpg
    │    │   ├── name2_0002.jpg
    │    │   ├── ...
    │    ├── ...
    ├── landmarks.txt
    ├── pairs.txt
    └── people.txt
```


# LFWアノテーションのインポート

アップロードするアノテーションファイルは、次の構造のzipファイルである必要があります：

```bash
<archive_name>.zip/
    └── annotations/
        ├── landmarks.txt # 各画像のランドマーク点のリスト
        ├── pairs.txt # 同一・異なる人物ペアのリスト
        └── people.txt # （オプション）人物名のリスト
```

アノテーションファイルの内容についての詳細は
[こちら](http://vis-www.cs.umass.edu/lfw/README.txt)で確認できます。


# 例：画像付きタスクを作成し、LFWアノテーションをアップロードする

これは、タスクを作成してLFWアノテーションを追加する方法の一例です。

- タスク作成ページで：
  - 人物名に対応するラベルを追加します。
  - 各ラベルに`positive_pairs`および
    `negative_pairs`という名前の`text`属性を定義します。
  - ローカルリポジトリのzipアーカイブを使って画像を追加します：

```bash
images.zip/
    ├── name1_0001.jpg
    ├── name1_0002.jpg
    ├── ...
    ├── name1_<N>.jpg
    ├── name2_0001.jpg
    ├── ...
```

- アノテーションページで：
  アノテーションのアップロード → LFW 1.0 → [インポートセクション](#import-lfw-annotation)で説明されている構造のアーカイブを選択します。
  

# MOT
  

MOT（Multiple Object Tracking）シーケンス形式は、特に歩行者追跡や車両追跡などのマルチオブジェクトトラッキングアルゴリズムの評価で広く使用されています。
MOTシーケンス形式には、本質的にビデオのフレームと、時間を通じてオブジェクトの位置と識別子を指定するアノテーションが含まれています。

詳細については、以下を参照してください：

- [MOTシーケンス論文](https://arxiv.org/pdf/1906.04567.pdf)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/mot_dataset)

## MOTエクスポート

画像および動画のエクスポートについて：

- 対応アノテーション：バウンディングボックス
- 属性：`visibility`（数値）, `ignored`（チェックボックス）
- トラック：対応

ダウンロードされるファイルは、以下の構造を持つ.zipアーカイブです：

```bash
taskname.zip/
├── img1/
|   ├── image1.jpg
|   └── image2.jpg
└── gt/
    ├── labels.txt
    └── gt.txt


# labels.txt
cat
dog
person
...


# gt.txt

# frame_id, track_id, x, y, w, h, "not ignored", class_id, visibility, <skipped>
1,1,1363,569,103,241,1,1,0.86014
...

```

## MOTインポート

アップロードするファイル：上記構造のzipアーカイブ、または：

```bash
archive.zip/
└── gt/
    └── gt.txt
    └── labels.txt # オプション、非公式ラベルの場合は必須
```

- 対応アノテーション：矩形トラック

# Wider Face


WIDER Faceデータセットは、顔検出タスクで広く使用されています。
物体検出や特に顔検出のための多くの人気モデルが、
このデータセットでベンチマークやデプロイメントのためにトレーニングされています。

詳細については、以下を参照してください:

- [WIDER Face仕様](http://shuoyang1213.me/WIDERFACE/)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/widerface_dataset)

## WIDER Faceエクスポート

画像のエクスポートについて:

- 対応アノテーション: バウンディングボックス（属性付き）、タグ
- 属性:
  - `blur`, `expression`, `illumination`, `pose`, `invalid`
  - `occluded`（アノテーションプロパティおよび属性の両方）
- トラック: 非対応

ダウンロードされるファイルは、以下の構造の.zipアーカイブです:

```bash
taskname.zip/
├── labels.txt # 任意
├── wider_face_split/
│   └── wider_face_<any_subset_name>_bbx_gt.txt
└── WIDER_<any_subset_name>/
    └── images/
        ├── 0--label0/
        │   └── 0_label0_image1.jpg
        └── 1--label1/
            └── 1_label1_image2.jpg
```

## WIDER Faceインポート

アップロードされるファイル: 上記構造のzipアーカイブ

- 対応アノテーション: 長方形（属性付き）、ラベル
- 対応属性:
  - `blur`, `expression`, `illumination`, `occluded`, `pose`, `invalid`

# Ultralytics-YOLO-分類
  

詳細については、以下を参照してください：

- [フォーマット仕様](https://docs.ultralytics.com/datasets/classify/)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/develop/tests/assets/yolo_dataset/yolo_ultralytics_classification)

## Ultralytics YOLO分類のエクスポート

画像のエクスポートの場合：

- 対応しているアノテーション：タグ
- 属性：非対応
- トラック：非対応

ダウンロードされるファイルは、以下の構造を持つ.zipアーカイブです：

```bash
archive.zip/
├── train
│    ├── labels.json  # CVAT拡張。元のIDとラベルを含む
│    │                # YOLOv8フレームワークでデータセットを使用する場合は不要
│    │                # だが、CVATに再インポートする際に便利
│    ├── label_0
│    │      ├── <image_name_0>.jpg
│    │      ├── <image_name_1>.jpg
│    │      ├── <image_name_2>.jpg
│    │      ├── ...
│    ├── label_1
│    │      ├── <image_name_0>.jpg
│    │      ├── <image_name_1>.jpg
│    │      ├── <image_name_2>.jpg
│    │      ├── ...
├── ...
```

# CVAT for image


これはCVATのネイティブなアノテーション形式であり、
CVATのすべてのアノテーション機能を完全にサポートしています。
データのバックアップ作成に最適です。

詳細は以下を参照してください：

- フォーマット仕様
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/cvat_dataset)

## CVAT for image エクスポート

2Dのすべてのコンピュータビジョンタスクに
適用可能ですが、ビデオトラッキングは除きます。

画像のエクスポートの場合：

- サポートされているアノテーション：バウンディングボックス、ポリゴン、ポリライン、
  ポイント、キューボイド、楕円、スケルトン、タグ、マスク。
- 属性：サポートされています。
- トラック：エクスポート可能ですが、トラックIDは失われます。

ダウンロードされたファイルは、以下の構造を持つzipアーカイブです：

```bash
taskname.zip/
├── images/
|   ├── img1.png
|   └── img2.jpg
└── annotations.xml
```

## CVAT for video エクスポート

2Dのすべてのコンピュータビジョンタスクに適用可能ですが、
分類タスクは除きます。

画像のエクスポートの場合：

- サポートされているアノテーション：バウンディングボックス、ポリゴン、ポリライン、
  ポイント、キューボイド、楕円、スケルトン、マスク。
- 属性：サポートされています。
- トラック：サポートされています（トラックはフレームごとに分割されます）。
- シェイプは単一フレームのトラックとしてエクスポートされます。

ダウンロードされたファイルは、以下の構造を持つzipアーカイブです：

```bash
taskname.zip/
├── images/
|   ├── frame_000000.png
|   └── frame_000001.png
└── annotations.xml
```

## CVATローダー

アップロードするファイルは、前述の構造を持つ
XMLファイルまたは.zipファイルのいずれかです。

# LabelMe


LabelMe形式は、コンピュータビジョンにおける画像セグメンテーションタスクでよく使用されます。
特定のモデルに特化しているわけではありませんが、
汎用性が高く、TensorFlowやPyTorchなどの
一般的なフレームワークに対応した形式へ簡単に変換できます。

詳細については、以下を参照してください：

- [LabelMe](http://labelme.csail.mit.edu/Release3.0)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/labelme_dataset)

## LabelMeエクスポート

画像のエクスポートについて：

- 対応アノテーション：バウンディングボックス、ポリゴン
- 属性：ポリゴンに対応
- トラック：非対応

ダウンロードされるファイルは、以下の構造の.zipアーカイブです：

```bash
taskname.zip/
├── img1.jpg
└── img1.xml
```

## LabelMeインポート

アップロードファイル：以下の構造のzipアーカイブ

```bash
taskname.zip/
├── Masks/
|   ├── img1_mask1.png
|   └── img1_mask2.png
├── img1.xml
├── img2.xml
└── img3.xml
```

- 対応アノテーション：矩形、ポリゴン、マスク（ポリゴンとして）

# MOTS


MOT（Multiple Object Tracking：複数物体追跡）シーケンスフォーマットは、主に歩行者追跡や車両追跡などのマルチオブジェクトトラッキングアルゴリズムの評価で広く使用されています。  
MOTシーケンスフォーマットは、本質的にビデオフレームと、時間経過に伴う物体の位置とIDを指定するアノテーションを含みます。

このバージョンは.png形式でエンコードされています。マスクに対応しています。

詳細については、以下を参照してください。

- [MOTS PNG仕様](https://www.vision.rwth-aachen.de/page/mots)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/mots_dataset)

## MOTS PNGエクスポート

画像および動画のエクスポートについて：

- 対応アノテーション：バウンディングボックス、マスク
- 属性：`visibility`（数値）、`ignored`（チェックボックス）
- トラック：対応

ダウンロードされるファイルは、以下の構造を持つ.zipアーカイブです。

```bash
taskname.zip/
└── <any_subset_name>/
    |   images/
    |   ├── image1.jpg
    |   └── image2.jpg
    └── instances/
        ├── labels.txt
        ├── image1.png
        └── image2.png


# labels.txt
cat
dog
person
...
```

- 対応アノテーション：矩形およびポリゴントラック

## MOTS PNGインポート

アップロードファイル：上記構造のzipアーカイブ

- 対応アノテーション：ポリゴントラック

# セグメンテーションマスク


セグメンテーションマスク形式は、セマンティックセグメンテーション、インスタンスセグメンテーション、パノプティックセグメンテーションなどのタスクのモデル学習でよく使用されます。

CVATのセグメンテーションマスクは、
[Pascal VOC](/docs/manual/advanced/formats/format-voc/) 内で
CVATエンジニアによって作成された形式です。

## セグメンテーションマスクのエクスポート

画像のエクスポートについて：

- サポートされているアノテーション：バウンディングボックス、ポリゴン
- 属性：サポートされていません
- トラック：サポートされていません

ダウンロードされるファイルは、以下のような構造の.zipアーカイブです：

```bash
taskname.zip/
├── labelmap.txt # オプション、非VOCラベルの場合は必須
├── ImageSets/
│   └── Segmentation/
│       └── default.txt # 拡張子なしの画像名リスト
├── SegmentationClass/ # クラスごとに統合されたマスク
│   ├── image1.png
│   └── image2.png
└── SegmentationObject/ # インスタンスごとに統合されたマスク
    ├── image1.png
    └── image2.png


# labelmap.txt

# ラベル : 色 (RGB) : 'body'パーツ : アクション
background:0,128,0::
aeroplane:10,10,128::
bicycle:10,128,0::
bird:0,108,128::
boat:108,0,100::
bottle:18,0,8::
bus:12,28,0::
```

マスクは1チャンネルまたは3チャンネルの`png`画像です。
画像内の各ピクセルは特定のラベルに対応する色を持ちます。
色はPascal VOCの[アルゴリズム](http://host.robots.ox.ac.uk/pascal/VOC/voc2012/htmldoc/devkit_doc.html#sec:voclabelcolormap)に従って生成されます。
デフォルトでは、色 `(0, 0, 0)` は背景を表します。

## セグメンテーションマスクのインポート

アップロードするファイル：以下の構造のzipアーカイブ

```bash
  taskname.zip/
  ├── labelmap.txt # オプション、非VOCラベルの場合は必須
  ├── ImageSets/
  │   └── Segmentation/
  │       └── <任意のサブセット名>.txt
  ├── SegmentationClass/
  │   ├── image1.png
  │   └── image2.png
  └── SegmentationObject/
      ├── image1.png
      └── image2.png
```

グレースケール（1チャンネル）のPNGマスクもインポート可能です。
グレースケールマスクの場合、画像上の最大カラーインデックスと同じ行数のラベルリストを用意してください。行の順序はインデックス順でなければなりません。各行の色は任意ですが、重複しない色を設定してください。アノテーション内で使われていないカラーインデックスがある場合は、ダミーラベルで埋めてください。
例：

```
q:0,128,0:: # カラーインデックス0
aeroplane:10,10,128:: # カラーインデックス1
_dummy2:2,2,2:: # カラーインデックス2のダミー
_dummy3:3,3,3:: # カラーインデックス3のダミー
boat:108,0,100:: # カラーインデックス3
...
_dummy198:198,198,198:: # カラーインデックス198のダミー
_dummy199:199,199,199:: # カラーインデックス199のダミー
...
the last label:12,28,0:: # カラーインデックス200
```

- サポートされているシェイプ：ポリゴン

# CamVid


CamVid（Cambridge-driving Labeled Video Database）形式は、主にセマンティックセグメンテーションタスクの分野で使用されます。特に自動運転やその他のビジョンベースのロボティクスアプリケーションのモデルの学習および評価に有用です。

詳細については、以下を参照してください：

- [CamVid仕様](http://mi.eng.cam.ac.uk/research/projects/VideoRec/CamVid/)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/camvid_dataset)

## CamVidエクスポート

画像および動画のエクスポートについて：

- サポートされているアノテーション：バウンディングボックス、ポリゴン
- 属性：サポートされていません
- トラック：サポートされていません

ダウンロードされるファイルは、以下の構造を持つ.zipアーカイブです：

```bash
taskname.zip/
├── label_colors.txt # オプション、CamVid以外のラベルに必要
├── <any_subset_name>/
|   ├── image1.png
|   └── image2.png
├── <any_subset_name>annot/
|   ├── image1.png
|   └── image2.png
└── <any_subset_name>.txt


# label_colors.txt（カラーバリュータイプあり）

# ラベルの色を手動で設定したい場合、label_colors.txtを以下のように記述します：

# color (RGB) label
0 0 0 Void
64 128 64 Animal
192 0 128 Archway
0 128 192 Bicyclist
0 128 64 Bridge


# label_colors.txt（カラーバリュータイプなし）

# ラベルの色を手動で設定しない場合、自動的に色が設定されます：

# label
Void
Animal
Archway
Bicyclist
Bridge
```

CamVidデータセットのマスクは、通常**.png**形式の画像で、1チャネルまたは3チャネルのいずれかです。

この画像では、各ピクセルに特定のラベルに対応する色が割り当てられています。

デフォルトでは、色 `(0, 0, 0)`、つまり「黒」が背景を表すために使用されます。

## CamVidインポート

画像のインポートについて：

- アップロードファイル：上記構造の_.zip_アーカイブ
- サポートされているアノテーション：ポリゴン

# ICDAR13/15


ICDAR 13/15フォーマットは、主に文字検出・認識タスクやOCR（光学文字認識）で使用されます。

これらのフォーマットは、専門的な文字検出・認識モデルと組み合わせて利用されることが一般的です。

詳細については、以下を参照してください。

- [ICDAR13/15](https://rrc.cvc.uab.es/?ch=2)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/icdar_dataset)

## ICDAR13/15 エクスポート

画像のエクスポートについて：

- **ICDAR Recognition 1.0**（文字認識）:
  - サポートされているアノテーション: タグ `icdar`
  - 属性: `caption`
- **ICDAR Detection 1.0**（文字検出）:
  - サポートされているアノテーション: バウンディングボックス、ポリゴン（コンストラクタでラベル`icdar`を追加）
  - 属性: `text`
- **ICDAR Segmentation 1.0**（文字セグメンテーション）:
  - サポートされているアノテーション: バウンディングボックス、ポリゴン（コンストラクタでラベル`icdar`を追加）
  - 属性: `index`, `text`, `color`, `center`
- トラック: 未対応

ダウンロードされるファイルは、以下の構造を持つ.zipアーカイブです。

```bash

# 文字認識タスク
taskname.zip/
└── word_recognition/
    └── <any_subset_name>/
        ├── images
        |   ├── word1.png
        |   └── word2.png
        └── gt.txt

# 文字位置特定タスク
taskname.zip/
└── text_localization/
    └── <any_subset_name>/
        ├── images
        |   ├── img_1.png
        |   └── img_2.png
        ├── gt_img_1.txt
        └── gt_img_1.txt

# 文字セグメンテーションタスク
taskname.zip/
└── text_localization/
    └── <any_subset_name>/
        ├── images
        |   ├── 1.png
        |   └── 2.png
        ├── 1_GT.bmp
        ├── 1_GT.txt
        ├── 2_GT.bmp
        └── 2_GT.txt
```

## ICDAR13/15 インポート

アップロードファイル：上記構造のzipアーカイブ

**文字認識タスク**：

- サポートされているアノテーション: 属性`caption`を持つラベル`icdar`

**文字位置特定タスク**：

- サポートされているアノテーション: 属性`text`を持つラベル`icdar`の矩形またはポリゴン

**文字セグメンテーションタスク**：

- サポートされているアノテーション: 属性`index`, `text`, `color`, `center`を持つラベル`icdar`の矩形またはポリゴン

# VGGFace2


VGGFace2は主に顔認識タスク向けに設計されており、顔認識や認証などのタスク専用に設計されたディープラーニングモデルと共によく使用されます。

詳細については、以下を参照してください。

- [VGGFace2 Github](https://github.com/ox-vgg/vgg_face2)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/vgg_face2_dataset)

## VGGFace2のエクスポート

画像のエクスポートについて：

- サポートされているアノテーション：バウンディングボックス、ポイント（ランドマーク - 5点のグループ）
- 属性：非対応
- トラック：非対応

ダウンロードされるファイルは、以下のような構造の.zipアーカイブです。

```bash
taskname.zip/
├── labels.txt # 任意
├── <any_subset_name>/
|   ├── label0/
|   |   └── image1.jpg
|   └── label1/
|       └── image2.jpg
└── bb_landmark/
    ├── loose_bb_<any_subset_name>.csv
    └── loose_landmark_<any_subset_name>.csv

# labels.txt

# n000001 car
label0 <class0>
label1 <class1>
```

## VGGFace2のインポート

アップロードするファイル：上記の構造のzipアーカイブ

- サポートされているアノテーション：矩形、ポイント（ランドマーク - 5点のグループ）

# Ultralytics YOLO


Ultralytics YOLOは、以下の4つのフォーマットからなるフォーマットファミリーです：
- [検出（Detection）](https://docs.ultralytics.com/datasets/detect/)
- [方向付きバウンディングボックス（Oriented bounding Box）](https://docs.ultralytics.com/datasets/obb/)
- [セグメンテーション（Segmentation）](https://docs.ultralytics.com/datasets/segment/)
- [ポーズ（Pose）](https://docs.ultralytics.com/datasets/pose/)

データセット例：
- [検出（Detection）](https://github.com/cvat-ai/datumaro/tree/develop/tests/assets/yolo_dataset/yolo_ultralytics_detection)
- [方向付きバウンディングボックス](https://github.com/cvat-ai/datumaro/tree/develop/tests/assets/yolo_dataset/yolo_ultralytics_oriented_boxes)
- [セグメンテーション](https://github.com/cvat-ai/datumaro/tree/develop/tests/assets/yolo_dataset/yolo_ultralytics_segmentation)
- [ポーズ](https://github.com/cvat-ai/datumaro/tree/develop/tests/assets/yolo_dataset/yolo_ultralytics_pose)

## Ultralytics YOLOエクスポート

画像のエクスポートについて：

- サポートされているアノテーション
  - 検出：バウンディングボックス
  - 方向付きバウンディングボックス：方向付きバウンディングボックス
  - セグメンテーション：ポリゴン、マスク
  - ポーズ：スケルトン
- 属性：未対応
- トラック：対応

ダウンロードされるファイルは、以下の構造を持つ.zipアーカイブです：

```bash
archive.zip/
   ├── data.yaml  # 設定ファイル
   ├── train.txt  # 訓練サブセット画像パスのリスト
   │
   ├── images/
   │   ├── train/  # 訓練サブセットの画像ディレクトリ
   │   │    ├── image1.jpg
   │   │    ├── image2.jpg
   │   │    ├── image3.jpg
   │   │    └── ...
   ├── labels/
   │   ├── train/  # 訓練サブセットのアノテーションディレクトリ
   │   │    ├── image1.txt
   │   │    ├── image2.txt
   │   │    ├── image3.txt
   │   │    └── ...


# train.txt:
images/<subset>/image1.jpg
images/<subset>/image2.jpg
...


# data.yaml:
path:  ./ # データセットルートディレクトリ
train: train.txt  # 訓練画像（'path'からの相対パス）


# Ultralytics YOLO Pose特有のフィールド

# 最初の数字はスケルトンのポイント数

# 異なるポイント数のスケルトンが複数ある場合は最大ポイント数

# 2つ目の数字はアノテーションtxtファイル内のポイント情報の形式を定義
kpt_shape: [17, 3]


# クラス
names:
  0: person
  1: bicycle
  2: car
  # ...


# <image_name>.txt:

# フォーマットによって内容が異なる


# Ultralytics YOLO 検出（Detection）:

# label_id - data.yamlのnamesフィールドのID

# cx, cy - バウンディングボックス中心の相対座標

# rw, rh - バウンディングボックスの相対サイズ

# label_id cx cy rw rh
1 0.3 0.8 0.1 0.3
2 0.7 0.2 0.3 0.1


# Ultralytics YOLO 方向付きバウンディングボックス:

# xn, yn - n番目のポイントの相対座標

# label_id x1 y1 x2 y2 x3 y3 x4 y4
1 0.3 0.8 0.1 0.3 0.4 0.5 0.7 0.5
2 0.7 0.2 0.3 0.1 0.4 0.5 0.5 0.6


# Ultralytics YOLO セグメンテーション:

# xn, yn - n番目のポイントの相対座標

# label_id x1 y1 x2 y2 x3 y3 ...
1 0.3 0.8 0.1 0.3 0.4 0.5
2 0.7 0.2 0.3 0.1 0.4 0.5 0.5 0.6 0.7 0.5


# Ultralytics YOLO ポーズ:

# cx, cy - バウンディングボックス中心の相対座標

# rw, rh - バウンディングボックスの相対サイズ

# xn, yn - n番目のポイントの相対座標

# vn - n番目のポイントの可視性。2-可視、1-部分的に可視、0-不可視

# kpt_shapeの2つ目の値が3の場合：

# label_id cx cy rw rh x1 y1 v1 x2 y2 v2 x3 y3 v3 ...
1 0.3 0.8 0.1 0.3 0.3 0.8 2 0.1 0.3 2 0.4 0.5 2 0.0 0.0 0 0.0 0.0 0
2 0.3 0.8 0.1 0.3 0.7 0.2 2 0.3 0.1 1 0.4 0.5 0 0.5 0.6 2 0.7 0.5 2


# kpt_shapeの2つ目の値が2の場合：

# label_id cx cy rw rh x1 y1 x2 y2 x3 y3 ...
1 0.3 0.8 0.1 0.3 0.3 0.8 0.1 0.3 0.4 0.5 0.0 0.0 0.0 0.0
2 0.3 0.8 0.1 0.3 0.7 0.2 0.3 0.1 0.4 0.5 0.5 0.6 0.7 0.5


# 異なるポイント数のスケルトンが複数ある場合は、

# 小さいスケルトンは座標0.0 0.0および可視性=0でパディングされることに注意
```

全ての座標は正規化されている必要があります。
x座標や幅は画像の幅で、y座標や高さは画像の高さで割ることで正規化できます。
> CVATではオブジェクトやその一部を画像外に配置することができ、
> この場合座標は[0, 1]範囲外になります。
> YOLOv8フレームワークはこのような座標を持つラベルを無視します。

各アノテーションファイル（拡張子`.txt`）は
対応する画像ファイル名と一致しています。

例：`frame_000001.txt` は
`frame_000001.jpg`画像のアノテーションとなります。

### トラック対応

Ultralytics YOLO Detection Trackフォーマットを使うことで、
検出タスクでトラックをエクスポート時に保存できます。
対応するアノテーションの末尾にトラックIDを書き込みます：
```bash

# label_id cx cy rw rh <オプショントラックID>
1 0.3 0.8 0.1 0.3 1
2 0.7 0.2 0.3 0.1
```

## インポート

アップロードするファイル：上記と同じ構造のzipアーカイブ。

他のUltralytics YOLO形式エクスポートツール（例：[roboflow](https://roboflow.com/formats/yolov8-pytorch-txt)）との互換性のために、
CVATはサブセットと"images"または"labels"のディレクトリ順序が逆の場合も対応しています。
つまり、`train/images/`、`images/train/`のどちらも有効です。
```bash
archive.zip/
   ├── train/
   │   ├── images/  # 訓練サブセットの画像ディレクトリ
   │   │    ├── image1.jpg
   │   │    ├── image2.jpg
   │   │    └── ...
   │   ├── labels/  # 訓練サブセットのアノテーションディレクトリ
   │   │    ├── image1.txt
   │   │    ├── image2.txt
   │   │    └── ...
```

### トラック対応

各Ultralytics YOLOフォーマットでトラッキングをサポートしています。
整数のトラックIDは任意で各アノテーションの末尾に追加できます（例：検出フォーマット）：
```bash

# label_id cx cy rw rh <オプショントラックID>
1 0.3 0.8 0.1 0.3 1
2 0.7 0.2 0.3 0.1
```

# Datumaro


Datumaroは、複雑なデータセットやアノテーションの変換、
フォーマット変換、データセット統計、マージなど、
多機能な操作が可能な汎用フォーマットです。
CVAT内でのデータセットサポートプロバイダーとして機能します。
本質的には、CVATでできることはすべてDatumaroでも実現可能であり、
さらにデータセット専用の操作が追加で利用できます。

詳細は以下をご覧ください：

- [Datumaro仕様](https://github.com/cvat-ai/datumaro/)


# Datumaroフォーマットでアノテーションをエクスポート

画像のエクスポート対象：任意の2D形状、タグ

- 対応アノテーション：バウンディングボックス、ポリゴン、
ポリライン、ポイント、キューボイド、タグ、楕円、マスク、スケルトン。
- 属性：対応。
- トラック：対応。

ダウンロードされるファイルは、以下の構造を持つzipアーカイブです：

```bash
taskname.zip/
├── annotations/
│   └── default.json # クラスおよび全データセットアイテムの完全な記述
└── images/ # オプション「画像を保存」を選択した場合
    └── default
        ├── image1.jpg
        ├── image2.jpg
        ├── ...
```


# Datumaroフォーマットでアノテーションをインポート

- 対応アノテーション：バウンディングボックス、ポリゴン、ポリライン、
  マスク、ポイント、キューボイド、ラベル、スケルトン
- 対応属性：任意

アップロードファイル：以下の構造を持つzipアーカイブ

```bash
<archive_name>.zip/
└── annotations/
    ├── subset1.json # クラスおよび全データセットアイテムの完全な記述
    └── subset2.json # クラスおよび全データセットアイテムの完全な記述
```

`annotations`ディレクトリ内のJSONアノテーションファイルは、以下のような構造になります：

```json
{
  "info": {},
  "categories": {
    "label": {
      "labels": [
        {
          "name": "label_0",
          "parent": "",
          "attributes": []
        },
        {
          "name": "label_1",
          "parent": "",
          "attributes": []
        }
      ],
      "attributes": []
    }
  },
  "items": [
    {
      "id": "img1",
      "annotations": [
        {
          "id": 0,
          "type": "polygon",
          "attributes": {},
          "group": 0,
          "label_id": 1,
          "points": [1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0],
          "z_order": 0
        },
        {
          "id": 1,
          "type": "bbox",
          "attributes": {},
          "group": 1,
          "label_id": 0,
          "z_order": 0,
          "bbox": [1.0, 2.0, 3.0, 4.0]
        },
        {
          "id": 2,
          "type": "mask",
          "attributes": {},
          "group": 1,
          "label_id": 0,
          "rle": {
            "counts": "d0d0:F\\0",
            "size": [10, 10]
          },
          "z_order": 0
        }
      ]
    }
  ]
}
```

# YOLO


YOLO（You Only Look Onceの略）は、主にリアルタイム物体検出タスクで広く利用されている有名なフレームワークです。
その効率性と高速性から、多くの用途で理想的な選択肢となっています。
YOLOには独自のデータフォーマットがありますが、
このフォーマットは他の物体検出モデルにも合わせて調整することが可能です。

詳細については、以下を参照してください：

- [YOLO仕様](https://pjreddie.com/darknet/yolo/)
- [フォーマット仕様](https://github.com/AlexeyAB/darknet#how-to-train-to-detect-your-custom-objects)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/yolo_dataset)

## YOLOエクスポート

画像のエクスポートについて：

- サポートされているアノテーション: バウンディングボックス
- 属性: サポートされていません
- トラック: サポートされていません

ダウンロードされるファイルは、以下の構造を持つ.zipアーカイブです：

```bash
archive.zip/
├── obj.data
├── obj.names
├── obj_<subset>_data
│   ├── image1.txt
│   └── image2.txt
└── train.txt # サブセット画像パスのリスト


# 有効なサブセットは: train, valid のみ

# train.txtおよびvalid.txt:
obj_<subset>_data/image1.jpg
obj_<subset>_data/image2.jpg


# obj.data:
classes = 3 # 任意
names = obj.names
train = train.txt
valid = valid.txt # 任意
backup = backup/ # 任意


# obj.names:
cat
dog
airplane


# image_name.txt:

# label_id - obj.namesのid

# cx, cy - バウンディングボックス中心の相対座標

# rw, rh - バウンディングボックスの相対サイズ

# label_id cx cy rw rh
1 0.3 0.8 0.1 0.3
2 0.7 0.2 0.3 0.1
```

各アノテーションファイル（.txt拡張子）は、
対応する画像ファイルに合わせて名付けられています。

例えば、`frame_000001.txt`は
`frame_000001.jpg`画像のアノテーションとなります。

`.txt`ファイルの構造は以下の通りです：
各行はラベルとバウンディングボックスを
`label_id cx cy w h`という形式で記述します。
`obj.names`ファイルには、ラベル名の順序付きリストが含まれます。

## YOLOインポート

アップロードするファイルは、上記と同じ構造のzipアーカイブです。
CVATフレーム（画像名）とアノテーションファイル名が一致する必要があります。方法は2つあります：

1. 画像名とアノテーション`*.txt`ファイル名が完全一致する場合
   （画像または画像アーカイブからタスクを作成した場合）。

1. フレーム番号で一致させる場合（CVATが名前で一致できない場合）。ファイル名は次の形式である必要があります：`<number>.jpg`。
   これは、動画からタスクを作成した場合に使用します。

## YOLOフォーマットデータセット（例：VOCから）からタスクを作成する方法

1. 公式の[ガイド](https://pjreddie.com/darknet/yolo/)（Training YOLO on VOCセクション参照）に従い、
   YOLOフォーマットのアノテーションファイルを準備します。

1. トレイン画像をzip化します

   ```bash
   zip images.zip -j -@ < train.txt
   ```

1. 次のラベルでCVATタスクを作成します：

   ```bash
   aeroplane bicycle bird boat bottle bus car cat chair cow diningtable dog
   horse motorbike person pottedplant sheep sofa train tvmonitor
   ```

   画像としてimages.zipを選択します。images.zipのサイズが500MBを超える場合が多いため、`share`機能の利用を推奨します。
   詳細はアノテーションタスクの作成ガイドを参照してください。

1. 次の内容で`obj.names`を作成します：

   ```bash
   aeroplane
   bicycle
   bird
   boat
   bottle
   bus
   car
   cat
   chair
   cow
   diningtable
   dog
   horse
   motorbike
   person
   pottedplant
   sheep
   sofa
   train
   tvmonitor
   ```

1. すべてのラベルファイルをまとめてzip化します（trainサブセットに対応するラベルファイルのみ追加）：

   ```bash
   cat train.txt | while read p; do echo ${p%/*/*}/labels/${${p##*/}%%.*}.txt; done | zip labels.zip -j -@ obj.names
   ```

1. `アノテーションのアップロード`ボタンをクリックし、`YOLO 1.1`を選択して、前のステップで作成したラベルのzipファイルを選択します。

# ImageNet


ImageNetは、画像分類、物体検出、セグメンテーションなど、さまざまなコンピュータビジョンタスクで一般的に使用されています。

さまざまな機械学習モデルの学習やベンチマークにおいて、広く認知され利用されています。

詳細については、以下を参照してください。

- [ImageNet サイト](http://www.image-net.org)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/imagenet_dataset)

## ImageNetエクスポート

画像のエクスポートについて：

- 対応するアノテーション：タグ
- 属性：非対応
- トラック：非対応

ダウンロードされるファイルは、以下の構造を持つ.zipアーカイブです。

```bash

# 画像を保存する場合:
taskname.zip/
├── label1/
|   ├── label1_image1.jpg
|   └── label1_image2.jpg
└── label2/
    ├── label2_image1.jpg
    ├── label2_image3.jpg
    └── label2_image4.jpg


# アノテーションのみを保持する場合:
taskname.zip/
├── <any_subset_name>.txt
└── synsets.txt

```

## ImageNetインポート

アップロードするファイル：上記構造のzipアーカイブ

- 対応するアノテーション：ラベル

# Open Images


Open Imagesフォーマットは、
物体検出、物体セグメンテーション、視覚的関係、
およびローカライズされたナラティブ注釈を含む
大規模かつ多様なデータセットに基づいています。

そのエクスポートデータフォーマットは、多くの物体検出およびセグメンテーションモデルと互換性があります。

詳細については、以下を参照してください：

- [Open Images サイト](https://storage.googleapis.com/openimages/web/index.html)
- [フォーマット仕様](https://storage.googleapis.com/openimages/web/download.html)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/open_images_dataset)

## Open Imagesのエクスポート

画像のエクスポートについて：

- サポートされるアノテーション：バウンディングボックス（検出）、
  タグ（分類）、ポリゴン（セグメンテーション）。

- サポートされる属性：
  - タグ：`score`はラベルとして`text`または`number`で定義する必要があります。
    信頼度は0から1の範囲です。
  - バウンディングボックス：<br>`score`はラベルとして`text`または`number`で定義する必要があります。
    信頼度は0から1の範囲です。<br> `occluded`はUIオプションと
    個別の属性の両方として。オブジェクトが他のオブジェクトによって隠されているかどうか。<br>`truncated`
    はラベルとして`checkbox`で定義する必要があります。オブジェクトが画像の境界を超えているかどうか。
    <br>`is_group_of`はラベルとして`checkbox`で定義する必要があります。オブジェクトが同じクラスのオブジェクトのグループを表しているかどうか。<br>`is_depiction`は
    ラベルとして`checkbox`で定義する必要があります。オブジェクトが実物ではなく（例えばイラストなどの）描写かどうか。<br>`is_inside`は
    ラベルとして`checkbox`で定義する必要があります。オブジェクトが内部から見られているかどうか。
  - マスク：
    <br>`box_id`はラベルとして`text`で定義する必要があります。
    マスクに関連付けられたバウンディングボックスの識別子。
    <br>`predicted_iou`はラベルとして`text`または`number`で定義する必要があります。
    正解データとの予測IoU値。
- トラック：未対応。

ダウンロードされるファイルは、以下の構造の.zipアーカイブです：

```
└─ taskname.zip/
    ├── annotations/
    │   ├── bbox_labels_600_hierarchy.json
    │   ├── class-descriptions.csv
    |   ├── images.meta  # 画像サイズ情報の追加ファイル
    │   ├── <subset_name>-image_ids_and_rotation.csv
    │   ├── <subset_name>-annotations-bbox.csv
    │   ├── <subset_name>-annotations-human-imagelabels.csv
    │   └── <subset_name>-annotations-object-segmentation.csv
    ├── images/
    │   ├── subset1/
    │   │   ├── <image_name101.jpg>
    │   │   ├── <image_name102.jpg>
    │   │   └── ...
    │   ├── subset2/
    │   │   ├── <image_name201.jpg>
    │   │   ├── <image_name202.jpg>
    │   │   └── ...
    |   ├── ...
    └── masks/
        ├── subset1/
        │   ├── <mask_name101.png>
        │   ├── <mask_name102.png>
        │   └── ...
        ├── subset2/
        │   ├── <mask_name201.png>
        │   ├── <mask_name202.png>
        │   └── ...
        ├── ...
```

## Open Imagesのインポート

アップロードするファイル：以下の構造のzipアーカイブ

```
└─ upload.zip/
    ├── annotations/
    │   ├── bbox_labels_600_hierarchy.json
    │   ├── class-descriptions.csv
    |   ├── images.meta  # オプション、画像サイズ情報のファイル
    │   ├── <subset_name>-image_ids_and_rotation.csv
    │   ├── <subset_name>-annotations-bbox.csv
    │   ├── <subset_name>-annotations-human-imagelabels.csv
    │   └── <subset_name>-annotations-object-segmentation.csv
    └── masks/
        ├── subset1/
        │   ├── <mask_name101.png>
        │   ├── <mask_name102.png>
        │   └── ...
        ├── subset2/
        │   ├── <mask_name201.png>
        │   ├── <mask_name202.png>
        │   └── ...
        ├── ...
```

`<subset_name>-image_ids_and_rotation.csv`内の画像IDは、
タスク内の画像名と一致している必要があります。

# Market-1501


Market-1501データセットは、人の再識別タスクで広く使用されています。
これは非常に難易度の高いデータセットであり、
コンピュータビジョン分野で大きな注目を集めています。

詳細については、以下をご覧ください：

- [Market-1501](https://www.aitribune.com/dataset/2018051063)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/market1501_dataset)

## Market-1501のエクスポート

画像のエクスポートについて：

- サポートされているアノテーション：バウンディングボックス
- 属性：`query`（チェックボックス）、`person_id`（数値）、`camera_id`（数値）
- トラック：未対応

ダウンロードされるファイルは、以下の構造を持った.zipアーカイブです：

```bash
taskname.zip/
├── bounding_box_<any_subset_name>/
│   └── image_name_1.jpg
└── query
    ├── image_name_2.jpg
    └── image_name_3.jpg

# アノテーションのみ保持する場合:
taskname.zip/
└── images_<any_subset_name>.txt

# images_<any_subset_name>.txt
query/image_name_1.jpg
bounding_box_<any_subset_name>/image_name_2.jpg
bounding_box_<any_subset_name>/image_name_3.jpg

# image_name = 0001_c1s1_000015_00.jpg
0001 - person id
c1 - カメラID（全6台）
s1 - シーケンス
000015 - シーケンス内のフレーム番号
00 - このバウンディングボックスが複数ある場合の一番目を意味する
```

## Market-1501のインポート

アップロードするファイル：上記構造のzipアーカイブ

- サポートされているアノテーション：属性（`query`、`person_id`、`camera_id`）付きのラベル`market-1501`

# Cityscapes（シティスケープス）


Cityscapesフォーマットは、コンピュータビジョン分野で広く使用されている標準フォーマットであり、
特に都市のシーンにおけるセマンティックおよびインスタンスセグメンテーションのタスクで用いられます。
このデータセット形式は通常、
都市風景の高解像度画像と詳細なピクセル単位のアノテーションで構成されています。

各ピクセルには「道路」「歩行者」「車両」などのカテゴリラベルが付与されており、
都市環境を理解するための機械学習モデルの学習や検証にとって
非常に価値のあるリソースです。自動運転車、
ロボティクス、スマートシティ分野で研究者や専門家が
よく利用する選択肢となっています。

詳細については、以下を参照ください：

- [Cityscapes公式サイト](https://www.cityscapes-dataset.com/login/)
- [Cityscapesフォーマット仕様](https://github.com/mcordts/cityscapesScripts#the-cityscapes-dataset)
- [Cityscapesデータセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/cityscapes_dataset)


# Cityscapes エクスポート

画像のエクスポートについて：

- サポートされるアノテーション：ポリゴン（セグメンテーション）、バウンディングボックス
- 属性:
  - `is_crowd` ブール値。ラベルに対して`checkbox`として定義されている必要があります。
    アノテーションラベルが異なるインスタンスを区別できるかどうかを指定します。
    Falseの場合、アノテーションのidフィールドがインスタンスIDをエンコードします。
- トラック：非対応

ダウンロードされるファイルは、以下の構造を持つ.zipアーカイブです：

```
.
├── label_color.txt
├── gtFine
│   ├── <subset_name>
│   │   └── <city_name>
│   │       ├── image_0_gtFine_instanceIds.png
│   │       ├── image_0_gtFine_color.png
│   │       ├── image_0_gtFine_labelIds.png
│   │       ├── image_1_gtFine_instanceIds.png
│   │       ├── image_1_gtFine_color.png
│   │       ├── image_1_gtFine_labelIds.png
│   │       ├── ...
└── imgsFine  # 画像の保存を選択した場合
    └── leftImg8bit
        ├── <subset_name>
        │   └── <city_name>
        │       ├── image_0_leftImg8bit.png
        │       ├── image_1_leftImg8bit.png
        │       ├── ...
```

- `label_color.txt` 各ラベルの色を記述したファイル

```

# label_color.txt 例

# r g b label_name
0 0 0 background
0 255 0 tree
...
```

- `*_gtFine_color.png` 各クラスラベルが色でエンコードされた画像
- `*_gtFine_labelIds.png` 各クラスラベルがインデックスでエンコードされた画像
- `*_gtFine_instanceIds.png` クラスおよびインスタンスラベルが
  インスタンスIDでエンコードされた画像。ピクセル値はクラスと個々のインスタンスを表します：
  各IDを1000で割った整数部分がクラスID、余りがインスタンスIDとなります。
  アノテーションが複数インスタンスを示す場合、ピクセル値はそのクラスの通常のIDになります。


# Cityscapes アノテーションのインポート

アップロードするファイル：以下の構造を持つzipアーカイブ

```
.
├── label_color.txt # 任意
└── gtFine
    └── <city_name>
        ├── image_0_gtFine_instanceIds.png
        ├── image_1_gtFine_instanceIds.png
        ├── ...
```


# Cityscapesデータセットでタスクを作成

必要なラベルでタスクを作成するか、
元のデータセットのラベルと色を利用することもできます。
Cityscapesフォーマットで作業する場合、背景用に黒色のラベルが
必要となります。

元のCityscapesカラーマップ：

```JSON
[
    {"name": "unlabeled", "color": "#000000", "attributes": []},
    {"name": "egovehicle", "color": "#000000", "attributes": []},
    {"name": "rectificationborder", "color": "#000000", "attributes": []},
    {"name": "outofroi", "color": "#000000", "attributes": []},
    {"name": "static", "color": "#000000", "attributes": []},
    {"name": "dynamic", "color": "#6f4a00", "attributes": []},
    {"name": "ground", "color": "#510051", "attributes": []},
    {"name": "road", "color": "#804080", "attributes": []},
    {"name": "sidewalk", "color": "#f423e8", "attributes": []},
    {"name": "parking", "color": "#faaaa0", "attributes": []},
    {"name": "railtrack", "color": "#e6968c", "attributes": []},
    {"name": "building", "color": "#464646", "attributes": []},
    {"name": "wall", "color": "#66669c", "attributes": []},
    {"name": "fence", "color": "#be9999", "attributes": []},
    {"name": "guardrail", "color": "#b4a5b4", "attributes": []},
    {"name": "bridge", "color": "#966464", "attributes": []},
    {"name": "tunnel", "color": "#96785a", "attributes": []},
    {"name": "pole", "color": "#999999", "attributes": []},
    {"name": "polegroup", "color": "#999999", "attributes": []},
    {"name": "trafficlight", "color": "#faaa1e", "attributes": []},
    {"name": "trafficsign", "color": "#dcdc00", "attributes": []},
    {"name": "vegetation", "color": "#6b8e23", "attributes": []},
    {"name": "terrain", "color": "#98fb98", "attributes": []},
    {"name": "sky", "color": "#4682b4", "attributes": []},
    {"name": "person", "color": "#dc143c", "attributes": []},
    {"name": "rider", "color": "#ff0000", "attributes": []},
    {"name": "car", "color": "#00008e", "attributes": []},
    {"name": "truck", "color": "#000046", "attributes": []},
    {"name": "bus", "color": "#003c64", "attributes": []},
    {"name": "caravan", "color": "#00005a", "attributes": []},
    {"name": "trailer", "color": "#00006e", "attributes": []},
    {"name": "train", "color": "#005064", "attributes": []},
    {"name": "motorcycle", "color": "#0000e6", "attributes": []},
    {"name": "bicycle", "color": "#770b20", "attributes": []},
    {"name": "licenseplate", "color": "#00000e", "attributes": []}
]

```

</details>

タスク作成時に画像をアップロードしてください：

```
images.zip/
    ├── image_0.jpg
    ├── image_1.jpg
    ├── ...

```

タスク作成後、前述のセクションで説明した通りに
Cityscapesアノテーションをアップロードしてください。

# Pascal VOC


Pascal VOC（Visual Object Classes）フォーマットは、
物体分類および検出のために確立された初期のベンチマークの1つであり、
物体クラス認識のための標準化された画像データセットを提供します。

エクスポートデータフォーマットはXMLベースであり、コンピュータビジョンタスクで広く採用されています。

詳細は以下を参照してください。

- [Pascal VOC](http://host.robots.ox.ac.uk/pascal/VOC/)
- [フォーマット仕様](http://host.robots.ox.ac.uk/pascal/VOC/voc2012/devkit_doc.pdf)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/voc_dataset)

## Pascal VOCエクスポート

画像をエクスポートする場合：

- サポートされているアノテーション：バウンディングボックス（検出）、
  タグ（分類）、ポリゴン（セグメンテーション）
- 属性:
  - `occluded`はUIオプションおよび個別の属性として対応。
  - `truncated`と`difficult`は各ラベルで`checkbox`として定義する必要があります。
  - XMLファイルの`attributes`セクションには任意の属性が記述可能です。
- トラック：未対応。

ダウンロードされるファイルは、以下の構造を持つ.zipアーカイブです。

```bash
taskname.zip/
├── JPEGImages/
│   ├── <image_name1>.jpg
│   ├── <image_name2>.jpg
│   └── <image_nameN>.jpg
├── Annotations/
│   ├── <image_name1>.xml
│   ├── <image_name2>.xml
│   └── <image_nameN>.xml
├── ImageSets/
│   └── Main/
│       └── default.txt
└── labelmap.txt


# labelmap.txt

# label : color_rgb : 'body' parts : actions
background:::
aeroplane:::
bicycle:::
bird:::
```

## Pascal VOCインポート

サポートされる属性: アクション属性（インポートのみ対応、`checkbox`として定義する必要あり）

アップロードファイル：上記で示した構造、または以下のような.zipアーカイブ

```bash
taskname.zip/
├── <image_name1>.xml
├── <image_name2>.xml
└── <image_nameN>.xml
```

CVATがアノテーション`.xml`ファイル（`filename`タグ、例：
`<filename>2008_004457.jpg</filename>`）から
フレーム名とファイル名を一致させられる必要があります。

2つの方法があります：

1. アノテーション`.xml`のフレーム名とファイル名が完全一致する場合
   （画像または画像アーカイブからタスクを作成した場合）。

1. フレーム番号で一致させる場合。ファイル名は`<number>.jpg`
   または`frame_000000.jpg`である必要があります。これは動画からタスクを作成した場合に使用します。

## Pascal VOCデータセットからタスクを作成する方法

1. Pascal VOCデータセットをダウンロードします
   （[PASCAL VOC公式サイト](http://host.robots.ox.ac.uk/pascal/VOC/)からダウンロード可能）

1. 以下のラベルでCVATタスクを作成します：

   ```bash
   aeroplane bicycle bird boat bottle bus car cat chair cow diningtable
   dog horse motorbike person pottedplant sheep sofa train tvmonitor
   ```

   これらのラベルに
   `~checkbox=difficult:false ~checkbox=truncated:false`
   属性を追加することで利用可能です。

   興味のある画像ファイルを選択します
   （詳細はアノテーションタスクの作成ガイドを参照）

1. 対応するアノテーションファイルをzipにまとめます

1. `アノテーションのアップロード`ボタンをクリックし、`Pascal VOC ZIP 1.1`
   を選択します。

   前のステップで作成したアノテーションのzipファイルを選択してください。
   しばらく時間がかかる場合があります。
   

# COCO


COCOデータセットは広く使われている機械学習構造であり、物体識別や画像セグメンテーションのタスクに不可欠です。
このフォーマットは、バウンディングボックスやポリゴンによる画像アノテーションを用いるプロジェクトに対応しています。

詳細は以下を参照してください：

- [COCO Object Detection サイト](http://cocodataset.org/#format-data)
- [フォーマット仕様](https://openvinotoolkit.github.io/datumaro/stable/docs/data-formats/formats/coco.html)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/coco_dataset)

## COCOエクスポート

画像および動画のエクスポートについて：

- 対応するアノテーション：バウンディングボックス、ポリゴン
- 属性:
  - `is_crowd` これはチェックボックスまたは整数（0または1の値）で指定できます。インスタンス（または物体のグループ）が`segmentation`フィールドにRLEエンコードされたマスクを含むべきことを示します。グループ内のすべての形状は1つの大きなマスクに統合され、最大の形状が物体グループ全体のプロパティを決定します。
  - `score`: この数値フィールドはアノテーションの`score`を表します。
  - 任意の属性: これらはアノテーションの`attributes`セクションに格納されます。
- トラック: 非対応

ダウンロードされたファイルは以下の構造を持つ.zipアーカイブです：

```
archive.zip/
├── images/
│   ├── train/
│   │   ├── <image_name1.ext>
│   │   ├── <image_name2.ext>
│   │   └── ...
│   └── val/
│       ├── <image_name1.ext>
│       ├── <image_name2.ext>
│       └── ...
└── annotations/
   ├── <task>_<subset_name>.json
   └── ...
```

プロジェクトからデータセットをエクスポートする場合、サブセット名はプロジェクト内で使用されているものと同じになります。
そうでない場合は、全データセット情報を格納する単一のデフォルトサブセットが作成されます。
<task> 部分は、`instances`、`panoptic`、`image_info`、`labels`、`captions`、`stuff`など、特定のCOCOタスクのいずれかと一致します。

## COCOインポート

アップロード形式：単一の展開済み`*.json`または上記、もしくは
[こちら](https://openvinotoolkit.github.io/datumaro/latest/docs/data-formats/formats/coco.html#import-coco-dataset)
で説明されている構造のzipアーカイブ（画像なし）です。

- 対応アノテーション: ポリゴン、長方形（`segmentation`フィールドが空の場合）
- 対応タスク: `instances`、`person_keypoints`（セグメンテーションのみインポートされます）、`panoptic`

## MS COCOデータセットからタスクを作成する方法

1. [MS COCOデータセット](https://openvinotoolkit.github.io/datumaro/latest/docs/data-formats/formats/coco.html#import-coco-dataset)をダウンロードします。

   例：`val images`および`instances`アノテーション

2. 以下のラベルでCVATタスクを作成します：

   ```bash
   person bicycle car motorcycle airplane bus train truck boat "traffic light" "fire hydrant" "stop sign" "parking meter" bench bird cat dog horse sheep cow elephant bear zebra giraffe backpack umbrella handbag tie suitcase frisbee skis snowboard "sports ball" kite "baseball bat" "baseball glove" skateboard surfboard "tennis racket" bottle "wine glass" cup fork knife spoon bowl banana apple sandwich orange broccoli carrot "hot dog" pizza donut cake chair couch "potted plant" bed "dining table" toilet tv laptop mouse remote keyboard "cell phone" microwave oven toaster sink refrigerator book clock vase scissors "teddy bear" "hair drier" toothbrush
   ```

3. データとして`val2017.zip`を選択します
   （詳細はアノテーションタスクの作成ガイドを参照）

4. `annotations_trainval2017.zip`を展開します

5. `アノテーションをアップロード`ボタンをクリックし、
   `COCO 1.1`を選択、`instances_val2017.json`
   アノテーションファイルを選択します。処理には時間がかかる場合があります。
   

# COCO キーポイント


COCO キーポイント形式は、人間の姿勢推定タスク向けに特化したフォーマットです。このタスクの目的は、画像内の人物の身体の関節（キーポイント）を特定し、位置を特定することです。

この特殊なフォーマットは、姿勢推定に特化した最新のさまざまなモデルで使用されています。

詳細については、以下をご覧ください：

- [COCO キーポイント サイト](https://cocodataset.org/#keypoints-2020)
- [フォーマット仕様](https://openvinotoolkit.github.io/datumaro/latest/docs/data-formats/formats/coco.html)
- [アーカイブの例](https://openvinotoolkit.github.io/datumaro/latest/docs/data-formats/formats/coco.html#import-coco-dataset)

## COCO キーポイントのエクスポート

画像のエクスポートについて：

- サポートされているアノテーション: スケルトン
- 属性:
  - `is_crowd`：チェックボックスまたは整数（0 または 1 の値）で指定できます。これはインスタンス（またはオブジェクト群）が `segmentation` フィールドに RLE エンコードされたマスクを含むべきことを示します。グループ内のすべてのシェイプは 1 つのマスクにまとめられ、最大のシェイプがオブジェクトグループ全体のプロパティを設定します。
  - `score`: この数値フィールドはアノテーションの `score` を表します。
  - 任意の属性: これらはアノテーションの `attributes` セクションに保存されます。
- トラック: 非対応

ダウンロードされるファイルは以下の構造を持つ .zip アーカイブです：

```
archive.zip/
├── images/
│
│   ├── <image_name1.ext>
│   ├── <image_name2.ext>
│   └── ...
├──<annotations>.xml
```

## COCO インポート

アップロードするファイル: 単一の展開された `*.json` または、[こちら](https://openvinotoolkit.github.io/datumaro/latest/docs/data-formats/formats/coco.html#import-coco-dataset)で説明されている構造（画像なし）の zip アーカイブ。

- サポートされているアノテーション: スケルトン

`person_keypoints`,

Datumaro による COCO タスクのサポートについては[こちら](https://openvinotoolkit.github.io/datumaro/latest/docs/data-formats/formats/coco.html#export-to-other-formats)で説明されています。
例えば、[Datumaro 経由の COCO キーポイントサポート](https://github.com/openvinotoolkit/cvat/issues/2910#issuecomment-726077582):

1. [Datumaro](https://github.com/openvinotoolkit/datumaro)をインストール
   `pip install datumaro`
2. タスクを `Datumaro` 形式でエクスポートし、解凍
3. Datumaro プロジェクトを `coco` / `coco_person_keypoints` 形式でエクスポート
   `datum export -f coco -p path/to/project [-- --save-images]`

この方法で、CVAT のポイントを単一キーポイントまたはキーポイントリスト（`visibility` COCO フラグなし）としてエクスポートできます。

# CVATからアノテーションとデータをエクスポートする


CVATでは、さまざまなフォーマットでデータをエクスポートすることができます。
エクスポートフォーマットの選択は、アノテーションの種類や
データセットの今後の用途によって異なります。

参照:

- [データエクスポートフォーマット](#data-export-formats)
- [CVATでのデータセットエクスポート](#exporting-dataset-in-cvat)
  - [タスクからのデータセットエクスポート](#exporting-dataset-from-task)
  - [ジョブからのデータセットエクスポート](#exporting-dataset-from-job)
- [データエクスポートのビデオチュートリアル](#data-export-video-tutorial)

## データエクスポートフォーマット

以下の表は、CVATで利用可能なデータエクスポートフォーマットを示しています。
| フォーマット | 種類 | コンピュータビジョンタスク | モデル | シェイプ | 属性 | ビデオトラック |
|------------|------|------------------------|--------|---------|-------|--------------|
| [CamVid 1.0](format-camvid) | .txt/.png | セマンティックセグメンテーション | U-Net, SegNet, DeepLab, PSPNet, FCN, Mask R-CNN, ICNet, ERFNet, HRNet, V-Net など | ポリゴン | 未対応 | 未対応 |
| [Cityscapes 1.0](format-cityscapes) | .txt/.png | セマンティックセグメンテーション | U-Net, SegNet, DeepLab, PSPNet, FCN, ERFNet, ICNet, Mask R-CNN, HRNet, ENet など | ポリゴン | 特定属性 | 未対応 |
| [COCO 1.0](format-coco) | JSON | 検出、セマンティックセグメンテーション | YOLO, Faster R-CNN, Mask R-CNN, SSD, RetinaNet, EfficientDet, UNet, DeepLabv3+, CenterNet, Cascade R-CNN など | バウンディングボックス、ポリゴン | 特定属性 | 未対応 |
| [COCO Keypoints 1.0](coco-keypoints) | XML | キーポイント | OpenPose, PoseNet, AlphaPose, SPM, Mask R-CNN with Keypoint Detection など | スケルトン | 特定属性 | 未対応 |
| CVAT for images 1.1 | XML | 2D全般(トラッキング除く) | 任意のデコード可能モデル | バウンディングボックス、ポリゴン、ポリライン、ポイント、キューボイド、スケルトン、楕円、マスク、タグ | すべて | 未対応 |
| CVAT for video 1.1 | XML | 2D全般(分類除く) | 任意のデコード可能モデル | バウンディングボックス、ポリゴン、ポリライン、ポイント、キューボイド、スケルトン、楕円、マスク | すべて | 対応 |
| [Datumaro 1.0](format-datumaro) | JSON | 全般 | 任意のデコード可能モデル | バウンディングボックス、ポリゴン、ポリライン、ポイント、キューボイド、スケルトン、楕円、マスク、タグ | すべて | 対応 |
| [ICDAR](format-icdar) | TXT | 文字認識、検出、セグメンテーション | EAST, CRNN, Mask TextSpotter, TextSnake など | タグ、バウンディングボックス、ポリゴン | 特定属性 | 未対応 |
| [ImageNet 1.0](format-imagenet) | JPG/TXT | セグメンテーション、分類、検出 | VGG, Inception, YOLO, Faster R-CNN, U-Net など | タグ | なし | 未対応 |
| [KITTI 1.0](format-kitti) | TXT/PNG | セグメンテーション、検出、3D | PointPillars, SECOND, AVOD, YOLO, DeepSORT, PWC-Net, ORB-SLAM など | バウンディングボックス、ポリゴン | 特定属性 | 未対応 |
| [LabelMe 3.0](format-labelme) | XML | 互換性、セグメンテーション | U-Net, Mask R-CNN, Fast/Faster R-CNN, DeepLab, YOLO など | バウンディングボックス、ポリゴン | ポリゴン | 未対応 |
| [LFW 1.0](format-lfw) | TXT | 照合、顔認識 | OpenFace, VGGFace/2, FaceNet, ArcFace など | タグ、スケルトン | 特定属性 | 未対応 |
| [Market-1501 1.0](format-market1501) | TXT | 再識別 | Triplet Loss Networks, Deep ReID など | バウンディングボックス | 特定属性 | 未対応 |
| [MOT 1.0](format-mot) | TXT | トラッキング、検出 | SORT, MOT-Net, IOU Tracker など | バウンディングボックス | 特定属性 | 対応 |
| [MOTS PNG 1.0](format-mots) | PNG/TXT | トラッキング、検出 | SORT, MOT-Net, IOU Tracker など | バウンディングボックス、マスク | 特定属性 | 対応 |
| [Open Images 1.0](format-openimages) | CSV | 検出、分類、セグメンテーション | Faster R-CNN, YOLO, U-Net, CornerNet など | バウンディングボックス、タグ、ポリゴン | 特定属性 | 未対応 |
| [PASCAL VOC 1.0](format-voc) | XML | 分類、検出 | Faster R-CNN, SSD, YOLO, AlexNet など | バウンディングボックス、タグ、ポリゴン | 特定属性 | 未対応 |
| [Segmentation Mask 1.0](format-smask) | TXT | セグメンテーション | Faster R-CNN, SSD, YOLO, AlexNet など | ポリゴン | なし | 未対応 |
| [VGGFace2 1.0](format-vggface2) | CSV | 顔認識 | VGGFace, ResNet, Inception など | バウンディングボックス、ポイント | なし | 未対応 |
| [WIDER Face 1.0](format-widerface) | TXT | 検出 | SSD, Faster R-CNN, YOLO など | バウンディングボックス、タグ | 特定属性 | 未対応 |
| [YOLO 1.0](format-yolo) | TXT | 検出 | YOLOv1-v4 など | バウンディングボックス | なし | 未対応 |
| [Ultralytics YOLO Detection 1.0](format-yolo-ultralytics) | TXT | 検出 | YOLOv8 | バウンディングボックス | なし | 対応 |
| [Ultralytics YOLO Segmentation 1.0](format-yolo-ultralytics) | TXT | インスタンスセグメンテーション | YOLOv8 | ポリゴン、マスク | なし | 対応 |
| [Ultralytics YOLO Pose 1.0](format-yolo-ultralytics) | TXT | キーポイント | YOLOv8 | スケルトン | なし | 対応 |
| [Ultralytics YOLO Oriented BB 1.0](format-yolo-ultralytics) | TXT | 検出 | YOLOv8 | バウンディングボックス | なし | 対応 |
| [Ultralytics YOLO Classification 1.0](format-yolo-ultralytics-classification) | JPG | 分類 | YOLOv8 | タグ | なし | 未対応 |

## CVATでのデータセットエクスポート

### タスクからのデータセットエクスポート

タスクからデータセットをエクスポートするには、以下の手順に従います。

1. タスクを開きます。
2. **アクション** > **タスクデータセットのエクスポート** を選択します。
3. 利用可能なオプションから希望するフォーマットを選択します。

4. （オプション）エクスポートに画像を含めたい場合は
   **画像を保存** スイッチを有効にします。

   > **注意**: **画像を保存** オプションは **有料機能** です。

   ![画像を保存オプション](/images/export_job_as_dataset_dialog.png)

5. 作成される `.zip` アーカイブの名前を入力します。

6. **OK** をクリックしてエクスポートを開始します。

### ジョブからのデータセットエクスポート

ジョブからデータセットをエクスポートするには、以下の手順に従います。

1. **メニュー** > **ジョブデータセットのエクスポート** に移動します。

   ![データセットをエクスポート](/images/export_job_as_dataset_menu.png)

2. 利用可能なオプションから希望するフォーマットを選択します。

3. （オプション）エクスポートに画像を含めたい場合は
   **画像を保存** スイッチを有効にします。

   > **注意**: **画像を保存** オプションは **有料機能** です。

   ![画像を保存オプション](/images/export_job_as_dataset_dialog.png)

4. 作成される `.zip` アーカイブの名前を入力します。

5. **OK** をクリックしてエクスポートを開始します。

## データエクスポートのビデオチュートリアル

手順の詳細については、以下のチュートリアルをご覧ください。

<!--lint disable maximum-line-length-->

<iframe width="560" height="315" src="https://www.youtube.com/embed/gzjVpVV9orE?si=2tiBIqts8nk_byTH" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<!--lint enable maximum-line-length-->

# KITTI


KITTIフォーマットは、自動運転に関連した幅広いコンピュータビジョンタスクで広く使用されており、3D物体検出、マルチオブジェクトトラッキング、シーンフロー推定などが含まれますが、これらに限定されません。自動車シーンに特化しているため、KITTIフォーマットは通常、これらのタスク向けに設計または適応されたモデルとともに使用されます。

詳細については、以下を参照してください。

- [KITTIサイト](http://www.cvlibs.net/datasets/kitti/)
- [KITTI検出用フォーマット仕様](https://s3.eu-central-1.amazonaws.com/avg-kitti/devkit_object.zip)
- [KITTIセグメンテーション用フォーマット仕様](https://s3.eu-central-1.amazonaws.com/avg-kitti/devkit_semantics.zip)
- [データセット例](https://github.com/cvat-ai/datumaro/tree/v0.3/tests/assets/kitti_dataset)

## KITTIアノテーションのエクスポート

画像のエクスポートについて：

- サポートされているアノテーション：バウンディングボックス（検出）、ポリゴン（セグメンテーション）。
- サポートされている属性：
  - `occluded`（UIオプションおよび個別属性の両方で利用可能）
    バウンディングボックス内の物体の大部分が他の物体によって遮られていることを示します。
  - `truncated`（バウンディングボックスにのみ適用可能）
    ラベル用に`チェックボックス`として表現される必要があります。
    バウンディングボックスが物体全体を含んでおらず、一部が切り取られていることを示唆します。
  - `is_crowd`（ポリゴンにのみ有効）。ラベル用に`チェックボックス`で示される必要があります。
    アノテーションが同じ物体クラスの複数のインスタンスを含んでいることを示します。
- トラック：サポートされていません。

ダウンロードされるファイルは、以下の構造を持つ.zipアーカイブです。

```
└─ annotations.zip/
    ├── label_colors.txt # r g b ラベル名のペア一覧
    ├── labels.txt # ラベル一覧
    └── default/
        ├── label_2/ # 左カラーカメラのラベルファイル
        │   ├── <image_name_1>.txt
        │   ├── <image_name_2>.txt
        │   └── ...
        ├── instance/ # インスタンスセグメンテーションマスク
        │   ├── <image_name_1>.png
        │   ├── <image_name_2>.png
        │   └── ...
        ├── semantic/ # セマンティックセグメンテーションマスク（ラベルはIDでエンコード）
        │   ├── <image_name_1>.png
        │   ├── <image_name_2>.png
        │   └── ...
        └── semantic_rgb/ # セマンティックセグメンテーションマスク（ラベルは色でエンコード）
            ├── <image_name_1>.png
            ├── <image_name_2>.png
            └── ...
```

## KITTIアノテーションのインポート

KITTIアノテーションは2通りの方法でアップロードできます：
検出タスク用の矩形、および
セグメンテーションタスク用のマスクです。

検出タスクの場合、アップロードするアーカイブは以下の構造である必要があります。

```
└─ annotations.zip/
    ├── labels.txt # 任意、オリジナル以外の検出ラベル用のラベル一覧
    └── <subset_name>/
        ├── label_2/ # 左カラーカメラのラベルファイル
        │   ├── <image_name_1>.txt
        │   ├── <image_name_2>.txt
        │   └── ...
```

セグメンテーションタスクの場合、アップロードするアーカイブは以下の構造である必要があります。

```
└─ annotations.zip/
    ├── label_colors.txt # 任意、オリジナル以外のセグメンテーションラベル用のカラーマップ
    └── <subset_name>/
        ├── instance/ # インスタンスセグメンテーションマスク
        │   ├── <image_name_1>.png
        │   ├── <image_name_2>.png
        │   └── ...
        ├── semantic/ # 任意、セマンティックセグメンテーションマスク（ラベルはIDでエンコード）
        │   ├── <image_name_1>.png
        │   ├── <image_name_2>.png
        │   └── ...
        └── semantic_rgb/ # 任意、セマンティックセグメンテーションマスク（ラベルは色でエンコード）
            ├── <image_name_1>.png
            ├── <image_name_2>.png
            └── ...
```

すべてのアノテーションファイルおよびマスクは、
オリジナルのフォーマット仕様で説明されている構造である必要があります。

# 1点による線形補間

移動するオブジェクトにアノテーションを付けるために、点に対して線形補間を使用できます。

1. 始める前に、`Points` を選択します。
1. 線形補間は1点のみで機能するため、`Number of points` を1に設定する必要があります。
1. その後、`Track` を選択します。

   ![](/images/image122.jpg)

1. `Track` をクリックして描画モードに入り、左クリックで点を作成します。
   その後、形状は自動的に完成します。

   ![](/images/image163_detrac.jpg)

1. 数フレーム進めて点を希望の位置に移動させると、
   キーフレームが作成され、中間フレームは自動的に描画されます。
   このオブジェクトは補間トラックとして扱うことができます。
   `Outside` を使って非表示にしたり、キーフレームの移動なども可能です。

   ![](/images/image165_detrac.jpg)

1. この方法で、`Points` を使った線形補間が得られます。

   ![](/images/gif013_detrac.gif)

# シェイプモードでのポイント

顔やランドマークのアノテーションなどに使用されます。

開始する前に、`ポイント`を選択する必要があります。必要に応じて `ポイント数` フィールドで固定ポイント数を設定することができ、設定した場合は自動的に描画が終了します。

![](/images/image042.jpg)

`シェイプ` をクリックして描画モードに入ります。これで必要な領域のアノテーションを開始できます。
ポイントは自動的にグループ化されます — すべてのポイントは、開始と終了の間でリンクされていると見なされます。
エリアのマーキングを終了するには、もう一度 `N` を押すか、上部パネルの `完了` ボタンをクリックします。
`Ctrl` キーを押しながらクリックするか、ポイントを右クリックして `ポイントを削除` を選択するとポイントを削除できます。
`Shift` キーを押しながらクリックすると、ポイントシェイプエディタが開きます。
ここでは既存のシェイプに新しいポイントを追加できます。描画中にズームイン・ズームアウト（マウスホイールのスクロール時）や移動（マウスホイールをクリックしてマウスを動かす）も可能です。描画後にオブジェクトをドラッグして移動したり、オブジェクト完成後に個々のポイントの位置を変更することもできます。

![](/images/image063_affectnet.jpg)

# ポイントによるアノテーション


# 手動QAとレビュー


アノテーションという要求の高い作業において、正確性の確保は最重要事項です。

CVATでは、アノテーションの誤りや不一致を特定し、検証作業を効率化するために特化した**レビュー モード**を導入しています。

> **注**：**レビュー モード**は3Dタスクには適用できません。

参照：

- [レビューと問題報告：レビュー専用モード](#review-and-report-issues-review-only-mode)
  - [レビュアーの割り当て](#assigning-reviewer)
  - [問題の報告](#reporting-issues)
  - [クイックイシュー](#quick-issue)
  - [コレクターの割り当て](#assigning-corrector)
  - [報告された問題の修正](#correcting-reported-issues)
- [レビューと問題報告：レビュー＆修正モード](#review-and-report-issues-review-and-correct-mode)
- [イシューのナビゲーションとインターフェース](#issues-navigation-and-interface)
  - [イシュ―タブ](#issues-tab)
  - [イシューワークスペース](#issues-workspace)
  - [イシューコメント](#issues-comments)
- [手動QAの完全動画チュートリアル](#manual-qa-complete-video-tutorial)

## レビューと問題報告：レビュー専用モード

レビュー モードは、**イシュー**ツールが利用できる特別なユーザーインターフェース（UI）設定です。このツールを使って、フレーム内のオブジェクトや領域に関する問題を特定し、説明することができます。

> **注**：レビュー モード中は、他の全てのツールが非表示になります。

**レビュー**モードの画面は次のようになります：

![レビュー モード画面](/images/review_mode_screen.jpg)

### レビュアーの割り当て

> **注**：レビュアーはプロジェクトもしくはタスクのオーナー、アサインされた者、メンテナーによって割り当て可能です。

レビュアーをジョブに割り当てるには、以下の手順を実行します：

1. オーナーまたはメンテナーアカウントでログインします。
2. （任意）レビュアーとして割り当てたい人物が**組織**のメンバーでない場合は、この人物を**組織**に招待する必要があります。
3. **アサイン先**フィールドをクリックし、レビュアーを選択します。
4. **ステージ**のドロップダウンリストから**バリデーション**を選択します。

   ![レビュアーの割り当て](/images/image194.jpg)

### 問題の報告

問題を報告するには、以下の手順を実行します：

1. レビュアーアカウントでログインします。
2. **コントロール**サイドバーで**イシューを開く**をクリックします（![](/images/image195.jpg)）。
3. 問題が発生しているフレーム領域をクリックすると、**イシューレポートポップアップ**が表示されます。

   ![イシューレポートウィンドウ](/images/issue_report.jpg)

4. **イシューレポートポップアップ**のテキストフィールドに、問題の説明を入力します。
5. **送信**をクリックします。

### クイックイシュー

**クイックイシュー**機能はレビュー作業を効率化します。
レビュアーは、以前作成した問題リストから選択したり、新しい問題を追加したりできるため、より迅速かつ組織的なレビューが可能です。

![クイックイシュー](/images/image231.jpg)

**クイックイシュー**を作成するには、以下の手順を実行します：

1. 問題が発生しているフレーム領域を右クリックします。
2. ポップアップメニューから、以下のいずれかを選択します：

   - **イシューを開く...**：新しいイシューを作成します。
   - **クイックイシュー：位置不正**：ラベルの位置が不正であることを報告します。
   - **クイックイシュー：属性不正**：ラベルの属性が不正であることを報告します。
   - **クイックイシュー...**：過去に自分が報告した問題リストを開きます。

### コレクターの割り当て

> **注**：レビュアーの割り当てはプロジェクトオーナーまたはメンテナーのみ可能です。

コレクターをジョブに割り当てるには、以下の手順を実行します：

1. オーナーまたはメンテナーアカウントでログインします。
2. （任意）コレクターとして割り当てたい人物が**組織**のメンバーでない場合は、この人物を**組織**に招待する必要があります。
3. **アサイン先**フィールドをクリックし、レビュアーを選択します。
4. **ステージ**のドロップダウンリストから**アノテーション**を選択します。

   ![コレクターの割り当て](/images/image194_1.jpg)

### 報告された問題の修正

報告された問題を修正するには、以下の手順を実行します：

1. コレクターアカウントでログインします。
2. レビュー済みのジョブにアクセスし、開きます。
3. 問題レポートをクリックし、修正すべき詳細を確認します。

   ![イシューレポートラベル](/images/issue_report_label.jpg)

4. アノテーションを修正します。
5. 問題レポートにコメントを追加し、**解決**をクリックします。

   ![イシューレポート](/images/resolve_issue.jpg)

6. 全ての問題を修正後、作業を保存し、**メニュー**から**ジョブの状態を変更**を選択して、状態を**完了**にします。

   ![ジョブ状態の変更](/images/image197.jpg)

## レビューと問題報告：レビュー＆修正モード

[レビュアーとして割り当てられた](#assigning-reviewer)人物は、修正モードに切り替えてすべてのアノテーション問題を修正することができます。

レビュアーとしてアノテーション問題を修正するには、以下の手順を実行します：

1. レビュアーアカウントでログインします。
2. 割り当てられたジョブにアクセスし、開きます。
3. 右上のドロップダウンリストから**標準**を選択します。

   ![ジョブ状態の変更](/images/switch_to_standart_mode.jpg)

## イシューのナビゲーションとインターフェース

このセクションでは、ナビゲーション、インターフェース、およびコメント欄について説明します。

### イシュ―タブ

作成されたイシューは、**オブジェクト**サイドバーの**イシュー**タブに表示されます。

![](/images/image196_detrac.jpg)

以下の要素があります：

<!--lint disable maximum-line-length-->

| 要素                 | 説明                                                     |
| -------------------- | ------------------------------------------------------ |
| 矢印                 | 矢印をクリックしてイシューを切り替え可能               |
| 全イシューを非表示   | 目のアイコンをクリックすると全イシューを非表示         |
| 解決済みイシュー非表示 | チェックマークをクリックすると解決済みイシューのみ非表示 |
| グラウンドトゥルース | グラウンドトゥルースのアノテーションやオブジェクト表示   |

<!--lint enable maximum-line-length-->

### イシューワークスペース

ワークスペース内でイシューをクリックし、コメントを追加、(**削除**)や(**解決**)も可能です。

![](/images/image232.jpg)

解決済みイシューを再度開くには、**再オープン**をクリックします。

同一箇所に複数作成されたイシューも、イシュー上にカーソルを合わせてマウスホイールをスクロールすることで簡単にアクセスできます。

![](/images/issues_scroll.gif)

### イシューコメント

イシューには必要なだけコメントを追加できます。

オブジェクトツールバーには、最初と最後のコメントのみ表示されます。

![](/images/issue_comments.png)

コメントテキストはコピー＆ペースト可能です。

## 手動QAの完全動画チュートリアル

この動画でプロセスを解説しています：

<!--lint disable maximum-line-length-->

<iframe width="560" height="315" src="https://www.youtube.com/embed/7HxCpjdQt-c?si=xIho-KJLv4b__tRo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<!--lint enable maximum-line-length-->

# CVATチームのパフォーマンスとモニタリング


CVAT Cloudでは、**パフォーマンス**機能を使って
チームの生産性やアノテーションの進捗を示す
さまざまな指標を追跡することができます。

参照：

- [パフォーマンスダッシュボード](#performance-dashboard)
- [パフォーマンスビデオチュートリアル](#performance-video-tutorial)

## パフォーマンスダッシュボード

**パフォーマンス**ダッシュボードを開くには、以下の手順を実行してください。

1. 上部メニューで**プロジェクト**/**タスク**/**ジョブ**をクリックします。
2. リストから項目を選択し、三点リーダー (![Open menu](/images/openmenu.jpg)) をクリックします。
3. メニューから**分析を表示** > **パフォーマンス**タブを選択します。

![Open menu](/images/viewanalytics.jpg)

次のようなダッシュボードが表示されます。

![Open menu](/images/performance_dashboard.jpg)

**パフォーマンス**ダッシュボードには以下の要素があります。

<!--lint disable maximum-line-length-->

| 要素                                       | 説明                                                                                                 |
| ------------------------------------------ | ---------------------------------------------------------------------------------------------------- |
| 分析対象                                   | **オブジェクト**/**タスク**/**ジョブ**番号。                                                         |
| 作成日時                                   | ダッシュボードが最後に更新された時刻。                                                               |
| オブジェクト                               | 日別でアノテーション済み・更新・削除されたオブジェクト数を示すグラフ。                               |
| アノテーション速度（オブジェクト/時）      | 1時間あたりにアノテーションされたオブジェクト数。                                                    |
| 時間                                       | グラフのさまざまな期間を選択できるドロップダウンリスト。現在はヒストグラムデータのみに影響します。     |
| アノテーション時間（時間）                 | **プロジェクト**/**タスク**/**ジョブ**が**進行中**の状態にある合計時間を表示。                        |
| 総オブジェクト数                           | タスク内の総オブジェクト数を表示。補間されたオブジェクトもカウントされます。                          |
| 総アノテーション速度（オブジェクト/時）    | **プロジェクト**/**タスク**/**ジョブ**でのアノテーション速度を表示。補間されたオブジェクトも含みます。 |

<!--lint enable maximum-line-length-->

ダッシュボードの各要素はドラッグ＆ドロップで並び替え可能です。

## パフォーマンスビデオチュートリアル

このビデオでは手順を紹介しています。

<iframe width="560" height="315" src="https://www.youtube.com/embed/W4LUq3gwLko" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

# CVAT クラウドにおける分析と品質管理


# 直方体の作成

始める前に、「直方体」が選択されていることを確認し、描画方法として「長方形から」または「4点指定」を選択してください。

![](/images/image091.jpg)

#### 4点指定で直方体を描く

描画方法「4点指定」を選択し、[図形]をクリックして描画モードに入ります。直方体の描き方はいくつかあります。
4点を配置することで直方体を描くことができ、その後描画が自動的に完了します。
最初の3点は直方体の平面を決定し、最後の1点はその平面の奥行きを決定します。
最初の3点については、2つの最も近い側面と上下面のみを描くことをおすすめします。

いくつかの例：

![](/images/image177_mapillary_vistas.jpg)

### 長方形から直方体を描く

描画方法「長方形から」を選択し、[図形]をクリックして描画モードに入ります。
長方形で描く場合は、バウンディングボックスを使って物体の正面の平面を選択する必要があります。
作成された直方体の奥行きやパースは編集できます。

例：

![](/images/image182_mapillary_vistas.jpg)

# 直方体の編集


![](/images/image178_mapillary_vistas.jpg)

直方体は、点をドラッグしたり、特定の面や平面をドラッグすることで、さまざまな方法で編集できます。
まず、灰色の線だけで描かれた面があることに注目してください。これを前面と呼びます。

前面の後ろにある形状をドラッグするだけで、直方体を移動できます。
直方体は、辺の中央にある点をドラッグすることで拡張できます。
また、頂点にある点をドラッグすることで、直方体を上下に拡張することもできます。

![](/images/gif017_mapillary_vistas.gif)

遠近効果をつけて描画する場合、前面がカメラに最も近いと仮定する必要があります。
まず、`Shift`キーを押しながら灰色（前面）以外の頂点の点をドラッグしてください。
その後、通常通り直方体を編集できます。

![](/images/gif018_mapillary_vistas.gif)

遠近効果をリセットしたい場合は、直方体を右クリックして
「遠近をリセット」を選択すると、通常の直方体に戻すことができます。

![](/images/image180_mapillary_vistas.jpg)

灰色の面の位置は、隣接する可視側面と入れ替えることができます。
直方体を右クリックして「遠近の向きを切り替え」を選択すると実行できます。
この操作は遠近効果もリセットされることに注意してください。

![](/images/image179_mapillary_vistas.jpg)

直方体の特定の面も編集できます。
編集できる面は、前面（灰色の面）に対して左面、右面、背面です。
これらの面をドラッグすることで、直方体の他の部分とは独立して移動できます。

![](/images/gif020_mapillary_vistas.gif)

トラックモードでも直方体を使用できます。これはトラックモードの矩形と同様です
（基本や
応用、
ポリゴンのトラックモードを参照）。

# キュボイドによるアノテーション


車や箱などの3次元オブジェクトをアノテーションするために使用します。
現在、この機能は一点透視図法のみをサポートしており、垂直な辺が正確に側面と平行になるという制約があります。